import{a as de}from"./chunk-VHKLBTQQ.js";import"./chunk-DTICWRO3.js";import{a as ie}from"./chunk-U2DSLRRK.js";import{a as oe,b as re,c as ae,d as le,e as se,f as me}from"./chunk-2C4VCG6N.js";import{b as K,c as X,f as Y,i as Z,j as ee,k as te,n as ne}from"./chunk-NJ67TIRQ.js";import{a as J}from"./chunk-IARL6YQG.js";import{Aa as p,Fa as m,Ga as t,Ha as n,Ia as _,Ib as G,Ja as P,Ka as I,Ma as h,N as L,Pa as v,Pb as U,Qa as u,U as g,V as x,Va as b,Xa as o,Ya as d,Za as M,ab as T,bb as D,cb as F,d as V,eb as k,g as j,ia as a,ib as A,jb as $,ra as w,ua as C,ub as y,va as W,vb as Q,xa as H,xb as q,y as B,ya as z}from"./chunk-I3ZBIMQN.js";var R=class{name="";method=null};function ge(i,l){if(i&1&&(t(0,"option",11),o(1),n()),i&2){let e=l.$implicit;m("ngValue",e.value),a(),d(e.text)}}var S=class i{model=new R;routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different binding"},{value:"Distribute",text:"Distribute: Each message is sent to all bindings"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active binding"}];_onconfirmed=new j;get onconfirmed(){return this._onconfirmed}_confirmed=!1;constructor(){}ngOnInit(){}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-router-create-modal"]],standalone:!1,decls:19,vars:3,consts:[["queueForm",""],["mat-dialog-title","",1,"title"],[1,"content"],[1,"router-form","scroll"],[1,"form-item"],["placeholder","Router Name","type","text",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"jockey-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-blue",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"]],template:function(e,r){if(e&1){let s=h();t(0,"h2",1),o(1,"Create New Router"),n(),t(2,"mat-dialog-content",2)(3,"div",3,0)(5,"div",4)(6,"label"),o(7,"Router Name"),n(),t(8,"input",5),F("ngModelChange",function(f){return g(s),D(r.model.name,f)||(r.model.name=f),x(f)}),n()(),t(9,"div",4)(10,"label"),o(11,"Router Method"),n(),t(12,"select",6),F("ngModelChange",function(f){return g(s),D(r.model.method,f)||(r.model.method=f),x(f)}),p(13,ge,2,2,"option",7),n()()()(),t(14,"mat-dialog-actions",8)(15,"button",9),v("click",function(){return g(s),x(r.create())}),o(16,"Create Router"),n(),t(17,"button",10),o(18,"Cancel"),n()()}e&2&&(a(8),T("ngModel",r.model.name),a(4),T("ngModel",r.model.method),a(),m("ngForOf",r.routerMethods))},dependencies:[y,re,ae,se,le,ee,te,K,Z,X,Y],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.router-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]})};var O=class i{transform(l){let e=l.type;if(e=="Direct")if(l.target.startsWith("@")){let r=l.target.indexOf(":");if(r>0)return l.target.substr(1,r-1)}else return"Id";if(e=="Http")switch(l.contentType){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"PATCH";case 4:return"DELETE"}return e.indexOf("Queue")>=0?"Queue":e}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=H({name:"bindingType",type:i,pure:!0,standalone:!1})};function _e(i,l){if(i&1&&(P(0),_(1,"i"),t(2,"a",25),o(3),n(),t(4,"small"),o(5),n(),I()),i&2){let e=u(2).$implicit;a(),b("green",e.enabled)("red",!e.enabled),a(),m("routerLink",k("/router/",e.name)),a(),M(" ",e.name," "),a(2),d(e.method)}}function ve(i,l){if(i&1&&(t(0,"span"),o(1),n()),i&2){let e=u().$implicit;a(),d(e.contentType)}}function Ce(i,l){if(i&1&&(t(0,"div",18)(1,"div",19),p(2,_e,6,8,"ng-container",20),n(),t(3,"div",21)(4,"span"),o(5),n()(),t(6,"div",22)(7,"span"),o(8),n()(),t(9,"div",23)(10,"small"),o(11),A(12,"bindingType"),n(),t(13,"span"),o(14),n()(),t(15,"div",22),p(16,ve,2,1,"span",20),n(),t(17,"div",22)(18,"span"),o(19),n()(),t(20,"div",24)(21,"span"),o(22),n()()()),i&2){let e=l.$implicit,r=l.index,s=u().$implicit;b("first-row",r==0)("last-row",r==s.bindings.length-1),a(2),m("ngIf",r==0),a(3),d(e.name),a(3),d(e.type),a(3),d($(12,12,e)),a(3),d(e.displayTarget),a(2),m("ngIf",e.type=="Direct"),a(3),d(e.interaction),a(3),d(e.priority)}}function he(i,l){if(i&1&&(t(0,"div",18)(1,"div",19),_(2,"i"),t(3,"a",25),o(4),n(),t(5,"small"),o(6),n()(),t(7,"div",21),_(8,"span"),n(),t(9,"div",22),_(10,"span"),n(),_(11,"div",23)(12,"div",22)(13,"div",22)(14,"div",24),n()),i&2){let e=u().$implicit;a(2),b("green",e.enabled)("red",!e.enabled),a(),m("routerLink",k("/router/",e.name)),a(),M(" ",e.name," "),a(2),d(e.method)}}function be(i,l){if(i&1&&(P(0),_(1,"div",15),p(2,Ce,23,14,"div",16)(3,he,15,8,"div",17),I()),i&2){let e=l.$implicit;a(2),m("ngForOf",e.bindings),a(),m("ngIf",e.bindings.length==0)}}function Me(i,l){if(i&1){let e=h();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),v("click",function(){g(e);let s=u();return x(s.create())}),n()(),t(5,"div",6),o(6," Router "),t(7,"em"),o(8),n()(),t(9,"div",7),o(10,"Binding Name"),n(),t(11,"div",8),o(12,"Binding Type"),n(),t(13,"div",9),o(14,"Binding Target"),n(),t(15,"div",8),o(16,"Content Type"),n(),t(17,"div",8),o(18,"Interaction"),n(),t(19,"div",10),o(20,"Priority"),n()(),t(21,"div",11),p(22,be,4,2,"ng-container",12),n()(),t(23,"div",13)(24,"button",14),v("click",function(){g(e);let s=u();return x(s.create())}),o(25,"Create New Router"),n()()()}if(i&2){let e=u();a(8),M("(",e.routers.length," Routers)"),a(14),m("ngForOf",e.routers)}}var E=class i extends J{constructor(e,r){super();this.routerService=e;this.dialog=r}routers=[];ngOnInit(){return V(this,null,function*(){this.routerService.list().subscribe(e=>{let r=e.body;r.forEach(s=>{s.bindings.forEach(c=>{c.target.startsWith("@")?c.displayTarget=c.target.substr(c.target.indexOf(":")+1):c.displayTarget=c.target})}),this.routers=r,this.subscribeToListRefresh().subscribe(()=>this.routerService.list().subscribe(s=>this.routers=s.body))})})}create(){this.dialog.open(S,{width:"600px"}).componentInstance.onconfirmed.pipe(B(1)).subscribe(s=>{s&&this.routerService.create(s).subscribe(c=>{this.ngOnInit()})})}static \u0275fac=function(r){return new(r||i)(w(de),w(oe))};static \u0275cmp=C({type:i,selectors:[["app-routes"]],standalone:!1,features:[z],decls:1,vars:1,consts:[["class","routers",4,"ngIf"],[1,"routers"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Router",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx14"],[1,"th","fx10"],[1,"th","fx28"],[1,"th","fx8"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"td","fx40px"],["class","trow",3,"first-row","last-row",4,"ngFor","ngForOf"],["class","trow",4,"ngIf"],[1,"trow"],[1,"td","td-fr","fx20"],[4,"ngIf"],[1,"td","fx14"],[1,"td","fx10"],[1,"td","td-fr","fx28"],[1,"td","fx8"],[2,"margin-right","18px","font-weight","500","line-height","23px","font-size","14px",3,"routerLink"]],template:function(r,s){r&1&&p(0,Me,26,2,"div",0),r&2&&m("ngIf",s.routers)},dependencies:[y,Q,G,O],styles:[".routers[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.routers[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.create-router[_ngcontent-%COMP%]{text-align:center;padding:40px}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}"]})};var ce=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=W({type:i});static \u0275inj=L({imports:[q,ie,me,ne,U.forChild([{path:"",component:E}])]})};export{ce as RoutersModule};
