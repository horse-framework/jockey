"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[963],{13963:function(e,i,t){t.r(i),t.d(i,{DashboardModule:function(){return D}});var d=t(38583),a=t(64762),s=t(6823),o=t.n(s),r=t(52962),n=t(43057),u=t(97966),l=t(33018),Z=t(59049),g=t(86176),p=t(65037),v=t(68392),h=t(33369);function c(e,i){if(1&e&&(l.TgZ(0,"div",4),l.TgZ(1,"div",10),l.TgZ(2,"div",11),l.TgZ(3,"div",12),l._uU(4,"Stored Queue Messages"),l.qZA(),l.TgZ(5,"div",13),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"div",11),l.TgZ(8,"div",12),l._uU(9,"Published Queue Messages"),l.qZA(),l.TgZ(10,"div",13),l._uU(11),l.qZA(),l.qZA(),l.TgZ(12,"div",11),l.TgZ(13,"div",12),l._uU(14,"Consumed Queue Messages"),l.qZA(),l.TgZ(15,"div",13),l._uU(16),l.qZA(),l.qZA(),l.TgZ(17,"div",11),l.TgZ(18,"div",12),l._uU(19,"Sent Direct Messages"),l.qZA(),l.TgZ(20,"div",13),l._uU(21),l.qZA(),l.qZA(),l.TgZ(22,"div",11),l.TgZ(23,"div",12),l._uU(24,"Delivered Direct Messages"),l.qZA(),l.TgZ(25,"div",13),l._uU(26),l.qZA(),l.qZA(),l.TgZ(27,"div",11),l.TgZ(28,"div",12),l._uU(29,"Direct Responses"),l.qZA(),l.TgZ(30,"div",13),l._uU(31),l.qZA(),l.qZA(),l.TgZ(32,"div",11),l.TgZ(33,"div",12),l._uU(34,"Published Router Messages"),l.qZA(),l.TgZ(35,"div",13),l._uU(36),l.qZA(),l.qZA(),l.TgZ(37,"div",11),l.TgZ(38,"div",12),l._uU(39,"Delivered Router Messages"),l.qZA(),l.TgZ(40,"div",13),l._uU(41),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(6),l.Oqu(e.dashboard.queueMessages.stored+e.dashboard.queueMessages.storedPrio),l.xp6(5),l.Oqu(e.dashboard.queueMessages.received),l.xp6(5),l.Oqu(e.dashboard.queueMessages.delivery),l.xp6(5),l.Oqu(e.dashboard.otherMessages.directMessage),l.xp6(5),l.Oqu(e.dashboard.otherMessages.directDelivery),l.xp6(5),l.Oqu(e.dashboard.otherMessages.directResponse),l.xp6(5),l.Oqu(e.dashboard.otherMessages.routerPublish),l.xp6(5),l.Oqu(e.dashboard.otherMessages.routerOk)}}function q(e,i){if(1&e&&(l.TgZ(0,"div",1),l.TgZ(1,"div",2),l.TgZ(2,"h3",3),l._uU(3,"Message Statistics"),l.qZA(),l.YNc(4,c,42,8,"div",9),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Q6J("ngIf",e.dashboard)}}function T(e,i){if(1&e&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&e){const e=i.$implicit;l.xp6(1),l.Oqu(e)}}function b(e,i){if(1&e&&(l.TgZ(0,"div",1),l.TgZ(1,"div",2),l.TgZ(2,"h3",3),l._uU(3,"Server Information"),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"div",10),l.TgZ(6,"div",11),l.TgZ(7,"div",12),l._uU(8,"Service Lifetime"),l.qZA(),l.TgZ(9,"div",13),l._uU(10),l.qZA(),l.qZA(),l.TgZ(11,"div",11),l.TgZ(12,"div",12),l._uU(13,"Hostname"),l.qZA(),l.TgZ(14,"div",13),l.YNc(15,T,2,1,"span",14),l.qZA(),l.qZA(),l.TgZ(16,"div",11),l.TgZ(17,"div",12),l._uU(18,"Online Clients"),l.qZA(),l.TgZ(19,"div",13),l._uU(20),l.qZA(),l.qZA(),l.TgZ(21,"div",11),l.TgZ(22,"div",15),l._uU(23,"All defined remote nodes."),l.qZA(),l.TgZ(24,"div",12),l._uU(25,"Total Nodes"),l.qZA(),l.TgZ(26,"div",13),l._uU(27),l.qZA(),l.qZA(),l.TgZ(28,"div",11),l.TgZ(29,"div",15),l._uU(30,"Connected nodes"),l.qZA(),l.TgZ(31,"div",12),l._uU(32,"Online Nodes"),l.qZA(),l.TgZ(33,"div",13),l._uU(34),l.qZA(),l.qZA(),l.TgZ(35,"div",11),l.TgZ(36,"div",12),l._uU(37,"Max Queue Limit"),l.qZA(),l.TgZ(38,"div",13),l._uU(39),l.ALo(40,"unlimited"),l.qZA(),l.qZA(),l.TgZ(41,"div",11),l.TgZ(42,"div",12),l._uU(43,"Max Router Limit"),l.qZA(),l.TgZ(44,"div",13),l._uU(45),l.ALo(46,"unlimited"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(10),l.Oqu(e.lifetime),l.xp6(5),l.Q6J("ngForOf",e.dashboard.server.hosts),l.xp6(5),l.Oqu(e.dashboard.server.onlineClients),l.xp6(7),l.Oqu(e.dashboard.server.totalNodes),l.xp6(7),l.Oqu(e.dashboard.server.connectedNodes),l.xp6(5),l.Oqu(l.lcZ(40,7,e.dashboard.serverOptions.queueLimit)),l.xp6(6),l.Oqu(l.lcZ(46,9,e.dashboard.serverOptions.routerLimit))}}function A(e,i){if(1&e&&(l.TgZ(0,"em"),l._uU(1),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.hij("(",e.dashboard.queueOptions.ackTimeout," ms timeout)")}}function m(e,i){1&e&&(l.TgZ(0,"div",13),l._uU(1,"No Timeout"),l.qZA())}function f(e,i){if(1&e&&(l.TgZ(0,"div",13),l._uU(1),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.hij(" ",e.dashboard.queueOptions.msgTimeout," milliseconds ")}}function x(e,i){1&e&&(l.TgZ(0,"div",13),l._uU(1,"No Delay"),l.qZA())}function _(e,i){if(1&e&&(l.TgZ(0,"div",13),l._uU(1),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.hij(" ",e.dashboard.queueOptions.delayBetweenMsgs," milliseconds ")}}function U(e,i){1&e&&(l.TgZ(0,"div",13),l._uU(1,"No Delay"),l.qZA())}function O(e,i){if(1&e&&(l.TgZ(0,"div",13),l._uU(1),l.qZA()),2&e){const e=l.oxw(2);l.xp6(1),l.hij(" ",e.dashboard.queueOptions.putbackDelay," milliseconds ")}}function y(e,i){if(1&e&&(l.TgZ(0,"div",1),l.TgZ(1,"div",2),l.TgZ(2,"h3",3),l._uU(3,"Default Queue Options"),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"div",10),l.TgZ(6,"div",11),l.TgZ(7,"div",12),l._uU(8,"Type"),l.qZA(),l.TgZ(9,"div",13),l._uU(10),l.qZA(),l.qZA(),l.TgZ(11,"div",11),l.TgZ(12,"div",12),l._uU(13,"Acknowledge"),l.qZA(),l.TgZ(14,"div",13),l._uU(15),l.YNc(16,A,2,1,"em",16),l.qZA(),l.qZA(),l.TgZ(17,"div",11),l.TgZ(18,"div",12),l._uU(19,"Message Timeout"),l.qZA(),l.YNc(20,m,2,0,"div",17),l.YNc(21,f,2,1,"div",17),l.qZA(),l.TgZ(22,"div",11),l.TgZ(23,"div",12),l._uU(24,"Message Limit"),l.qZA(),l.TgZ(25,"div",13),l._uU(26),l.ALo(27,"unlimited"),l.TgZ(28,"em"),l._uU(29),l.ALo(30,"filesize"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(31,"div",11),l.TgZ(32,"div",12),l._uU(33,"Subscribers Limit"),l.qZA(),l.TgZ(34,"div",13),l._uU(35),l.ALo(36,"unlimited"),l.qZA(),l.qZA(),l.TgZ(37,"div",11),l.TgZ(38,"div",12),l._uU(39,"Delay Between Messages"),l.qZA(),l.YNc(40,x,2,0,"div",17),l.YNc(41,_,2,1,"div",17),l.qZA(),l.TgZ(42,"div",11),l.TgZ(43,"div",12),l._uU(44,"Put Back Delay"),l.qZA(),l.YNc(45,U,2,0,"div",17),l.YNc(46,O,2,1,"div",17),l.qZA(),l.TgZ(47,"div",11),l.TgZ(48,"div",12),l._uU(49,"Auto Creation"),l.qZA(),l.TgZ(50,"div",13),l._uU(51),l.qZA(),l.qZA(),l.TgZ(52,"div",11),l.TgZ(53,"div",12),l._uU(54,"Auto Destroy"),l.qZA(),l.TgZ(55,"div",13),l._uU(56),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(10),l.Oqu(e.dashboard.queueOptions.type),l.xp6(5),l.hij(" ",e.dashboard.queueOptions.ack," "),l.xp6(1),l.Q6J("ngIf",e.dashboard.queueOptions.ackTimeout>0),l.xp6(4),l.Q6J("ngIf",0==e.dashboard.queueOptions.msgTimeout),l.xp6(1),l.Q6J("ngIf",e.dashboard.queueOptions.msgTimeout>0),l.xp6(5),l.hij(" ",l.lcZ(27,14,e.dashboard.queueOptions.msgLimit)," "),l.xp6(3),l.hij("(Size Limit: ",l.lcZ(30,16,e.dashboard.queueOptions.msgSizeLimit),")"),l.xp6(6),l.Oqu(l.lcZ(36,18,e.dashboard.queueOptions.clientLimit)),l.xp6(5),l.Q6J("ngIf",0==e.dashboard.queueOptions.delayBetweenMsgs),l.xp6(1),l.Q6J("ngIf",e.dashboard.queueOptions.delayBetweenMsgs>0),l.xp6(4),l.Q6J("ngIf",0==e.dashboard.queueOptions.putbackDelay),l.xp6(1),l.Q6J("ngIf",e.dashboard.queueOptions.putbackDelay>0),l.xp6(5),l.Oqu(e.dashboard.queueOptions.autoQueueCreation),l.xp6(5),l.Oqu(e.dashboard.queueOptions.autoDestroy)}}let R=(()=>{class e extends r.H{constructor(e,i,t){super(),this.queueGraphService=e,this.messageGraphService=i,this.dashboardService=t,this.deliveryChart=null,this.msgChart=null,this.storeChart=null}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.load(),this.on((0,n.F)(5e3)).subscribe(()=>(0,a.mG)(this,void 0,void 0,function*(){this.dashboardService.load().then(e=>this.dashboard=e),yield this.loadCharts()}))})}load(){return(0,a.mG)(this,void 0,void 0,function*(){this.dashboardService.load().then(e=>this.dashboard=e),yield this.loadCharts();let e=new u.c;this.on((0,n.F)(1e3)).subscribe(()=>{if(!this.dashboard)return;let i=(new Date).getTime()/1e3;this.lifetime=e.transform(i,this.dashboard.server.startedDate)})})}loadCharts(){return(0,a.mG)(this,void 0,void 0,function*(){let e=yield this.queueGraphService.load(),i=yield this.messageGraphService.load();this.deliveryChart=new(o())(document.getElementById("delivery-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getDeliveryChartData(e),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.storeChart=new(o())(document.getElementById("store-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getStoreChartData(e),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.msgChart=new(o())(document.getElementById("msg-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getMessageChartData(i),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}})})}getDeliveryChartData(e){return{labels:e.labels,datasets:[{label:"Received",borderColor:"#444",data:e.data.map(e=>e.received),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Delivered",borderColor:"#1070af",data:e.data.map(e=>e.delivery),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Ack",borderColor:"#10b02a",data:e.data.map(e=>e.ack),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Neg. Ack",borderColor:"#a020c0",data:e.data.map(e=>e.nack),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Unack",borderColor:"#999",data:e.data.map(e=>e.unack),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Error",borderColor:"#ff0000",data:e.data.map(e=>e.error),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}getStoreChartData(e){return{labels:e.labels,datasets:[{label:"Msgs",borderColor:"#104090",data:e.data.map(e=>e.stored),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"High Prio Msgs",borderColor:"#f07000",data:e.data.map(e=>e.storedPrio),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Pending for Ack",borderColor:"#aa2080",data:e.data.map(e=>e.pending),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Timeout",borderColor:"#cc3333",data:e.data.map(e=>e.timeout),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}getMessageChartData(e){return{labels:e.labels,datasets:[{label:"Direct Sent",borderColor:"#1070c0",data:e.data.map(e=>e.directMessage),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Response",borderColor:"#907010",data:e.data.map(e=>e.directResponse),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Delivery",borderColor:"#10a050",data:e.data.map(e=>e.directDelivery),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct No Receiver",borderColor:"#8010e0",data:e.data.map(e=>e.directNoReceiver),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Publish",borderColor:"#606090",data:e.data.map(e=>e.routerPublish),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Received",borderColor:"#20caca",data:e.data.map(e=>e.routerOk),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router No Receiver",borderColor:"#e02255",data:e.data.map(e=>e.routerFailed),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}}return e.\u0275fac=function(i){return new(i||e)(l.Y36(Z.J),l.Y36(g.f),l.Y36(p.s))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-dashboard"]],features:[l.qOj],decls:22,vars:4,consts:[[1,"dashboard",3,"hidden"],[1,"dashboard-portlet"],[1,"portlet"],[1,"portlet-title"],[1,"portlet-body"],["id","store-chart"],["class","dashboard-portlet",4,"ngIf"],["id","delivery-chart"],["id","msg-chart"],["class","portlet-body",4,"ngIf"],[1,"key-value-table"],[1,"kvt-row"],[1,"kvt-key"],[1,"kvt-value"],[4,"ngFor","ngForOf"],[1,"kvt-info"],[4,"ngIf"],["class","kvt-value",4,"ngIf"]],template:function(e,i){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"h3",3),l._uU(4,"Stored Messages"),l.qZA(),l.TgZ(5,"div",4),l._UZ(6,"canvas",5),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,q,5,1,"div",6),l.TgZ(8,"div",1),l.TgZ(9,"div",2),l.TgZ(10,"h3",3),l._uU(11,"Queue Messages and Deliveries"),l.qZA(),l.TgZ(12,"div",4),l._UZ(13,"canvas",7),l.qZA(),l.qZA(),l.qZA(),l.YNc(14,b,47,11,"div",6),l.TgZ(15,"div",1),l.TgZ(16,"div",2),l.TgZ(17,"h3",3),l._uU(18,"Direct and Route Messages and Deliveries"),l.qZA(),l.TgZ(19,"div",4),l._UZ(20,"canvas",8),l.qZA(),l.qZA(),l.qZA(),l.YNc(21,y,57,20,"div",6),l.qZA()),2&e&&(l.Q6J("hidden",null==i.dashboard),l.xp6(7),l.Q6J("ngIf",i.dashboard),l.xp6(7),l.Q6J("ngIf",i.dashboard),l.xp6(7),l.Q6J("ngIf",i.dashboard))},directives:[d.O5,d.sg],pipes:[v.O,h.c],styles:[".dashboard[_ngcontent-%COMP%]{min-width:380px;max-width:1270px;width:70%;margin:auto;display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start;flex-wrap:wrap;padding-bottom:50px}.dashboard-portlet[_ngcontent-%COMP%]{flex:0 1 50%}.dashboard-portlet.wide[_ngcontent-%COMP%]{flex:0 1 100%!important}.dashboard-portlet[_ngcontent-%COMP%]   .portlet-body[_ngcontent-%COMP%]{height:400px}"]}),e})();var C=t(44139),M=t(91887);let D=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[d.ez,M.D,C.Bz.forChild([{path:"",component:R}])]]}),e})()}}]);