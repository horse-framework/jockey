(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{FWq7:function(e,t,n){"use strict";n.r(t),n.d(t,"ConsoleModule",(function(){return h}));var o=n("ofXK"),s=n("l5mm"),c=n("pLZG"),i=n("HIds"),r=n("5mbK"),a=n("fXoL"),l=n("FuJ8"),g=n("3Pt+");function d(e,t){if(1&e){const e=a.Rb();a.Qb(0,"select",15),a.Yb("ngModelChange",(function(t){return a.jc(e),a.ac().targetType=t})),a.Qb(1,"option",16),a.qc(2,"Target by Name"),a.Pb(),a.Qb(3,"option",17),a.qc(4,"Target by Topic"),a.Pb(),a.Pb()}if(2&e){const e=a.ac();a.ec("ngModel",e.targetType)}}function u(e,t){if(1&e){const e=a.Rb();a.Qb(0,"select",15),a.Yb("ngModelChange",(function(t){return a.jc(e),a.ac().targetType=t})),a.Qb(1,"option",18),a.qc(2,"Target by Id"),a.Pb(),a.Qb(3,"option",16),a.qc(4,"Target by Name"),a.Pb(),a.Qb(5,"option",19),a.qc(6,"Target by Type"),a.Pb(),a.Pb()}if(2&e){const e=a.ac();a.ec("ngModel",e.targetType)}}let b=(()=>{class e extends i.a{constructor(e){super(),this.socket=e,this.MessageLimit=1e3,this.source="queue",this.targetType="name",this.target="",this.search="",this.showTime=!0,this.showMessageId=!0,this.showContentType=!1,this.autoScroll=!0,this._messages=new Set,this._datePipe=new o.d("en-US")}ngOnInit(){this.element=document.getElementById("console"),this.on(this.socket.onmessage).pipe(Object(c.a)(e=>e.type==r.a.ConsoleMessage)).subscribe(e=>this.addMessage(e.payload)),Object(s.a)(100).subscribe(()=>{this.autoScroll&&(this.element.scrollTop=this.element.scrollHeight)})}ngOnDestroy(){super.ngOnDestroy();let e={requestId:(new Date).getTime().toString(),source:null,targetType:null,target:null};this.socket.send(r.a.ConsoleRequest,e)}toggleTime(){this.showTime=!this.showTime,this.redraw()}toggleMessageId(){this.showMessageId=!this.showMessageId,this.redraw()}toggleContentType(){this.showContentType=!this.showContentType,this.redraw()}toggleAutoScroll(){this.autoScroll=!this.autoScroll}searching(e){this.redraw()}submit(){let e={requestId:(new Date).getTime().toString(),source:this.source,targetType:this.targetType,target:this.target};this.socket.send(r.a.ConsoleRequest,e)}clear(){this._messages.clear(),this.redraw()}redraw(){let e="";this._messages.forEach(t=>{this.isInFilter(t)&&(e+=this.createMessageHtml(t))}),this.element.innerHTML=e,this.element.scrollTop=this.element.scrollHeight}addMessage(e){if(this._messages.size>2e3)for(let n=0;n<500;n++){var t=this._messages.values().next();this._messages.delete(t.value)}this._messages.add(e),this.isInFilter(e)&&this.element.appendChild(this.createMessageElement(e))}createMessageElement(e){let t=(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p>",n=document.createElement("div");return n.className="citem",n.innerHTML=t,n}createMessageHtml(e){return'<div class="citem">'+(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p></div></div>"}isInFilter(e){return this.search.length<1||e.messageId.includes(this.search)||e.message.includes(this.search)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-console"]],features:[a.xb],decls:29,vars:13,consts:[[1,"console-frame"],[1,"console-panel"],[1,"console-filter"],["name","source",3,"ngModel","ngModelChange"],["value","queue","selected",""],["value","router"],["value","direct"],["name","targetType",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","target","placeholder","Type target",3,"ngModel","ngModelChange"],[3,"click"],[1,"console-buttons"],["type","text","name","search","placeholder","Search in messages",3,"ngModel","ngModelChange","input"],[1,"toggle-button",3,"click"],[1,"red-button",3,"click"],["id","console",1,"console"],["name","targetType",3,"ngModel","ngModelChange"],["value","name"],["value","topic"],["value","id"],["value","type"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"form"),a.Qb(4,"select",3),a.Yb("ngModelChange",(function(e){return t.source=e})),a.Qb(5,"option",4),a.qc(6,"Queue"),a.Pb(),a.Qb(7,"option",5),a.qc(8,"Router"),a.Pb(),a.Qb(9,"option",6),a.qc(10,"Direct"),a.Pb(),a.Pb(),a.oc(11,d,5,1,"select",7),a.oc(12,u,7,1,"select",7),a.Qb(13,"input",8),a.Yb("ngModelChange",(function(e){return t.target=e})),a.Pb(),a.Qb(14,"button",9),a.Yb("click",(function(){return t.submit()})),a.qc(15,"Apply Filter"),a.Pb(),a.Pb(),a.Pb(),a.Qb(16,"div",10),a.Qb(17,"input",11),a.Yb("ngModelChange",(function(e){return t.search=e}))("input",(function(e){return t.searching(e)})),a.Pb(),a.Qb(18,"span",12),a.Yb("click",(function(){return t.toggleTime()})),a.qc(19,"Time"),a.Pb(),a.Qb(20,"span",12),a.Yb("click",(function(){return t.toggleMessageId()})),a.qc(21,"Message Id"),a.Pb(),a.Qb(22,"span",12),a.Yb("click",(function(){return t.toggleContentType()})),a.qc(23,"Content Type"),a.Pb(),a.Qb(24,"span",12),a.Yb("click",(function(){return t.toggleAutoScroll()})),a.qc(25,"Auto Scroll"),a.Pb(),a.Qb(26,"span",13),a.Yb("click",(function(){return t.clear()})),a.qc(27,"Clear Console"),a.Pb(),a.Pb(),a.Pb(),a.Lb(28,"div",14),a.Pb()),2&e&&(a.Ab(4),a.ec("ngModel",t.source),a.Ab(7),a.ec("ngIf","queue"==t.source),a.Ab(1),a.ec("ngIf","direct"==t.source),a.Ab(1),a.ec("ngModel",t.target),a.Ab(4),a.ec("ngModel",t.search),a.Ab(1),a.Cb("active",t.showTime),a.Ab(2),a.Cb("active",t.showMessageId),a.Ab(2),a.Cb("active",t.showContentType),a.Ab(2),a.Cb("active",t.autoScroll))},directives:[g.j,g.d,g.e,g.h,g.c,g.f,g.g,g.i,o.k,g.a],styles:[".console-frame[_ngcontent-%COMP%]{max-width:1400px;flex-direction:column;margin:auto;align-content:stretch;height:calc(100vh - 110px)}.console-frame[_ngcontent-%COMP%], .console-panel[_ngcontent-%COMP%]{display:flex;align-items:stretch}.console-panel[_ngcontent-%COMP%]{flex:0 1 auto;flex-direction:row;align-content:space-between}.console-filter[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 0 12px}.console-filter[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px;line-height:30px}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ccc;margin:0 10px 0 0;height:32px;box-sizing:border-box}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px 8px;line-height:32px}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;border:none;background-color:#444;color:#eee;box-sizing:border-box;padding:6px 12px;margin:0 10px 0 0;height:32px;font-size:12px;font-weight:600;cursor:pointer}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#030303}.console-buttons[_ngcontent-%COMP%]{flex:0 1 auto;padding-top:0}.toggle-button[_ngcontent-%COMP%]{margin:0 4px;border-radius:6px;background-color:#dadada;color:#222;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.toggle-button[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.toggle-button.active[_ngcontent-%COMP%]{background-color:#f0d000;color:#000}.toggle-button[_ngcontent-%COMP%]:hover.active{background-color:#f0e060}.red-button[_ngcontent-%COMP%]{margin:0 0 0 4px;border-radius:6px;background-color:#d01010;color:#fff;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.red-button[_ngcontent-%COMP%]:hover{background-color:#ff3030}.console[_ngcontent-%COMP%]{background-color:#101010;flex:1 1 auto;border-radius:8px;display:flex;flex-direction:column;align-content:stretch;align-items:stretch;overflow:auto;padding:10px 14px;font-family:Ubuntu Mono,monospace}"]}),e})();var p=n("tyNb");let h=(()=>{class e{}return e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({factory:function(t){return new(t||e)},imports:[[o.b,g.b,p.e.forChild([{path:"",component:b}])]]}),e})()}}]);