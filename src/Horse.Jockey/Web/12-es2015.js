(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{FWq7:function(e,t,n){"use strict";n.r(t),n.d(t,"ConsoleModule",(function(){return b}));var o=n("ofXK"),s=n("pLZG"),c=n("HIds"),i=n("5mbK"),r=n("fXoL"),a=n("FuJ8"),l=n("3Pt+");function g(e,t){if(1&e){const e=r.Pb();r.Ob(0,"select",15),r.Wb("ngModelChange",(function(t){return r.fc(e),r.Yb().targetType=t})),r.Ob(1,"option",16),r.jc(2,"Target by Name"),r.Nb(),r.Ob(3,"option",17),r.jc(4,"Target by Topic"),r.Nb(),r.Nb()}if(2&e){const e=r.Yb();r.cc("ngModel",e.targetType)}}function d(e,t){if(1&e){const e=r.Pb();r.Ob(0,"select",15),r.Wb("ngModelChange",(function(t){return r.fc(e),r.Yb().targetType=t})),r.Ob(1,"option",18),r.jc(2,"Target by Id"),r.Nb(),r.Ob(3,"option",16),r.jc(4,"Target by Name"),r.Nb(),r.Ob(5,"option",19),r.jc(6,"Target by Type"),r.Nb(),r.Nb()}if(2&e){const e=r.Yb();r.cc("ngModel",e.targetType)}}let u=(()=>{class e extends c.a{constructor(e){super(),this.socket=e,this.MessageLimit=1e3,this.source="queue",this.targetType="name",this.target="",this.search="",this.showTime=!0,this.showMessageId=!0,this.showContentType=!1,this.autoScroll=!0,this._messages=[],this._datePipe=new o.d("en-US")}ngOnInit(){this.element=document.getElementById("console"),this.on(this.socket.onmessage).pipe(Object(s.a)(e=>e.type==i.a.ConsoleMessage)).subscribe(e=>this.addMessage(e.payload))}ngOnDestroy(){super.ngOnDestroy();let e={requestId:(new Date).getTime().toString(),source:null,targetType:null,target:null};this.socket.send(i.a.ConsoleRequest,e)}toggleTime(){this.showTime=!this.showTime,this.redraw()}toggleMessageId(){this.showMessageId=!this.showMessageId,this.redraw()}toggleContentType(){this.showContentType=!this.showContentType,this.redraw()}toggleAutoScroll(){this.autoScroll=!this.autoScroll}searching(e){this.redraw()}submit(){let e={requestId:(new Date).getTime().toString(),source:this.source,targetType:this.targetType,target:this.target};this.socket.send(i.a.ConsoleRequest,e)}clear(){this._messages=[],this.redraw()}redraw(){let e="";this._messages.forEach(t=>{this.isInFilter(t)&&(e+=this.createMessageHtml(t))}),this.element.innerHTML=e,this.element.scrollTop=this.element.scrollHeight}addMessage(e){this._messages.length>this.MessageLimit+100&&this._messages.splice(0,200),this._messages.push(e),this.isInFilter(e)&&(this.element.append(this.createMessageElement(e)),this.autoScroll&&(this.element.scrollTop=this.element.scrollHeight))}createMessageElement(e){let t=(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p>",n=document.createElement("div");return n.className="citem",n.innerHTML=t,n}createMessageHtml(e){return'<div class="citem">'+(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p></div></div>"}isInFilter(e){return this.search.length<1||e.messageId.includes(this.search)||e.message.includes(this.search)}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(a.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-console"]],features:[r.wb],decls:29,vars:13,consts:[[1,"console-frame"],[1,"console-panel"],[1,"console-filter"],["name","source",3,"ngModel","ngModelChange"],["value","queue","selected",""],["value","router"],["value","direct"],["name","targetType",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","target","placeholder","Type target",3,"ngModel","ngModelChange"],[3,"click"],[1,"console-buttons"],["type","text","name","search","placeholder","Search in messages",3,"ngModel","ngModelChange","input"],[1,"toggle-button",3,"click"],[1,"red-button",3,"click"],["id","console",1,"console"],["name","targetType",3,"ngModel","ngModelChange"],["value","name"],["value","topic"],["value","id"],["value","type"]],template:function(e,t){1&e&&(r.Ob(0,"div",0),r.Ob(1,"div",1),r.Ob(2,"div",2),r.Ob(3,"form"),r.Ob(4,"select",3),r.Wb("ngModelChange",(function(e){return t.source=e})),r.Ob(5,"option",4),r.jc(6,"Queue"),r.Nb(),r.Ob(7,"option",5),r.jc(8,"Router"),r.Nb(),r.Ob(9,"option",6),r.jc(10,"Direct"),r.Nb(),r.Nb(),r.ic(11,g,5,1,"select",7),r.ic(12,d,7,1,"select",7),r.Ob(13,"input",8),r.Wb("ngModelChange",(function(e){return t.target=e})),r.Nb(),r.Ob(14,"button",9),r.Wb("click",(function(){return t.submit()})),r.jc(15,"Apply Filter"),r.Nb(),r.Nb(),r.Nb(),r.Ob(16,"div",10),r.Ob(17,"input",11),r.Wb("ngModelChange",(function(e){return t.search=e}))("input",(function(e){return t.searching(e)})),r.Nb(),r.Ob(18,"span",12),r.Wb("click",(function(){return t.toggleTime()})),r.jc(19,"Time"),r.Nb(),r.Ob(20,"span",12),r.Wb("click",(function(){return t.toggleMessageId()})),r.jc(21,"Message Id"),r.Nb(),r.Ob(22,"span",12),r.Wb("click",(function(){return t.toggleContentType()})),r.jc(23,"Content Type"),r.Nb(),r.Ob(24,"span",12),r.Wb("click",(function(){return t.toggleAutoScroll()})),r.jc(25,"Auto Scroll"),r.Nb(),r.Ob(26,"span",13),r.Wb("click",(function(){return t.clear()})),r.jc(27,"Clear Console"),r.Nb(),r.Nb(),r.Nb(),r.Kb(28,"div",14),r.Nb()),2&e&&(r.zb(4),r.cc("ngModel",t.source),r.zb(7),r.cc("ngIf","queue"==t.source),r.zb(1),r.cc("ngIf","direct"==t.source),r.zb(1),r.cc("ngModel",t.target),r.zb(4),r.cc("ngModel",t.search),r.zb(1),r.Bb("active",t.showTime),r.zb(2),r.Bb("active",t.showMessageId),r.zb(2),r.Bb("active",t.showContentType),r.zb(2),r.Bb("active",t.autoScroll))},directives:[l.j,l.d,l.e,l.h,l.c,l.f,l.g,l.i,o.j,l.a],styles:[".console-frame[_ngcontent-%COMP%]{max-width:1400px;flex-direction:column;margin:auto;align-content:stretch;height:calc(100vh - 110px)}.console-frame[_ngcontent-%COMP%], .console-panel[_ngcontent-%COMP%]{display:flex;align-items:stretch}.console-panel[_ngcontent-%COMP%]{flex:0 1 auto;flex-direction:row;align-content:space-between}.console-filter[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 0 12px}.console-filter[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px;line-height:30px}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ccc;margin:0 10px 0 0;height:32px;box-sizing:border-box}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px 8px;line-height:32px}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;border:none;background-color:#444;color:#eee;box-sizing:border-box;padding:6px 12px;margin:0 10px 0 0;height:32px;font-size:12px;font-weight:600;cursor:pointer}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#030303}.console-buttons[_ngcontent-%COMP%]{flex:0 1 auto;padding-top:0}.toggle-button[_ngcontent-%COMP%]{margin:0 4px;border-radius:6px;background-color:#dadada;color:#222;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.toggle-button[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.toggle-button.active[_ngcontent-%COMP%]{background-color:#f0d000;color:#000}.toggle-button[_ngcontent-%COMP%]:hover.active{background-color:#f0e060}.red-button[_ngcontent-%COMP%]{margin:0 0 0 4px;border-radius:6px;background-color:#d01010;color:#fff;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.red-button[_ngcontent-%COMP%]:hover{background-color:#ff3030}.console[_ngcontent-%COMP%]{background-color:#101010;flex:1 1 auto;border-radius:8px;display:flex;flex-direction:column;align-content:stretch;align-items:stretch;overflow:auto;padding:10px 14px;font-family:Ubuntu Mono,monospace}"]}),e})();var p=n("tyNb");let b=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[o.b,l.b,p.e.forChild([{path:"",component:u}])]]}),e})()}}]);