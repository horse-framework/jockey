import{a as ne}from"./chunk-AALDHFM7.js";import{a as ie}from"./chunk-VHKLBTQQ.js";import{a as E}from"./chunk-6N2XZLSV.js";import"./chunk-DTICWRO3.js";import{a as X,b as Y,c as Z,d as $,e as ee,f as te}from"./chunk-2C4VCG6N.js";import{b as Q,c as L,f as q,h as z,i as G,j as U,k as J,n as K}from"./chunk-NJ67TIRQ.js";import{a as H}from"./chunk-IARL6YQG.js";import{Aa as C,Fa as g,Fb as k,Ga as t,Ha as n,Hb as F,Ma as y,N as I,Pa as h,Pb as j,Qa as u,U as p,V as s,Xa as d,Ya as f,_a as N,ab as _,bb as x,cb as v,d as A,g as V,ia as a,ra as M,ua as w,ub as B,va as R,vb as S,xb as W,y as b,ya as D}from"./chunk-I3ZBIMQN.js";var O=class{router;name;target;priority=0;contentType=null;type;customBindingType;interaction;method};function me(i,m){if(i&1&&(t(0,"option",13),d(1),n()),i&2){let e=m.$implicit;g("ngValue",e.value),a(),f(e.text)}}function ce(i,m){if(i&1){let e=y();t(0,"div",3)(1,"label"),d(2,"Full Binding Type Name (Namespace.TypeName, AssemblyName)"),n(),t(3,"input",14),v("ngModelChange",function(r){p(e);let l=u();return x(l.model.customBindingType,r)||(l.model.customBindingType=r),s(r)}),n()()}if(i&2){let e=u();a(3),_("ngModel",e.model.customBindingType)}}function ge(i,m){if(i&1&&(t(0,"option",13),d(1),n()),i&2){let e=m.$implicit;g("ngValue",e.value),a(),f(e.text)}}function pe(i,m){if(i&1){let e=y();t(0,"div",3)(1,"label"),d(2,"Binding Method"),n(),t(3,"select",15),v("ngModelChange",function(r){p(e);let l=u();return x(l.model.method,r)||(l.model.method=r),s(r)}),C(4,ge,2,2,"option",6),n()()}if(i&2){let e=u();a(3),_("ngModel",e.model.method),a(),g("ngForOf",e.httpMethods)}}function se(i,m){if(i&1&&(t(0,"option",13),d(1),n()),i&2){let e=m.$implicit;g("ngValue",e.value),a(),f(e.text)}}function ue(i,m){if(i&1){let e=y();t(0,"div",3)(1,"label"),d(2,"Binding Method"),n(),t(3,"select",16),v("ngModelChange",function(r){p(e);let l=u();return x(l.model.method,r)||(l.model.method=r),s(r)}),C(4,se,2,2,"option",6),n()()}if(i&2){let e=u();a(3),_("ngModel",e.model.method),a(),g("ngForOf",e.routerMethods)}}function fe(i,m){if(i&1&&(t(0,"option",13),d(1),n()),i&2){let e=m.$implicit;g("ngValue",e.name),a(),N("",e.name," (",e.type,")")}}function _e(i,m){if(i&1){let e=y();t(0,"div",3)(1,"label"),d(2,"Binding Target Queue"),n(),t(3,"select",5),v("ngModelChange",function(r){p(e);let l=u();return x(l.model.target,r)||(l.model.target=r),s(r)}),C(4,fe,2,3,"option",6),n()()}if(i&2){let e=u();a(3),_("ngModel",e.model.target),a(),g("ngForOf",e.queues)}}function xe(i,m){if(i&1){let e=y();t(0,"div",3)(1,"label"),d(2,"Binding Target"),n(),t(3,"input",17),v("ngModelChange",function(r){p(e);let l=u();return x(l.model.target,r)||(l.model.target=r),s(r)}),n()()}if(i&2){let e=u();a(3),_("ngModel",e.model.target)}}function ve(i,m){if(i&1&&(t(0,"option",13),d(1),n()),i&2){let e=m.$implicit;g("ngValue",e.value),a(),f(e.text)}}var P=class i{constructor(m){this.queueService=m}model=new O;bindingTypes=[{value:"QueueBinding",text:"Queue Binding"},{value:"AutoQueueBinding",text:"Auto Queue Binding"},{value:"DynamicQueueBinding",text:"Dynamic Queue Binding"},{value:"TopicBinding",text:"Topic Binding"},{value:"DirectBinding",text:"Direct Binding"},{value:"HttpBinding",text:"Http Binding"},{value:"custom",text:"(Custom Binding)"}];routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different targets"},{value:"Distribute",text:"Distribute: Each message is sent to all targets"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active targets"}];httpMethods=[{value:"Get",text:"GET"},{value:"Post",text:"POST"},{value:"Put",text:"PUT"},{value:"Patch",text:"PATCH"},{value:"Delete",text:"DELETE"}];interactions=[{value:"None",text:"No response interaction"},{value:"Response",text:"Router waits response from that binding"}];_onconfirmed=new V;get onconfirmed(){return this._onconfirmed}_confirmed=!1;queues=[];ngOnInit(){this.queueService.listSummary().subscribe(m=>{this.queues=m.body})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}add(){this._confirmed=!0,this._onconfirmed.next(this.model)}static \u0275fac=function(e){return new(e||i)(M(ne))};static \u0275cmp=w({type:i,selectors:[["app-binding-add-modal"]],standalone:!1,decls:37,vars:12,consts:[["queueForm",""],["mat-dialog-title","",1,"title"],[1,"content"],[1,"form-item"],["placeholder","Binding Name","type","text",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"jockey-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-item",4,"ngIf"],["placeholder","Higher values for higher priority","type","number",1,"jockey-text",3,"ngModelChange","ngModel"],["placeholder","Left blank for router default","type","number",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"],["placeholder","Binding Full Type Name","type","text",1,"jockey-text",3,"ngModelChange","ngModel"],["placeholder","Select an HTTP Method",1,"jockey-select",3,"ngModelChange","ngModel"],["placeholder","Default value is Distribute",1,"jockey-select",3,"ngModelChange","ngModel"],["placeholder","Binding Target","type","text",1,"jockey-text",3,"ngModelChange","ngModel"]],template:function(e,o){if(e&1){let r=y();t(0,"h2",1),d(1,"Add Binding"),n(),t(2,"mat-dialog-content",2)(3,"div",null,0)(5,"div",3)(6,"label"),d(7,"Binding Name"),n(),t(8,"input",4),v("ngModelChange",function(c){return p(r),x(o.model.name,c)||(o.model.name=c),s(c)}),n()(),t(9,"div",3)(10,"label"),d(11,"Binding Type"),n(),t(12,"select",5),v("ngModelChange",function(c){return p(r),x(o.model.type,c)||(o.model.type=c),s(c)}),C(13,me,2,2,"option",6),n()(),C(14,ce,4,1,"div",7)(15,pe,5,2,"div",7)(16,ue,5,2,"div",7)(17,_e,5,2,"div",7)(18,xe,4,1,"div",7),t(19,"div",3)(20,"label"),d(21,"Binding Interaction"),n(),t(22,"select",5),v("ngModelChange",function(c){return p(r),x(o.model.interaction,c)||(o.model.interaction=c),s(c)}),C(23,ve,2,2,"option",6),n()(),t(24,"div",3)(25,"label"),d(26,"Binding Priority"),n(),t(27,"input",8),v("ngModelChange",function(c){return p(r),x(o.model.priority,c)||(o.model.priority=c),s(c)}),n()(),t(28,"div",3)(29,"label"),d(30,"Content Type"),n(),t(31,"input",9),v("ngModelChange",function(c){return p(r),x(o.model.contentType,c)||(o.model.contentType=c),s(c)}),n()()()(),t(32,"mat-dialog-actions",10)(33,"button",11),h("click",function(){return p(r),s(o.add())}),d(34,"Add Binding"),n(),t(35,"button",12),d(36,"Cancel"),n()()}e&2&&(a(8),_("ngModel",o.model.name),a(4),_("ngModel",o.model.type),a(),g("ngForOf",o.bindingTypes),a(),g("ngIf",o.model.type=="custom"),a(),g("ngIf",o.model.type=="HttpBinding"),a(),g("ngIf",o.model.type!="HttpBinding"),a(),g("ngIf",o.model.type=="QueueBinding"),a(),g("ngIf",o.model.type!="QueueBinding"),a(4),_("ngModel",o.model.interaction),a(),g("ngForOf",o.interactions),a(4),_("ngModel",o.model.priority),a(4),_("ngModel",o.model.contentType))},dependencies:[B,S,U,J,Q,z,G,L,q,Y,Z,ee,$],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto;line-height:18px}"]})};function Ce(i,m){if(i&1){let e=y();t(0,"div",12)(1,"div",13),d(2),n(),t(3,"div",13),d(4),n(),t(5,"div",14),d(6),n(),t(7,"div",15),d(8),n(),t(9,"div",15),d(10),n(),t(11,"div",15),d(12),n(),t(13,"div",15)(14,"button",16),h("click",function(){let r=p(e).$implicit,l=u(2);return s(l.removeBinding(r))}),d(15,"Remove"),n()()()}if(i&2){let e=m.$implicit;a(2),f(e.name),a(2),f(e.type),a(2),f(e.target),a(2),f(e.contentType),a(2),f(e.interaction),a(2),f(e.priority)}}function ye(i,m){if(i&1){let e=y();t(0,"div")(1,"div",1)(2,"h2"),d(3),n(),t(4,"div")(5,"small"),d(6),n(),t(7,"span",2),h("click",function(){p(e);let r=u();return s(r.remove())}),d(8,"Delete Router"),n()()(),t(9,"div",3)(10,"div",4)(11,"div",5)(12,"div",6),d(13,"Binding Name"),n(),t(14,"div",6),d(15,"Binding Type"),n(),t(16,"div",7),d(17,"Binding Target"),n(),t(18,"div",8),d(19,"Content Type"),n(),t(20,"div",8),d(21,"Interaction"),n(),t(22,"div",8),d(23,"Priority"),n(),t(24,"div",8),d(25,"Action"),n()(),t(26,"div",9),C(27,Ce,16,6,"div",10),n()()(),t(28,"div",11)(29,"button",2),h("click",function(){p(e);let r=u();return s(r.addBinding())}),d(30,"Add Binding"),n()()()}if(i&2){let e=u();a(3),f(e.model.name),a(3),f(e.model.method),a(21),g("ngForOf",e.model.bindings)}}var T=class i extends H{constructor(e,o,r,l){super();this.routerService=e;this.router=o;this.dialog=r;this.activatedRoute=l}routerName=null;model=null;ngOnInit(){return A(this,null,function*(){this.routerName=this.activatedRoute.snapshot.params.name,this.routerService.get(this.routerName).subscribe(e=>this.model=e.body)})}remove(){let o=this.dialog.open(E,{width:"600px"}).componentInstance;o.message='Router and binding options will be removed belong it but binding targets will not be removed (bonded queues etc). Are you sure to <b class="imp">delete</b> this router and all bindings?',o.onclosed.pipe(b(1)).subscribe(r=>{r&&this.routerService.remove(this.routerName).subscribe(l=>{this.router.navigateByUrl("/routers")})})}addBinding(){let o=this.dialog.open(P,{width:"600px"}).componentInstance;o.model.router=this.routerName,o.onconfirmed.pipe(b(1)).subscribe(r=>{r&&this.routerService.addBinding(r).subscribe(l=>{this.ngOnInit()})})}removeBinding(e){let r=this.dialog.open(E,{width:"600px"}).componentInstance;r.message='Are you sure to <b class="imp">remove</b> this binding from the router?',r.onclosed.pipe(b(1)).subscribe(l=>{l&&this.routerService.removeBinding(this.routerName,e.name).subscribe(c=>this.ngOnInit())})}static \u0275fac=function(o){return new(o||i)(M(ie),M(F),M(X),M(k))};static \u0275cmp=w({type:i,selectors:[["app-router"]],standalone:!1,features:[D],decls:1,vars:1,consts:[[4,"ngIf"],[1,"router-info"],[3,"click"],[1,"bindings"],[1,"table"],[1,"thead"],[1,"th","fx16"],[1,"th","fx28"],[1,"th","fx10"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"add-binding"],[1,"trow"],[1,"td","fx16"],[1,"td","fx28"],[1,"td","fx10"],[1,"remove-binding",3,"click"]],template:function(o,r){o&1&&C(0,ye,31,3,"div",0),o&2&&g("ngIf",r.model)},dependencies:[B,S],styles:[".router-info[_ngcontent-%COMP%]{margin:auto;padding:0 60px 50px;text-align:left;color:#eee}.router-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#fff}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:12px;background-color:#106030;padding:6px 10px;border-radius:2px;font-weight:500;font-size:13px;line-height:20px}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;margin-right:6px;background-color:#c00000;padding:6px 10px;border-radius:2px;font-weight:500;font-size:13px;line-height:20px}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#ff1010}.bindings[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center;color:#eee}.bindings[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.add-binding[_ngcontent-%COMP%]{text-align:center;padding:40px}.add-binding[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.add-binding[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}.remove-binding[_ngcontent-%COMP%]{border:none;border-radius:2px;background-color:#c00000;color:#fafafa;font-size:13px;font-weight:500;padding:8px 12px;cursor:pointer;width:90px}.remove-binding[_ngcontent-%COMP%]:hover{background-color:#ff2020}"]})};var re=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=R({type:i});static \u0275inj=I({imports:[W,K,te,j.forChild([{path:":name",component:T}])]})};export{re as HorseRouterModule};
