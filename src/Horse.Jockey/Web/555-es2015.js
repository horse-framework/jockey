"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[555],{41555:function(e,i,t){t.r(i),t.d(i,{QueueModule:function(){return C}});var u=t(38583),s=t(64762),o=t(6823),n=t.n(o),a=t(43057),d=t(52962),Z=t(68823),q=t(33018),r=t(44139),g=t(59049),l=t(65608),v=t(2625),c=t(68392),p=t(33369);function T(e,i){if(1&e&&(q.TgZ(0,"div",13),q._uU(1),q.ALo(2,"date"),q.qZA()),2&e){const e=q.oxw(2);q.xp6(1),q.Oqu(q.xi3(2,1,1e3*e.queue.stats.lastReceived,"yyyy-MM-dd HH:mm:ss"))}}function A(e,i){1&e&&(q.TgZ(0,"div",13),q._uU(1,"None"),q.qZA())}function m(e,i){if(1&e&&(q.TgZ(0,"div",13),q._uU(1),q.ALo(2,"date"),q.qZA()),2&e){const e=q.oxw(2);q.xp6(1),q.Oqu(q.xi3(2,1,1e3*e.queue.stats.lastSent,"yyyy-MM-dd HH:mm:ss"))}}function h(e,i){1&e&&(q.TgZ(0,"div",13),q._uU(1,"None"),q.qZA())}function f(e,i){if(1&e&&(q.TgZ(0,"div",3),q.TgZ(1,"h3",4),q._uU(2,"Queue Statistics"),q.qZA(),q.TgZ(3,"div",5),q.TgZ(4,"div",10),q.TgZ(5,"div",11),q.TgZ(6,"div",12),q._uU(7,"Published Messages"),q.qZA(),q.TgZ(8,"div",13),q._uU(9),q.qZA(),q.qZA(),q.TgZ(10,"div",11),q.TgZ(11,"div",12),q._uU(12,"Consumed Messages"),q.qZA(),q.TgZ(13,"div",13),q._uU(14),q.qZA(),q.qZA(),q.TgZ(15,"div",11),q.TgZ(16,"div",12),q._uU(17,"Acknowledge Messages"),q.qZA(),q.TgZ(18,"div",13),q._uU(19),q.qZA(),q.qZA(),q.TgZ(20,"div",11),q.TgZ(21,"div",12),q._uU(22,"Total Timed out Messages"),q.qZA(),q.TgZ(23,"div",13),q._uU(24),q.qZA(),q.qZA(),q.TgZ(25,"div",11),q.TgZ(26,"div",12),q._uU(27,"Total Errors"),q.qZA(),q.TgZ(28,"div",13),q._uU(29),q.qZA(),q.qZA(),q.TgZ(30,"div",11),q.TgZ(31,"div",12),q._uU(32,"Last Publish Date"),q.qZA(),q.YNc(33,T,3,4,"div",14),q.YNc(34,A,2,0,"div",14),q.qZA(),q.TgZ(35,"div",11),q.TgZ(36,"div",12),q._uU(37,"Last Consume Date"),q.qZA(),q.YNc(38,m,3,4,"div",14),q.YNc(39,h,2,0,"div",14),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&e){const e=q.oxw();q.xp6(9),q.Oqu(e.queue.stats.totalReceived),q.xp6(5),q.AsE("",e.queue.stats.totalDelivered," consumes, ",e.queue.stats.totalSent," unique msgs"),q.xp6(5),q.lnq("",e.queue.stats.totalAck," ack, ",e.queue.stats.totalNack," nack, ",e.queue.stats.totalUnack," unack"),q.xp6(5),q.Oqu(e.queue.stats.totalTimedout),q.xp6(5),q.Oqu(e.queue.stats.totalErrors),q.xp6(4),q.Q6J("ngIf",e.queue.stats.lastReceived>0),q.xp6(1),q.Q6J("ngIf",0==e.queue.stats.lastReceived),q.xp6(4),q.Q6J("ngIf",e.queue.stats.lastSent>0),q.xp6(1),q.Q6J("ngIf",0==e.queue.stats.lastSent)}}function U(e,i){if(1&e&&(q.TgZ(0,"div",13),q._uU(1),q.qZA()),2&e){const e=q.oxw(2);q.xp6(1),q.hij("",e.queue.info.ackTimeout," ms timeout")}}function _(e,i){1&e&&(q.TgZ(0,"div",13),q._uU(1,"No timeout"),q.qZA())}function x(e,i){1&e&&(q.TgZ(0,"div",13),q._uU(1,"No Timeout"),q.qZA())}function b(e,i){if(1&e&&(q.TgZ(0,"div",13),q._uU(1),q.qZA()),2&e){const e=q.oxw(2);q.xp6(1),q.hij(" ",e.queue.info.msgTimeout," milliseconds ")}}function y(e,i){1&e&&(q.TgZ(0,"div",13),q._uU(1,"No Delay"),q.qZA())}function k(e,i){if(1&e&&(q.TgZ(0,"div",13),q._uU(1),q.qZA()),2&e){const e=q.oxw(2);q.xp6(1),q.hij(" ",e.queue.info.delayBetweenMessages," milliseconds ")}}function R(e,i){1&e&&(q.TgZ(0,"div",13),q._uU(1,"No Delay"),q.qZA())}function w(e,i){if(1&e&&(q.TgZ(0,"div",13),q._uU(1),q.qZA()),2&e){const e=q.oxw(2);q.xp6(1),q.hij(" ",e.queue.info.putBackDelay," milliseconds ")}}function M(e,i){if(1&e&&(q.TgZ(0,"div"),q.TgZ(1,"div",3),q.TgZ(2,"h3",4),q._uU(3,"Queue Actions"),q.qZA(),q.TgZ(4,"div",15),q.TgZ(5,"div"),q.TgZ(6,"p",16),q.TgZ(7,"b"),q._uU(8,"Under construction"),q.qZA(),q._UZ(9,"br"),q._uU(10," Move messages to another queue, Clear messages, Export messages,"),q._UZ(11,"br"),q._uU(12," Remove all subscribers, Pause/Stop/Resume the queue operations, Delete queue,"),q._UZ(13,"br"),q._uU(14," Push new message into the queue, Change some queue options. "),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(15,"div",3),q.TgZ(16,"h3",4),q._uU(17,"Queue Information"),q.qZA(),q.TgZ(18,"div",5),q.TgZ(19,"div",10),q.TgZ(20,"div",11),q.TgZ(21,"div",12),q._uU(22,"Name"),q.qZA(),q.TgZ(23,"div",13),q._uU(24),q.qZA(),q.qZA(),q.TgZ(25,"div",11),q.TgZ(26,"div",12),q._uU(27,"Active Consumers"),q.qZA(),q.TgZ(28,"div",13),q._uU(29),q.qZA(),q.qZA(),q.TgZ(30,"div",11),q.TgZ(31,"div",12),q._uU(32,"Stored Messages"),q.qZA(),q.TgZ(33,"div",13),q._uU(34),q.qZA(),q.qZA(),q._UZ(35,"div",17),q.TgZ(36,"div",11),q.TgZ(37,"div",12),q._uU(38,"Topic"),q.qZA(),q.TgZ(39,"div",13),q._uU(40),q.qZA(),q.qZA(),q.TgZ(41,"div",11),q.TgZ(42,"div",12),q._uU(43,"Type"),q.qZA(),q.TgZ(44,"div",13),q._uU(45),q.qZA(),q.qZA(),q.TgZ(46,"div",11),q.TgZ(47,"div",12),q._uU(48,"Manager"),q.qZA(),q.TgZ(49,"div",13),q._uU(50),q.qZA(),q.qZA(),q.TgZ(51,"div",11),q.TgZ(52,"div",12),q._uU(53,"Subscribers Limit"),q.qZA(),q.TgZ(54,"div",13),q._uU(55),q.ALo(56,"unlimited"),q.qZA(),q.qZA(),q.TgZ(57,"div",11),q.TgZ(58,"div",12),q._uU(59,"Created Date"),q.qZA(),q.TgZ(60,"div",13),q._uU(61),q.ALo(62,"date"),q.qZA(),q.qZA(),q._UZ(63,"div",17),q.TgZ(64,"div",11),q.TgZ(65,"div",12),q._uU(66,"Acknowledge"),q.qZA(),q.TgZ(67,"div",13),q._uU(68),q.qZA(),q.qZA(),q.TgZ(69,"div",11),q.TgZ(70,"div",12),q._uU(71,"Acknowledge Timeout"),q.qZA(),q.YNc(72,U,2,1,"div",14),q.YNc(73,_,2,0,"div",14),q.qZA(),q._UZ(74,"div",17),q.TgZ(75,"div",11),q.TgZ(76,"div",12),q._uU(77,"Message Timeout"),q.qZA(),q.YNc(78,x,2,0,"div",14),q.YNc(79,b,2,1,"div",14),q.qZA(),q.TgZ(80,"div",11),q.TgZ(81,"div",12),q._uU(82,"Message Limit"),q.qZA(),q.TgZ(83,"div",13),q._uU(84),q.ALo(85,"unlimited"),q.qZA(),q.qZA(),q.TgZ(86,"div",11),q.TgZ(87,"div",12),q._uU(88,"Message Size Limit"),q.qZA(),q.TgZ(89,"div",13),q._uU(90),q.ALo(91,"filesize"),q.qZA(),q.qZA(),q._UZ(92,"div",17),q.TgZ(93,"div",11),q.TgZ(94,"div",12),q._uU(95,"Delay Between Messages"),q.qZA(),q.YNc(96,y,2,0,"div",14),q.YNc(97,k,2,1,"div",14),q.qZA(),q.TgZ(98,"div",11),q.TgZ(99,"div",12),q._uU(100,"Put Back Delay"),q.qZA(),q.YNc(101,R,2,0,"div",14),q.YNc(102,w,2,1,"div",14),q.qZA(),q.TgZ(103,"div",11),q.TgZ(104,"div",12),q._uU(105,"Auto Destroy"),q.qZA(),q.TgZ(106,"div",13),q._uU(107),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&e){const e=q.oxw();let i;q.xp6(24),q.Oqu(e.queue.info.name),q.xp6(5),q.Oqu(e.queue.stats.consumers),q.xp6(5),q.Oqu(e.queue.stats.storedMsgs+e.queue.stats.storedPrioMsgs+e.queue.stats.processingMsgs),q.xp6(6),q.Oqu(null!==(i=e.queue.info.topic)&&void 0!==i?i:"-"),q.xp6(5),q.Oqu(e.queue.info.type),q.xp6(5),q.Oqu(e.queue.info.manager),q.xp6(5),q.Oqu(q.lcZ(56,20,e.queue.options.clientLimit)),q.xp6(6),q.Oqu(q.xi3(62,22,1e3*e.queue.info.createdDate,"yyyy-MM-dd HH:mm:ss")),q.xp6(7),q.hij(" ",e.queue.info.acknowledge," "),q.xp6(4),q.Q6J("ngIf",e.queue.info.ackTimeout>0),q.xp6(1),q.Q6J("ngIf",0==e.queue.info.ackTimeout),q.xp6(5),q.Q6J("ngIf",0==e.queue.info.msgTimeout),q.xp6(1),q.Q6J("ngIf",e.queue.info.msgTimeout>0),q.xp6(5),q.hij(" ",q.lcZ(85,25,e.queue.info.messageLimit)," "),q.xp6(6),q.hij(" ",q.lcZ(91,27,e.queue.info.messageSizeLimit)," "),q.xp6(6),q.Q6J("ngIf",0==e.queue.info.delayBetweenMessages),q.xp6(1),q.Q6J("ngIf",e.queue.info.delayBetweenMessages>0),q.xp6(4),q.Q6J("ngIf",0==e.queue.info.putBackDelay),q.xp6(1),q.Q6J("ngIf",e.queue.info.putBackDelay>0),q.xp6(5),q.Oqu(e.queue.info.autoDestroy)}}let N=(()=>{class e extends d.H{constructor(e,i,t,u){super(),this.activatedRoute=e,this.queueGraphService=i,this.socket=t,this.queueService=u}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){if(this.queueName=this.activatedRoute.snapshot.params.name,null==this.queueName||0===this.queueName.length)return;yield this.load();const e={requestId:(new Date).getTime().toString(),name:this.queue.info.name};this.socket.send(Z.S.QueueDetailRequest,e),this.on((0,a.F)(5e3)).subscribe(()=>this.load())})}load(){return(0,s.mG)(this,void 0,void 0,function*(){this.queue=yield this.queueService.get(this.queueName);const e=this.queueGraphService.createLabels(this.queue.graph);this.deliveryChart=new(n())(document.getElementById("queue-delivery-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:{labels:e,datasets:[{label:"Received",borderColor:"#444",data:this.queue.graph.map(e=>e.received),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Delivered",borderColor:"#1070af",data:this.queue.graph.map(e=>e.delivery),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Ack",borderColor:"#10b02a",data:this.queue.graph.map(e=>e.ack),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Neg. Ack",borderColor:"#a020c0",data:this.queue.graph.map(e=>e.nack),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Unack",borderColor:"#999",data:this.queue.graph.map(e=>e.unack),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Error",borderColor:"#ff0000",data:this.queue.graph.map(e=>e.error),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]},options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.storeChart=new(n())(document.getElementById("queue-store-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:{labels:e,datasets:[{label:"Msgs",borderColor:"#104090",data:this.queue.graph.map(e=>e.stored),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"High Prio Msgs",borderColor:"#f07000",data:this.queue.graph.map(e=>e.storedPrio),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Pending for Ack",borderColor:"#aa2080",data:this.queue.graph.map(e=>e.pending),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Timeout",borderColor:"#cc3333",data:this.queue.graph.map(e=>e.timeout),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]},options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}})})}ngOnDestroy(){super.ngOnDestroy();const e={requestId:(new Date).getTime().toString(),name:null};this.socket.send(Z.S.QueueDetailRequest,e)}}return e.\u0275fac=function(i){return new(i||e)(q.Y36(r.gz),q.Y36(g.J),q.Y36(l.i),q.Y36(v.g))},e.\u0275cmp=q.Xpm({type:e,selectors:[["app-queue"]],features:[q.qOj],decls:16,vars:3,consts:[[1,"centered-body",3,"hidden"],[1,"vertical-content"],[1,"vertical-col"],[1,"portlet"],[1,"portlet-title"],[1,"portlet-body"],["id","queue-delivery-chart"],["id","queue-store-chart"],["class","portlet",4,"ngIf"],[4,"ngIf"],[1,"key-value-table"],[1,"kvt-row"],[1,"kvt-key"],[1,"kvt-value"],["class","kvt-value",4,"ngIf"],[1,"portlet-body",2,"height","240px"],[1,"small-desc"],[1,"kvt-row","kvt-seperator"]],template:function(e,i){1&e&&(q.TgZ(0,"div",0),q.TgZ(1,"div",1),q.TgZ(2,"div",2),q.TgZ(3,"div",3),q.TgZ(4,"h3",4),q._uU(5,"Queue Delivery"),q.qZA(),q.TgZ(6,"div",5),q._UZ(7,"canvas",6),q.qZA(),q.qZA(),q.TgZ(8,"div",3),q.TgZ(9,"h3",4),q._uU(10,"Queue Messages"),q.qZA(),q.TgZ(11,"div",5),q._UZ(12,"canvas",7),q.qZA(),q.qZA(),q.YNc(13,f,40,12,"div",8),q.qZA(),q.TgZ(14,"div",2),q.YNc(15,M,108,29,"div",9),q.qZA(),q.qZA(),q.qZA()),2&e&&(q.Q6J("hidden",null==i.queue),q.xp6(13),q.Q6J("ngIf",i.queue),q.xp6(2),q.Q6J("ngIf",i.queue))},directives:[u.O5],pipes:[u.uU,c.O,p.c],styles:[".vertical-col[_ngcontent-%COMP%]   .portlet[_ngcontent-%COMP%]{margin-bottom:18px}"]}),e})();var D=t(91887);let C=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=q.oAB({type:e}),e.\u0275inj=q.cJS({imports:[[u.ez,D.D,r.Bz.forChild([{path:":name",component:N}])]]}),e})()}}]);