"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[394],{1394:(M,c,s)=>{s.r(c),s.d(c,{ClientDetailModule:()=>R});var o=s(6814),r=s(5861),u=s(9519),p=s.n(u),Z=s(3791),h=s(211),v=s(7734),m=s(6124),t=s(8124),l=s(6956),g=s(8054),f=s(9826),T=s(5278);function A(e,a){if(1&e&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17),t._uU(5,"Id"),t.qZA(),t.TgZ(6,"div",18),t._uU(7),t.qZA()(),t.TgZ(8,"div",16)(9,"div",17),t._uU(10,"Name"),t.qZA(),t.TgZ(11,"div",18),t._uU(12),t.qZA()(),t.TgZ(13,"div",16)(14,"div",17),t._uU(15,"Type"),t.qZA(),t.TgZ(16,"div",18),t._uU(17),t.qZA()(),t.TgZ(18,"div",16)(19,"div",17),t._uU(20,"Coonected Time"),t.qZA(),t.TgZ(21,"div",18),t._uU(22),t.ALo(23,"date"),t.qZA()(),t.TgZ(24,"div",16)(25,"div",17),t._uU(26,"Queue Publish"),t.qZA(),t.TgZ(27,"div",18),t._uU(28),t.qZA()(),t.TgZ(29,"div",16)(30,"div",17),t._uU(31,"Channel Publish"),t.qZA(),t.TgZ(32,"div",18),t._uU(33),t.qZA()(),t.TgZ(34,"div",16)(35,"div",17),t._uU(36,"Router Publish"),t.qZA(),t.TgZ(37,"div",18),t._uU(38),t.qZA()(),t.TgZ(39,"div",16)(40,"div",17),t._uU(41,"Direct Send"),t.qZA(),t.TgZ(42,"div",18),t._uU(43),t.qZA()(),t.TgZ(44,"div",16)(45,"div",17),t._uU(46,"Direct Receive"),t.qZA(),t.TgZ(47,"div",18),t._uU(48),t.qZA()(),t.TgZ(49,"div",16)(50,"div",17),t._uU(51,"Cache Get"),t.qZA(),t.TgZ(52,"div",18),t._uU(53),t.qZA()(),t.TgZ(54,"div",16)(55,"div",17),t._uU(56,"Cache Set"),t.qZA(),t.TgZ(57,"div",18),t._uU(58),t.qZA()()()()()),2&e){const i=t.oxw();t.xp6(7),t.Oqu(i.client.id),t.xp6(5),t.Oqu(i.client.name),t.xp6(5),t.Oqu(i.client.type),t.xp6(5),t.Oqu(t.xi3(23,11,1e3*i.client.connectedDate,"yyyy-MM-dd HH:mm:ss")),t.xp6(6),t.Oqu(i.client.stats.queuePush),t.xp6(5),t.Oqu(i.client.stats.channelPublish),t.xp6(5),t.Oqu(i.client.stats.routerPublish),t.xp6(5),t.Oqu(i.client.stats.directSend),t.xp6(5),t.Oqu(i.client.stats.directReceive),t.xp6(5),t.Oqu(i.client.stats.cacheGet),t.xp6(5),t.Oqu(i.client.stats.cacheSet)}}function q(e,a){if(1&e&&(t.TgZ(0,"div",21)(1,"div",22)(2,"span")(3,"a",23),t._uU(4),t.qZA()()(),t.TgZ(5,"div",22)(6,"span"),t._uU(7),t.ALo(8,"date"),t.qZA()()()),2&e){const i=a.$implicit;t.xp6(3),t.MGl("routerLink","/channel/",i.name,""),t.xp6(1),t.Oqu(i.name),t.xp6(3),t.Oqu(t.xi3(8,3,1e3*i.subscribedAt,"yyyy-MM-dd HH:mm:ss"))}}function y(e,a){if(1&e&&(t.TgZ(0,"div",19),t.YNc(1,q,9,6,"div",20),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.client.channels)}}function b(e,a){if(1&e&&(t.TgZ(0,"div",21)(1,"div",22)(2,"span")(3,"a",23),t._uU(4),t.qZA()()(),t.TgZ(5,"div",22)(6,"span"),t._uU(7),t.ALo(8,"date"),t.qZA()()()),2&e){const i=a.$implicit;t.xp6(3),t.MGl("routerLink","/queue/",i.name,""),t.xp6(1),t.Oqu(i.name),t.xp6(3),t.Oqu(t.xi3(8,3,1e3*i.subscribedAt,"yyyy-MM-dd HH:mm:ss"))}}function U(e,a){if(1&e&&(t.TgZ(0,"div",19),t.YNc(1,b,9,6,"div",20),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.client.queues)}}let C=(()=>{class e extends Z.H{constructor(i,d,n,H){super(),this.activatedRoute=i,this.socket=d,this.chartService=n,this.service=H}ngOnInit(){var i=this;return(0,r.Z)(function*(){i.id=i.activatedRoute.snapshot.params.id,yield i.load(),i.subscribeWebsockets()})()}load(){var i=this;return(0,r.Z)(function*(){i.client=yield i.service.get(i.id);let d=yield i.service.getGraph(i.id,"1m");i.clientChart&&i.clientChart.destroy(),i.clientChart=new(p())(document.getElementById("messages-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:{labels:d.labels,datasets:[{label:"Direct Sent",borderColor:"#2070e0",data:d.d.map(n=>n.s),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Received",borderColor:"#f0f010",data:d.d.map(n=>n.r),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Respond",borderColor:"#10cf70",data:d.d.map(n=>n.rs),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct No Receiver",borderColor:"#9a2ef0",data:d.d.map(n=>n.nr),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]},options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}})})()}ngOnDestroy(){super.ngOnDestroy(),this.socket.unsubscribe("client:"+this.id)}subscribeWebsockets(){this.on(this.socket.onmessage).pipe((0,v.h)(i=>i.type==h.S.DirectGraph&&i.payload.n==this.id),(0,v.h)(()=>null!=this.clientChart),(0,m.U)(i=>i.payload)).subscribe(i=>this.chartService.updateChart(this.clientChart,i)),this.socket.subscribe("client:"+this.id,"1m")}static#t=this.\u0275fac=function(d){return new(d||e)(t.Y36(l.gz),t.Y36(g.i),t.Y36(f.C),t.Y36(T.y))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-client-detail"]],features:[t.qOj],decls:38,vars:3,consts:[[1,"centered-body"],[1,"vertical-content"],[1,"dashboard-portlet"],[1,"portlet"],[1,"portlet-title"],[1,"portlet-canvas"],["id","messages-chart"],["class","portlet-body",4,"ngIf"],[1,"portlet-body","table","table-small"],[1,"thead"],[1,"th","fx50"],["class","tbody",4,"ngIf"],[2,"height","80px"],[1,"portlet-body"],[1,"portlet-table","grow","canvas-info"],[1,"key-value-table"],[1,"kvt-row"],[1,"kvt-key"],[1,"kvt-value"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"trow"],[1,"td","fx50"],[3,"routerLink"]],template:function(d,n){1&d&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5,"Direct Messages"),t.qZA(),t.TgZ(6,"div",5),t._UZ(7,"canvas",6),t.qZA()()(),t.TgZ(8,"div",2)(9,"div",3)(10,"h3",4),t._uU(11,"Options & Actions"),t.qZA(),t.YNc(12,A,59,14,"div",7),t.qZA()()()(),t.TgZ(13,"div",0)(14,"div",1)(15,"div",2)(16,"div",3)(17,"h3",4),t._uU(18,"Channels"),t.qZA(),t.TgZ(19,"div",8)(20,"div",9)(21,"div",10),t._uU(22,"Name"),t.qZA(),t.TgZ(23,"div",10),t._uU(24,"Subscribed Date"),t.qZA()(),t.YNc(25,y,2,1,"div",11),t.qZA()()(),t.TgZ(26,"div",2)(27,"div",3)(28,"h3",4),t._uU(29,"Queues"),t.qZA(),t.TgZ(30,"div",8)(31,"div",9)(32,"div",10),t._uU(33,"Name"),t.qZA(),t.TgZ(34,"div",10),t._uU(35,"Subscribed Date"),t.qZA()(),t.YNc(36,U,2,1,"div",11),t.qZA()()()()(),t._UZ(37,"div",12)),2&d&&(t.xp6(12),t.Q6J("ngIf",n.client),t.xp6(13),t.Q6J("ngIf",n.client&&n.client.channels),t.xp6(11),t.Q6J("ngIf",n.client&&n.client.queues))},dependencies:[o.sg,o.O5,l.rH,o.uU]})}return e})();var x=s(658),O=s(9817),D=s(285);let R=(()=>{class e{static#t=this.\u0275fac=function(d){return new(d||e)};static#i=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[o.ez,x.D,O.Is,D.u5,l.Bz.forChild([{path:":id",component:C}])]})}return e})()}}]);