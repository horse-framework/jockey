!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,r=o(e);if(t){var a=o(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return n(this,i)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkweb=self.webpackChunkweb||[]).push([[963],{13963:function(n,o,a){a.r(o),a.d(o,{DashboardModule:function(){return P}});var d=a(38583),s=a(64762),u=a(6823),l=a.n(u),c=a(52962),Z=a(43057),g=a(97966),p=a(33018),v=a(59049),h=a(86176),f=a(65037),q=a(68392),b=a(33369);function T(e,t){if(1&e&&(p.TgZ(0,"div",4),p.TgZ(1,"div",10),p.TgZ(2,"div",11),p.TgZ(3,"div",12),p._uU(4,"Stored Queue Messages"),p.qZA(),p.TgZ(5,"div",13),p._uU(6),p.qZA(),p.qZA(),p.TgZ(7,"div",11),p.TgZ(8,"div",12),p._uU(9,"Published Queue Messages"),p.qZA(),p.TgZ(10,"div",13),p._uU(11),p.qZA(),p.qZA(),p.TgZ(12,"div",11),p.TgZ(13,"div",12),p._uU(14,"Consumed Queue Messages"),p.qZA(),p.TgZ(15,"div",13),p._uU(16),p.qZA(),p.qZA(),p.TgZ(17,"div",11),p.TgZ(18,"div",12),p._uU(19,"Sent Direct Messages"),p.qZA(),p.TgZ(20,"div",13),p._uU(21),p.qZA(),p.qZA(),p.TgZ(22,"div",11),p.TgZ(23,"div",12),p._uU(24,"Delivered Direct Messages"),p.qZA(),p.TgZ(25,"div",13),p._uU(26),p.qZA(),p.qZA(),p.TgZ(27,"div",11),p.TgZ(28,"div",12),p._uU(29,"Direct Responses"),p.qZA(),p.TgZ(30,"div",13),p._uU(31),p.qZA(),p.qZA(),p.TgZ(32,"div",11),p.TgZ(33,"div",12),p._uU(34,"Published Router Messages"),p.qZA(),p.TgZ(35,"div",13),p._uU(36),p.qZA(),p.qZA(),p.TgZ(37,"div",11),p.TgZ(38,"div",12),p._uU(39,"Delivered Router Messages"),p.qZA(),p.TgZ(40,"div",13),p._uU(41),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw(2);p.xp6(6),p.Oqu(i.dashboard.queueMessages.stored+i.dashboard.queueMessages.storedPrio),p.xp6(5),p.Oqu(i.dashboard.queueMessages.received),p.xp6(5),p.Oqu(i.dashboard.queueMessages.delivery),p.xp6(5),p.Oqu(i.dashboard.otherMessages.directMessage),p.xp6(5),p.Oqu(i.dashboard.otherMessages.directDelivery),p.xp6(5),p.Oqu(i.dashboard.otherMessages.directResponse),p.xp6(5),p.Oqu(i.dashboard.otherMessages.routerPublish),p.xp6(5),p.Oqu(i.dashboard.otherMessages.routerOk)}}function A(e,t){if(1&e&&(p.TgZ(0,"div",1),p.TgZ(1,"div",2),p.TgZ(2,"h3",3),p._uU(3,"Message Statistics"),p.qZA(),p.YNc(4,T,42,8,"div",9),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(4),p.Q6J("ngIf",i.dashboard)}}function m(e,t){if(1&e&&(p.TgZ(0,"span"),p._uU(1),p.qZA()),2&e){var i=t.$implicit;p.xp6(1),p.Oqu(i)}}function x(e,t){if(1&e&&(p.TgZ(0,"div",1),p.TgZ(1,"div",2),p.TgZ(2,"h3",3),p._uU(3,"Server Information"),p.qZA(),p.TgZ(4,"div",4),p.TgZ(5,"div",10),p.TgZ(6,"div",11),p.TgZ(7,"div",12),p._uU(8,"Service Lifetime"),p.qZA(),p.TgZ(9,"div",13),p._uU(10),p.qZA(),p.qZA(),p.TgZ(11,"div",11),p.TgZ(12,"div",12),p._uU(13,"Hostname"),p.qZA(),p.TgZ(14,"div",13),p.YNc(15,m,2,1,"span",14),p.qZA(),p.qZA(),p.TgZ(16,"div",11),p.TgZ(17,"div",12),p._uU(18,"Online Clients"),p.qZA(),p.TgZ(19,"div",13),p._uU(20),p.qZA(),p.qZA(),p.TgZ(21,"div",11),p.TgZ(22,"div",15),p._uU(23,"Connected incoming node count. Incoming nodes send the messages they received to this instance."),p.qZA(),p.TgZ(24,"div",12),p._uU(25,"Incoming Nodes"),p.qZA(),p.TgZ(26,"div",13),p._uU(27),p.qZA(),p.qZA(),p.TgZ(28,"div",11),p.TgZ(29,"div",15),p._uU(30,"Connected outgoing node count. When a message is received, it's sent to outgoing nodes."),p.qZA(),p.TgZ(31,"div",12),p._uU(32,"Outgoing Nodes"),p.qZA(),p.TgZ(33,"div",13),p._uU(34),p.qZA(),p.qZA(),p.TgZ(35,"div",11),p.TgZ(36,"div",12),p._uU(37,"Max Queue Limit"),p.qZA(),p.TgZ(38,"div",13),p._uU(39),p.ALo(40,"unlimited"),p.qZA(),p.qZA(),p.TgZ(41,"div",11),p.TgZ(42,"div",12),p._uU(43,"Max Router Limit"),p.qZA(),p.TgZ(44,"div",13),p._uU(45),p.ALo(46,"unlimited"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(10),p.Oqu(i.lifetime),p.xp6(5),p.Q6J("ngForOf",i.dashboard.server.hosts),p.xp6(5),p.Oqu(i.dashboard.server.onlineClients),p.xp6(7),p.Oqu(i.dashboard.server.incomingNodes),p.xp6(7),p.Oqu(i.dashboard.server.outgoingNodes),p.xp6(5),p.Oqu(p.lcZ(40,7,i.dashboard.serverOptions.queueLimit)),p.xp6(6),p.Oqu(p.lcZ(46,9,i.dashboard.serverOptions.routerLimit))}}function y(e,t){if(1&e&&(p.TgZ(0,"em"),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.hij("(",i.dashboard.queueOptions.ackTimeout," ms timeout)")}}function _(e,t){1&e&&(p.TgZ(0,"div",13),p._uU(1,"No Timeout"),p.qZA())}function O(e,t){if(1&e&&(p.TgZ(0,"div",13),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.hij(" ",i.dashboard.queueOptions.msgTimeout," milliseconds ")}}function U(e,t){1&e&&(p.TgZ(0,"div",13),p._uU(1,"No Delay"),p.qZA())}function R(e,t){if(1&e&&(p.TgZ(0,"div",13),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.hij(" ",i.dashboard.queueOptions.delayBetweenMsgs," milliseconds ")}}function w(e,t){1&e&&(p.TgZ(0,"div",13),p._uU(1,"No Delay"),p.qZA())}function C(e,t){if(1&e&&(p.TgZ(0,"div",13),p._uU(1),p.qZA()),2&e){var i=p.oxw(2);p.xp6(1),p.hij(" ",i.dashboard.queueOptions.putbackDelay," milliseconds ")}}function k(e,t){if(1&e&&(p.TgZ(0,"div",1),p.TgZ(1,"div",2),p.TgZ(2,"h3",3),p._uU(3,"Default Queue Options"),p.qZA(),p.TgZ(4,"div",4),p.TgZ(5,"div",10),p.TgZ(6,"div",11),p.TgZ(7,"div",12),p._uU(8,"Type"),p.qZA(),p.TgZ(9,"div",13),p._uU(10),p.qZA(),p.qZA(),p.TgZ(11,"div",11),p.TgZ(12,"div",12),p._uU(13,"Acknowledge"),p.qZA(),p.TgZ(14,"div",13),p._uU(15),p.YNc(16,y,2,1,"em",16),p.qZA(),p.qZA(),p.TgZ(17,"div",11),p.TgZ(18,"div",12),p._uU(19,"Message Timeout"),p.qZA(),p.YNc(20,_,2,0,"div",17),p.YNc(21,O,2,1,"div",17),p.qZA(),p.TgZ(22,"div",11),p.TgZ(23,"div",12),p._uU(24,"Message Limit"),p.qZA(),p.TgZ(25,"div",13),p._uU(26),p.ALo(27,"unlimited"),p.TgZ(28,"em"),p._uU(29),p.ALo(30,"filesize"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(31,"div",11),p.TgZ(32,"div",12),p._uU(33,"Subscribers Limit"),p.qZA(),p.TgZ(34,"div",13),p._uU(35),p.ALo(36,"unlimited"),p.qZA(),p.qZA(),p.TgZ(37,"div",11),p.TgZ(38,"div",12),p._uU(39,"Delay Between Messages"),p.qZA(),p.YNc(40,U,2,0,"div",17),p.YNc(41,R,2,1,"div",17),p.qZA(),p.TgZ(42,"div",11),p.TgZ(43,"div",12),p._uU(44,"Put Back Delay"),p.qZA(),p.YNc(45,w,2,0,"div",17),p.YNc(46,C,2,1,"div",17),p.qZA(),p.TgZ(47,"div",11),p.TgZ(48,"div",12),p._uU(49,"Auto Creation"),p.qZA(),p.TgZ(50,"div",13),p._uU(51),p.qZA(),p.qZA(),p.TgZ(52,"div",11),p.TgZ(53,"div",12),p._uU(54,"Auto Destroy"),p.qZA(),p.TgZ(55,"div",13),p._uU(56),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e){var i=p.oxw();p.xp6(10),p.Oqu(i.dashboard.queueOptions.type),p.xp6(5),p.hij(" ",i.dashboard.queueOptions.ack," "),p.xp6(1),p.Q6J("ngIf",i.dashboard.queueOptions.ackTimeout>0),p.xp6(4),p.Q6J("ngIf",0==i.dashboard.queueOptions.msgTimeout),p.xp6(1),p.Q6J("ngIf",i.dashboard.queueOptions.msgTimeout>0),p.xp6(5),p.hij(" ",p.lcZ(27,14,i.dashboard.queueOptions.msgLimit)," "),p.xp6(3),p.hij("(Size Limit: ",p.lcZ(30,16,i.dashboard.queueOptions.msgSizeLimit),")"),p.xp6(6),p.Oqu(p.lcZ(36,18,i.dashboard.queueOptions.clientLimit)),p.xp6(5),p.Q6J("ngIf",0==i.dashboard.queueOptions.delayBetweenMsgs),p.xp6(1),p.Q6J("ngIf",i.dashboard.queueOptions.delayBetweenMsgs>0),p.xp6(4),p.Q6J("ngIf",0==i.dashboard.queueOptions.putbackDelay),p.xp6(1),p.Q6J("ngIf",i.dashboard.queueOptions.putbackDelay>0),p.xp6(5),p.Oqu(i.dashboard.queueOptions.autoQueueCreation),p.xp6(5),p.Oqu(i.dashboard.queueOptions.autoDestroy)}}var M,D=((M=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,n);var o,a,d,u=r(c);function c(t,i,r){var n;return e(this,c),(n=u.call(this)).queueGraphService=t,n.messageGraphService=i,n.dashboardService=r,n.deliveryChart=null,n.msgChart=null,n.storeChart=null,n}return o=c,(a=[{key:"ngOnInit",value:function(){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:this.on((0,Z.F)(5e3)).subscribe(function(){return(0,s.mG)(t,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardService.load().then(function(e){return t.dashboard=e}),e.next=3,this.loadCharts();case 3:case"end":return e.stop()}},e,this)}))});case 3:case"end":return e.stop()}},e,this)}))}},{key:"load",value:function(){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardService.load().then(function(e){return i.dashboard=e}),e.next=3,this.loadCharts();case 3:t=new g.c,this.on((0,Z.F)(1e3)).subscribe(function(){if(i.dashboard){var e=(new Date).getTime()/1e3;i.lifetime=t.transform(e,i.dashboard.server.startedDate)}});case 5:case"end":return e.stop()}},e,this)}))}},{key:"loadCharts",value:function(){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queueGraphService.load();case 2:return t=e.sent,e.next=5,this.messageGraphService.load();case 5:i=e.sent,this.deliveryChart=new(l())(document.getElementById("delivery-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getDeliveryChartData(t),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.storeChart=new(l())(document.getElementById("store-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getStoreChartData(t),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.msgChart=new(l())(document.getElementById("msg-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getMessageChartData(i),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}});case 7:case"end":return e.stop()}},e,this)}))}},{key:"getDeliveryChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Received",borderColor:"#444",data:e.data.map(function(e){return e.received}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Delivered",borderColor:"#1070af",data:e.data.map(function(e){return e.delivery}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Ack",borderColor:"#10b02a",data:e.data.map(function(e){return e.ack}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Neg. Ack",borderColor:"#a020c0",data:e.data.map(function(e){return e.nack}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Unack",borderColor:"#999",data:e.data.map(function(e){return e.unack}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Error",borderColor:"#ff0000",data:e.data.map(function(e){return e.error}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}},{key:"getStoreChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Msgs",borderColor:"#104090",data:e.data.map(function(e){return e.stored}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"High Prio Msgs",borderColor:"#f07000",data:e.data.map(function(e){return e.storedPrio}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Pending for Ack",borderColor:"#aa2080",data:e.data.map(function(e){return e.pending}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Timeout",borderColor:"#cc3333",data:e.data.map(function(e){return e.timeout}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}},{key:"getMessageChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Direct Sent",borderColor:"#1070c0",data:e.data.map(function(e){return e.directMessage}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Response",borderColor:"#907010",data:e.data.map(function(e){return e.directResponse}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Delivery",borderColor:"#10a050",data:e.data.map(function(e){return e.directDelivery}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct No Receiver",borderColor:"#8010e0",data:e.data.map(function(e){return e.directNoReceiver}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Publish",borderColor:"#606090",data:e.data.map(function(e){return e.routerPublish}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Received",borderColor:"#20caca",data:e.data.map(function(e){return e.routerOk}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router No Receiver",borderColor:"#e02255",data:e.data.map(function(e){return e.routerFailed}),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}}])&&t(o.prototype,a),d&&t(o,d),c}(c.H)).\u0275fac=function(e){return new(e||M)(p.Y36(v.J),p.Y36(h.f),p.Y36(f.s))},M.\u0275cmp=p.Xpm({type:M,selectors:[["app-dashboard"]],features:[p.qOj],decls:22,vars:4,consts:[[1,"dashboard",3,"hidden"],[1,"dashboard-portlet"],[1,"portlet"],[1,"portlet-title"],[1,"portlet-body"],["id","store-chart"],["class","dashboard-portlet",4,"ngIf"],["id","delivery-chart"],["id","msg-chart"],["class","portlet-body",4,"ngIf"],[1,"key-value-table"],[1,"kvt-row"],[1,"kvt-key"],[1,"kvt-value"],[4,"ngFor","ngForOf"],[1,"kvt-info"],[4,"ngIf"],["class","kvt-value",4,"ngIf"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"h3",3),p._uU(4,"Stored Messages"),p.qZA(),p.TgZ(5,"div",4),p._UZ(6,"canvas",5),p.qZA(),p.qZA(),p.qZA(),p.YNc(7,A,5,1,"div",6),p.TgZ(8,"div",1),p.TgZ(9,"div",2),p.TgZ(10,"h3",3),p._uU(11,"Queue Messages and Deliveries"),p.qZA(),p.TgZ(12,"div",4),p._UZ(13,"canvas",7),p.qZA(),p.qZA(),p.qZA(),p.YNc(14,x,47,11,"div",6),p.TgZ(15,"div",1),p.TgZ(16,"div",2),p.TgZ(17,"h3",3),p._uU(18,"Direct and Route Messages and Deliveries"),p.qZA(),p.TgZ(19,"div",4),p._UZ(20,"canvas",8),p.qZA(),p.qZA(),p.qZA(),p.YNc(21,k,57,20,"div",6),p.qZA()),2&e&&(p.Q6J("hidden",null==t.dashboard),p.xp6(7),p.Q6J("ngIf",t.dashboard),p.xp6(7),p.Q6J("ngIf",t.dashboard),p.xp6(7),p.Q6J("ngIf",t.dashboard))},directives:[d.O5,d.sg],pipes:[q.O,b.c],styles:[".dashboard[_ngcontent-%COMP%]{min-width:380px;max-width:1270px;width:70%;margin:auto;display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start;flex-wrap:wrap;padding-bottom:50px}.dashboard-portlet[_ngcontent-%COMP%]{flex:0 1 50%}.dashboard-portlet.wide[_ngcontent-%COMP%]{flex:0 1 100%!important}.dashboard-portlet[_ngcontent-%COMP%]   .portlet-body[_ngcontent-%COMP%]{height:400px}"]}),M),N=a(44139),I=a(91887),P=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[d.ez,I.D,N.Bz.forChild([{path:"",component:D}])]]}),t}()}}])}();