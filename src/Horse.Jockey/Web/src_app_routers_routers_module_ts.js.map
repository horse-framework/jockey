{"version":3,"file":"src_app_routers_routers_module_ts.js","mappings":"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","sources":["./src/app/routers/router-create-modal/router-create-modal.component.ts","./src/app/routers/router-create-modal/router-create-modal.component.html","./src/app/routers/routers.component.ts","./src/app/routers/routers.component.html","./src/app/routers/routers.module.ts","./src/models/create-router-model.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { CreateRouterModel } from 'src/models/create-router-model';\n\n@Component({\n  selector: 'app-router-create-modal',\n  templateUrl: './router-create-modal.component.html',\n  styleUrls: ['./router-create-modal.component.css']\n})\nexport class RouterCreateModalComponent implements OnInit, OnDestroy {\n\n  model: CreateRouterModel = new CreateRouterModel();\n\n  routerMethods = [\n    { value: 'RoundRobin', text: 'Round Robin: Each message is redirected different binding' },\n    { value: 'Distribute', text: 'Distribute: Each message is sent to all bindings' },\n    { value: 'OnlyFirst', text: 'Only First: Each message is redirected to only first active binding' }\n  ];\n\n  private _onconfirmed: Subject<CreateRouterModel> = new Subject<CreateRouterModel>();\n  get onconfirmed(): Observable<CreateRouterModel> { return this._onconfirmed; }\n  private _confirmed: boolean = false;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    if (!this._confirmed)\n      this._onconfirmed.next(null);\n  }\n\n  create() {\n    this._confirmed = true;\n    this._onconfirmed.next(this.model);\n  }\n\n}\n","<h2 class=\"title\" mat-dialog-title>Create New Router</h2>\n<mat-dialog-content class=\"content\">\n    <div #queueForm class=\"router-form scroll\">\n        <div class=\"form-item\">\n            <label>Router Name</label>\n            <input placeholder=\"Router Name\" class=\"jockey-text\" type=\"text\" [(ngModel)]=\"model.name\" />\n        </div>\n        <div class=\"form-item\">\n            <label>Router Method</label>\n            <select [(ngModel)]=\"model.method\" class=\"jockey-select\">\n                <option [ngValue]=\"m.value\" *ngFor=\"let m of routerMethods\">{{m.text}}</option>\n            </select>\n        </div>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions class=\"buttons\">\n    <button (click)=\"create()\" mat-button mat-dialog-close class=\"modal-btn btn-green\">Create Router</button>\n    <button mat-button mat-dialog-close class=\"modal-btn btn-grey\">Cancel</button>\n</mat-dialog-actions>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { take } from 'rxjs/operators';\r\nimport { BaseComponent } from 'src/lib/base-component';\r\nimport { HorseRouter } from 'src/models/horse-router';\r\nimport { HorseRouterService } from 'src/services/horse-router.service';\r\nimport { RouterCreateModalComponent } from './router-create-modal/router-create-modal.component';\r\n\r\n@Component({\r\n    selector: 'app-routes',\r\n    templateUrl: './routers.component.html',\r\n    styleUrls: ['./routers.component.css']\r\n})\r\nexport class RoutersComponent extends BaseComponent implements OnInit {\r\n\r\n    routers: HorseRouter[];\r\n\r\n    constructor(private routerService: HorseRouterService, private dialog: MatDialog) {\r\n        super();\r\n    }\r\n\r\n    async ngOnInit() {\r\n        let routers = await this.routerService.list();\r\n\r\n        routers.forEach(x => {\r\n            x.bindings.forEach(b => {\r\n                if (b.target.startsWith('@'))\r\n                    b.displayTarget = b.target.substr(b.target.indexOf(':') + 1);\r\n                else\r\n                    b.displayTarget = b.target;\r\n            });\r\n        });\r\n\r\n        this.routers = routers;\r\n    }\r\n\r\n    create(): void {\r\n        let dialogRef = this.dialog.open(RouterCreateModalComponent, { width: '600px' });\r\n        let component = <RouterCreateModalComponent>dialogRef.componentInstance;\r\n        component.onconfirmed\r\n            .pipe(take(1))\r\n            .subscribe(value => {\r\n                if (value)\r\n                    this.routerService\r\n                        .create(value)\r\n                        .then(msg => {\r\n                            this.ngOnInit();\r\n                        });\r\n            });\r\n    }\r\n}\r\n","<div class=\"routers\" *ngIf=\"routers\">\r\n    <div class=\"table\">\r\n        <div class=\"thead\">\r\n            <div class=\"th fx40px\">\r\n                <a class=\"fa fa-solid fa-plus hreverse\" (click)=\"create()\" title=\"Create New Router\"></a>\r\n            </div>\r\n            <div class=\"th fx20\">\r\n                Router\r\n                <em>({{routers.length}} Routers)</em>\r\n            </div>\r\n            <div class=\"th fx14\">Binding Name</div>\r\n            <div class=\"th fx10\">Binding Type</div>\r\n            <div class=\"th fx28\">Binding Target</div>\r\n            <div class=\"th fx10\">Content Type</div>\r\n            <div class=\"th fx10\">Interaction</div>\r\n            <div class=\"th fx8\">Priority</div>\r\n        </div>\r\n        <div class=\"tbody\">\r\n            <ng-container *ngFor=\"let router of routers\">\r\n                <div class=\"td fx40px\"></div>\r\n                <div *ngFor=\"let binding of router.bindings; let i = index\" class=\"trow\" [class.first-row]=\"i == 0\"\r\n                     [class.last-row]=\"i == router.bindings.length - 1\">\r\n                    <div class=\"td td-fr fx20\">\r\n                        <ng-container *ngIf=\"i == 0\">\r\n                            <i [class.green]=\"router.enabled\" [class.red]=\"!router.enabled\"></i>\r\n                            <a style=\"margin-right: 18px; font-weight: 500; line-height: 23px; font-size: 14px;\"\r\n                               routerLink=\"/router/{{router.name}}\">\r\n                                {{router.name}}\r\n                            </a>\r\n                            <small>{{router.method}}</small>\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"td fx14\"><span>{{binding.name}}</span></div>\r\n                    <div class=\"td fx10\"><span>{{binding.type}}</span></div>\r\n                    <div class=\"td td-fr fx28\">\r\n                        <small>{{binding | bindingType}}</small>\r\n                        <span>{{binding.displayTarget}}</span>\r\n                    </div>\r\n                    <div class=\"td fx10\"><span *ngIf=\"binding.type == 'Direct'\">{{binding.contentType}}</span></div>\r\n                    <div class=\"td fx10\"><span>{{binding.interaction}}</span></div>\r\n                    <div class=\"td fx8\"><span>{{binding.priority}}</span></div>\r\n                </div>\r\n                <div *ngIf=\"router.bindings.length == 0\" class=\"trow\">\r\n                    <div class=\"td td-fr fx20\">\r\n                        <i [class.green]=\"router.enabled\" [class.red]=\"!router.enabled\"></i>\r\n                        <a style=\"margin-right: 18px; font-weight: 500; line-height: 23px; font-size: 14px;\"\r\n                           routerLink=\"/router/{{router.name}}\">\r\n                            {{router.name}}\r\n                        </a>\r\n                        <small>{{router.method}}</small>\r\n                    </div>\r\n                    <div class=\"td fx14\"><span></span></div>\r\n                    <div class=\"td fx10\"><span></span></div>\r\n                    <div class=\"td td-fr fx28\"></div>\r\n                    <div class=\"td fx10\"></div>\r\n                    <div class=\"td fx10\"></div>\r\n                    <div class=\"td fx8\"></div>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n    <div class=\"create-end\">\r\n        <button (click)=\"create()\">Create New Router</button>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RoutersComponent } from './routers.component';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PipesModule } from '../layout/pipes/pipes.module';\r\nimport { RouterCreateModalComponent } from './router-create-modal/router-create-modal.component';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n\r\n@NgModule({\r\n  declarations: [RoutersComponent, RouterCreateModalComponent],\r\n  imports: [\r\n    CommonModule,\r\n    PipesModule,\r\n    MatDialogModule,\r\n    FormsModule,\r\n    RouterModule.forChild([{ path: '', component: RoutersComponent }])\r\n  ]\r\n})\r\nexport class RoutersModule { }\r\n","\r\nexport class CreateRouterModel {\r\n    name: string;\r\n    method: 'RoundRobin' | 'Distribute' | 'OnlyFirst';\r\n}"],"names":[],"sourceRoot":"webpack:///"}