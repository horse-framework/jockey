"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[890],{22890:function(e,n,t){t.r(n),t.d(n,{HorseRouterModule:function(){return w}});var o=t(38583),i=t(64762),r=t(15257),d=t(52962),g=t(78782),c=t(79765);class l{constructor(){this.priority=0,this.contentType=null}}var u=t(33018),a=t(2625),s=t(71636),p=t(90665);function f(e,n){if(1&e&&(u.TgZ(0,"option",13),u._uU(1),u.qZA()),2&e){const e=n.$implicit;u.Q6J("ngValue",e.value),u.xp6(1),u.Oqu(e.text)}}function m(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div",3),u.TgZ(1,"label"),u._uU(2,"Full Binding Type Name (Namespace.TypeName, AssemblyName)"),u.qZA(),u.TgZ(3,"input",14),u.NdJ("ngModelChange",function(n){return u.CHM(e),u.oxw().model.customBindingType=n}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.model.customBindingType)}}function x(e,n){if(1&e&&(u.TgZ(0,"option",13),u._uU(1),u.qZA()),2&e){const e=n.$implicit;u.Q6J("ngValue",e.value),u.xp6(1),u.Oqu(e.text)}}function h(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div",3),u.TgZ(1,"label"),u._uU(2,"Binding Method"),u.qZA(),u.TgZ(3,"select",15),u.NdJ("ngModelChange",function(n){return u.CHM(e),u.oxw().model.method=n}),u.YNc(4,x,2,2,"option",6),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.model.method),u.xp6(1),u.Q6J("ngForOf",e.httpMethods)}}function Z(e,n){if(1&e&&(u.TgZ(0,"option",13),u._uU(1),u.qZA()),2&e){const e=n.$implicit;u.Q6J("ngValue",e.value),u.xp6(1),u.Oqu(e.text)}}function b(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div",3),u.TgZ(1,"label"),u._uU(2,"Binding Method"),u.qZA(),u.TgZ(3,"select",16),u.NdJ("ngModelChange",function(n){return u.CHM(e),u.oxw().model.method=n}),u.YNc(4,Z,2,2,"option",6),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.model.method),u.xp6(1),u.Q6J("ngForOf",e.routerMethods)}}function v(e,n){if(1&e&&(u.TgZ(0,"option",13),u._uU(1),u.qZA()),2&e){const e=n.$implicit;u.Q6J("ngValue",e.name),u.xp6(1),u.AsE("",e.name," (",e.type,")")}}function T(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div",3),u.TgZ(1,"label"),u._uU(2,"Binding Target Queue"),u.qZA(),u.TgZ(3,"select",5),u.NdJ("ngModelChange",function(n){return u.CHM(e),u.oxw().model.target=n}),u.YNc(4,v,2,3,"option",6),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.model.target),u.xp6(1),u.Q6J("ngForOf",e.queues)}}function M(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div",3),u.TgZ(1,"label"),u._uU(2,"Binding Target"),u.qZA(),u.TgZ(3,"input",17),u.NdJ("ngModelChange",function(n){return u.CHM(e),u.oxw().model.target=n}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("ngModel",e.model.target)}}function q(e,n){if(1&e&&(u.TgZ(0,"option",13),u._uU(1),u.qZA()),2&e){const e=n.$implicit;u.Q6J("ngValue",e.value),u.xp6(1),u.Oqu(e.text)}}let _=(()=>{class e{constructor(e){this.queueService=e,this.model=new l,this.bindingTypes=[{value:"QueueBinding",text:"Queue Binding"},{value:"AutoQueueBinding",text:"Auto Queue Binding"},{value:"DynamicQueueBinding",text:"Dynamic Queue Binding"},{value:"TopicBinding",text:"Topic Binding"},{value:"DirectBinding",text:"Direct Binding"},{value:"HttpBinding",text:"Http Binding"},{value:"custom",text:"(Custom Binding)"}],this.routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different targets"},{value:"Distribute",text:"Distribute: Each message is sent to all targets"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active targets"}],this.httpMethods=[{value:"Get",text:"GET"},{value:"Post",text:"POST"},{value:"Put",text:"PUT"},{value:"Patch",text:"PATCH"},{value:"Delete",text:"DELETE"}],this.interactions=[{value:"None",text:"No response interaction"},{value:"Response",text:"Router waits response from that binding"}],this._onconfirmed=new c.xQ,this._confirmed=!1}get onconfirmed(){return this._onconfirmed}ngOnInit(){this.queueService.listSummary().then(e=>{this.queues=e})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}add(){this._confirmed=!0,this._onconfirmed.next(this.model)}}return e.\u0275fac=function(n){return new(n||e)(u.Y36(a.g))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-binding-add-modal"]],decls:37,vars:12,consts:[["mat-dialog-title","",1,"title"],[1,"content"],["queueForm",""],[1,"form-item"],["placeholder","Binding Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-item",4,"ngIf"],["placeholder","Higher values for higher priority","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Left blank for router default","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-confirm",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-cancel"],[3,"ngValue"],["placeholder","Binding Full Type Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Select an HTTP Method",1,"jockey-select",3,"ngModel","ngModelChange"],["placeholder","Default value is Distribute",1,"jockey-select",3,"ngModel","ngModelChange"],["placeholder","Binding Target","type","text",1,"jockey-text",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(u.TgZ(0,"h2",0),u._uU(1,"Add Binding"),u.qZA(),u.TgZ(2,"mat-dialog-content",1),u.TgZ(3,"div",null,2),u.TgZ(5,"div",3),u.TgZ(6,"label"),u._uU(7,"Binding Name"),u.qZA(),u.TgZ(8,"input",4),u.NdJ("ngModelChange",function(e){return n.model.name=e}),u.qZA(),u.qZA(),u.TgZ(9,"div",3),u.TgZ(10,"label"),u._uU(11,"Binding Type"),u.qZA(),u.TgZ(12,"select",5),u.NdJ("ngModelChange",function(e){return n.model.type=e}),u.YNc(13,f,2,2,"option",6),u.qZA(),u.qZA(),u.YNc(14,m,4,1,"div",7),u.YNc(15,h,5,2,"div",7),u.YNc(16,b,5,2,"div",7),u.YNc(17,T,5,2,"div",7),u.YNc(18,M,4,1,"div",7),u.TgZ(19,"div",3),u.TgZ(20,"label"),u._uU(21,"Binding Interaction"),u.qZA(),u.TgZ(22,"select",5),u.NdJ("ngModelChange",function(e){return n.model.interaction=e}),u.YNc(23,q,2,2,"option",6),u.qZA(),u.qZA(),u.TgZ(24,"div",3),u.TgZ(25,"label"),u._uU(26,"Binding Priority"),u.qZA(),u.TgZ(27,"input",8),u.NdJ("ngModelChange",function(e){return n.model.priority=e}),u.qZA(),u.qZA(),u.TgZ(28,"div",3),u.TgZ(29,"label"),u._uU(30,"Content Type"),u.qZA(),u.TgZ(31,"input",9),u.NdJ("ngModelChange",function(e){return n.model.contentType=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"mat-dialog-actions",10),u.TgZ(33,"button",11),u.NdJ("click",function(){return n.add()}),u._uU(34,"Add Binding"),u.qZA(),u.TgZ(35,"button",12),u._uU(36,"Cancel"),u.qZA(),u.qZA()),2&e&&(u.xp6(8),u.Q6J("ngModel",n.model.name),u.xp6(4),u.Q6J("ngModel",n.model.type),u.xp6(1),u.Q6J("ngForOf",n.bindingTypes),u.xp6(1),u.Q6J("ngIf","custom"==n.model.type),u.xp6(1),u.Q6J("ngIf","HttpBinding"==n.model.type),u.xp6(1),u.Q6J("ngIf","HttpBinding"!=n.model.type),u.xp6(1),u.Q6J("ngIf","QueueBinding"==n.model.type),u.xp6(1),u.Q6J("ngIf","QueueBinding"!=n.model.type),u.xp6(4),u.Q6J("ngModel",n.model.interaction),u.xp6(1),u.Q6J("ngForOf",n.interactions),u.xp6(4),u.Q6J("ngModel",n.model.priority),u.xp6(4),u.Q6J("ngModel",n.model.contentType))},directives:[s.uh,s.xY,p.Fj,p.JJ,p.On,p.EJ,o.sg,o.O5,p.wV,s.H8,s.ZT,p.YN,p.Kr],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:flex-start;align-content:flex-start;padding:15px 0}.modal-btn[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid;border-radius:2px;background-color:transparent;font-weight:500;font-size:14px;color:#f0f0f0;margin-left:16px}.btn-cancel[_ngcontent-%COMP%]{border-color:#777}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:#999}.btn-confirm[_ngcontent-%COMP%]{border-color:#10a040}.btn-confirm[_ngcontent-%COMP%]:hover{border-color:#10d060}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto;line-height:18px}"]}),e})();var A=t(71632),C=t(72667);function O(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div",12),u.TgZ(1,"div",13),u._uU(2),u.qZA(),u.TgZ(3,"div",13),u._uU(4),u.qZA(),u.TgZ(5,"div",14),u._uU(6),u.qZA(),u.TgZ(7,"div",15),u._uU(8),u.qZA(),u.TgZ(9,"div",15),u._uU(10),u.qZA(),u.TgZ(11,"div",15),u._uU(12),u.qZA(),u.TgZ(13,"div",15),u.TgZ(14,"button",16),u.NdJ("click",function(){const n=u.CHM(e).$implicit;return u.oxw(2).removeBinding(n)}),u._uU(15,"Remove"),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=n.$implicit;u.xp6(2),u.Oqu(e.name),u.xp6(2),u.Oqu(e.type),u.xp6(2),u.Oqu(e.target),u.xp6(2),u.Oqu(e.contentType),u.xp6(2),u.Oqu(e.interaction),u.xp6(2),u.Oqu(e.priority)}}function y(e,n){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",1),u.TgZ(2,"h2"),u._uU(3),u.qZA(),u.TgZ(4,"div"),u.TgZ(5,"small"),u._uU(6),u.qZA(),u.TgZ(7,"span",2),u.NdJ("click",function(){return u.CHM(e),u.oxw().remove()}),u._uU(8,"Delete Router"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",3),u.TgZ(10,"div",4),u.TgZ(11,"div",5),u.TgZ(12,"div",6),u._uU(13,"Binding Name"),u.qZA(),u.TgZ(14,"div",6),u._uU(15,"Binding Type"),u.qZA(),u.TgZ(16,"div",7),u._uU(17,"Binding Target"),u.qZA(),u.TgZ(18,"div",8),u._uU(19,"Content Type"),u.qZA(),u.TgZ(20,"div",8),u._uU(21,"Interaction"),u.qZA(),u.TgZ(22,"div",8),u._uU(23,"Priority"),u.qZA(),u.TgZ(24,"div",8),u._uU(25,"Action"),u.qZA(),u.qZA(),u.TgZ(26,"div",9),u.YNc(27,O,16,6,"div",10),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"div",11),u.TgZ(29,"button",2),u.NdJ("click",function(){return u.CHM(e),u.oxw().addBinding()}),u._uU(30,"Add Binding"),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Oqu(e.model.name),u.xp6(3),u.Oqu(e.model.method),u.xp6(21),u.Q6J("ngForOf",e.model.bindings)}}let P=(()=>{class e extends d.H{constructor(e,n,t,o){super(),this.routerService=e,this.router=n,this.dialog=t,this.activatedRoute=o}ngOnInit(){return(0,i.mG)(this,void 0,void 0,function*(){this.routerName=this.activatedRoute.snapshot.params.name,this.model=yield this.routerService.get(this.routerName)})}remove(){let e=this.dialog.open(g.z,{width:"600px"}).componentInstance;e.message='Router and binding options will be removed belong it but binding targets will not be removed (bonded queues etc). Are you sure to <b class="imp">delete</b> this router and all bindings?',e.onclosed.pipe((0,r.q)(1)).subscribe(e=>{e&&this.routerService.remove(this.routerName).then(e=>{this.router.navigateByUrl("/routers")})})}addBinding(){let e=this.dialog.open(_,{width:"600px"}).componentInstance;e.model.router=this.routerName,e.onconfirmed.pipe((0,r.q)(1)).subscribe(e=>{e&&this.routerService.addBinding(e).then(e=>{this.ngOnInit()})})}removeBinding(e){let n=this.dialog.open(g.z,{width:"600px"}).componentInstance;n.message='Are you sure to <b class="imp">remove</b> this binding from the router?',n.onclosed.pipe((0,r.q)(1)).subscribe(n=>{n&&this.routerService.removeBinding(this.routerName,e.name).then(e=>this.ngOnInit())})}}return e.\u0275fac=function(n){return new(n||e)(u.Y36(A.n),u.Y36(C.F0),u.Y36(s.uw),u.Y36(C.gz))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-router"]],features:[u.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"router-info"],[3,"click"],[1,"bindings"],[1,"table"],[1,"thead"],[1,"th","fx16"],[1,"th","fx28"],[1,"th","fx10"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"add-binding"],[1,"trow"],[1,"td","fx16"],[1,"td","fx28"],[1,"td","fx10"],[1,"remove-binding",3,"click"]],template:function(e,n){1&e&&u.YNc(0,y,31,3,"div",0),2&e&&u.Q6J("ngIf",n.model)},directives:[o.O5,o.sg],styles:[".router-info[_ngcontent-%COMP%]{margin:auto;padding:0 60px 50px;text-align:left;color:#eee}.router-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#fff}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:12px;background-color:#106030;padding:6px 10px;border-radius:2px;font-weight:500;font-size:13px;line-height:20px}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;margin-right:6px;background-color:#c00000;padding:6px 10px;border-radius:2px;font-weight:500;font-size:13px;line-height:20px}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#ff1010}.bindings[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center;color:#eee}.bindings[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.add-binding[_ngcontent-%COMP%]{text-align:center;padding:40px}.add-binding[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.add-binding[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}.remove-binding[_ngcontent-%COMP%]{border:none;border-radius:2px;background-color:#c00000;color:#fafafa;font-size:13px;font-weight:500;padding:8px 12px;cursor:pointer;width:90px}.remove-binding[_ngcontent-%COMP%]:hover{background-color:#ff2020}"]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[o.ez,p.u5,s.Is,C.Bz.forChild([{path:":name",component:P}])]]}),e})()},64762:function(e,n,t){function o(e,n,t,o){return new(t||(t=Promise))(function(i,r){function d(e){try{c(o.next(e))}catch(n){r(n)}}function g(e){try{c(o.throw(e))}catch(n){r(n)}}function c(e){e.done?i(e.value):function(e){return e instanceof t?e:new t(function(n){n(e)})}(e.value).then(d,g)}c((o=o.apply(e,n||[])).next())})}t.d(n,{mG:function(){return o}})}}]);