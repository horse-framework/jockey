!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,o){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,o||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return i(this,n)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkweb=self.webpackChunkweb||[]).push([[49],{4049:function(i,c,a){a.r(c),a.d(c,{ConsoleModule:function(){return M}});var l=a(38583),u=a(43057),g=a(45435),p=a(52962),d=a(68823),f=a(33018),h=a(65608),m=a(90665);function y(e,t){if(1&e){var n=f.EpF();f.TgZ(0,"select",15),f.NdJ("ngModelChange",function(e){return f.CHM(n),f.oxw().targetType=e}),f.TgZ(1,"option",16),f._uU(2,"Target by Name"),f.qZA(),f.TgZ(3,"option",17),f._uU(4,"Target by Topic"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.Q6J("ngModel",o.targetType)}}function b(e,t){if(1&e){var n=f.EpF();f.TgZ(0,"select",15),f.NdJ("ngModelChange",function(e){return f.CHM(n),f.oxw().targetType=e}),f.TgZ(1,"option",18),f._uU(2,"Target by Id"),f.qZA(),f.TgZ(3,"option",16),f._uU(4,"Target by Name"),f.qZA(),f.TgZ(5,"option",19),f._uU(6,"Target by Type"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.Q6J("ngModel",o.targetType)}}var v,x=((v=function(i){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,i);var c,a,p,f=r(h);function h(t){var n;return e(this,h),(n=f.call(this)).socket=t,n.MessageLimit=1e3,n.source="queue",n.targetType="name",n.target="",n.search="",n.showTime=!0,n.showMessageId=!0,n.showContentType=!1,n.autoScroll=!0,n._messages=new Set,n._datePipe=new l.uU("en-US"),n}return c=h,(a=[{key:"ngOnInit",value:function(){var e=this;this.element=document.getElementById("console"),this.on(this.socket.onmessage).pipe((0,g.h)(function(e){return e.type==d.S.ConsoleMessage})).subscribe(function(t){return e.addMessage(t.payload)}),(0,u.F)(100).subscribe(function(){e.autoScroll&&(e.element.scrollTop=e.element.scrollHeight)})}},{key:"ngOnDestroy",value:function(){n(s(h.prototype),"ngOnDestroy",this).call(this);var e={requestId:(new Date).getTime().toString(),source:null,targetType:null,target:null};this.socket.send(d.S.ConsoleRequest,e)}},{key:"toggleTime",value:function(){this.showTime=!this.showTime,this.redraw()}},{key:"toggleMessageId",value:function(){this.showMessageId=!this.showMessageId,this.redraw()}},{key:"toggleContentType",value:function(){this.showContentType=!this.showContentType,this.redraw()}},{key:"toggleAutoScroll",value:function(){this.autoScroll=!this.autoScroll}},{key:"searching",value:function(e){this.redraw()}},{key:"submit",value:function(){var e={requestId:(new Date).getTime().toString(),source:this.source,targetType:this.targetType,target:this.target};this.socket.send(d.S.ConsoleRequest,e)}},{key:"clear",value:function(){this._messages.clear(),this.redraw()}},{key:"redraw",value:function(){var e=this,t="";this._messages.forEach(function(n){e.isInFilter(n)&&(t+=e.createMessageHtml(n))}),this.element.innerHTML=t,this.element.scrollTop=this.element.scrollHeight}},{key:"addMessage",value:function(e){if(this._messages.size>2e3)for(var t=0;t<500;t++){var n=this._messages.values().next();this._messages.delete(n.value)}this._messages.add(e),this.isInFilter(e)&&this.element.appendChild(this.createMessageElement(e))}},{key:"createMessageElement",value:function(e){var t=(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p>",n=document.createElement("div");return n.className="citem",n.innerHTML=t,n}},{key:"createMessageHtml",value:function(e){return'<div class="citem">'+(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p></div></div>"}},{key:"isInFilter",value:function(e){return this.search.length<1||e.messageId.includes(this.search)||e.message.includes(this.search)}}])&&t(c.prototype,a),p&&t(c,p),h}(p.H)).\u0275fac=function(e){return new(e||v)(f.Y36(h.i))},v.\u0275cmp=f.Xpm({type:v,selectors:[["app-console"]],features:[f.qOj],decls:29,vars:13,consts:[[1,"console-frame"],[1,"console-panel"],[1,"console-filter"],["name","source",3,"ngModel","ngModelChange"],["value","queue","selected",""],["value","router"],["value","direct"],["name","targetType",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","target","placeholder","Type target",3,"ngModel","ngModelChange"],[3,"click"],[1,"console-buttons"],["type","text","name","search","placeholder","Search in messages",3,"ngModel","ngModelChange","input"],[1,"toggle-button",3,"click"],[1,"red-button",3,"click"],["id","console",1,"console"],["name","targetType",3,"ngModel","ngModelChange"],["value","name"],["value","topic"],["value","id"],["value","type"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"form"),f.TgZ(4,"select",3),f.NdJ("ngModelChange",function(e){return t.source=e}),f.TgZ(5,"option",4),f._uU(6,"Queue"),f.qZA(),f.TgZ(7,"option",5),f._uU(8,"Router"),f.qZA(),f.TgZ(9,"option",6),f._uU(10,"Direct"),f.qZA(),f.qZA(),f.YNc(11,y,5,1,"select",7),f.YNc(12,b,7,1,"select",7),f.TgZ(13,"input",8),f.NdJ("ngModelChange",function(e){return t.target=e}),f.qZA(),f.TgZ(14,"button",9),f.NdJ("click",function(){return t.submit()}),f._uU(15,"Apply Filter"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"div",10),f.TgZ(17,"input",11),f.NdJ("ngModelChange",function(e){return t.search=e})("input",function(e){return t.searching(e)}),f.qZA(),f.TgZ(18,"span",12),f.NdJ("click",function(){return t.toggleTime()}),f._uU(19,"Time"),f.qZA(),f.TgZ(20,"span",12),f.NdJ("click",function(){return t.toggleMessageId()}),f._uU(21,"Message Id"),f.qZA(),f.TgZ(22,"span",12),f.NdJ("click",function(){return t.toggleContentType()}),f._uU(23,"Content Type"),f.qZA(),f.TgZ(24,"span",12),f.NdJ("click",function(){return t.toggleAutoScroll()}),f._uU(25,"Auto Scroll"),f.qZA(),f.TgZ(26,"span",13),f.NdJ("click",function(){return t.clear()}),f._uU(27,"Clear Console"),f.qZA(),f.qZA(),f.qZA(),f._UZ(28,"div",14),f.qZA()),2&e&&(f.xp6(4),f.Q6J("ngModel",t.source),f.xp6(7),f.Q6J("ngIf","queue"==t.source),f.xp6(1),f.Q6J("ngIf","direct"==t.source),f.xp6(1),f.Q6J("ngModel",t.target),f.xp6(4),f.Q6J("ngModel",t.search),f.xp6(1),f.ekj("active",t.showTime),f.xp6(2),f.ekj("active",t.showMessageId),f.xp6(2),f.ekj("active",t.showContentType),f.xp6(2),f.ekj("active",t.autoScroll))},directives:[m._Y,m.JL,m.F,m.EJ,m.JJ,m.On,m.YN,m.Kr,l.O5,m.Fj],styles:['.console-frame[_ngcontent-%COMP%]{max-width:1400px;display:flex;flex-direction:column;margin:auto;align-content:stretch;align-items:stretch;height:calc(100vh - 110px)}.console-panel[_ngcontent-%COMP%]{display:flex;flex:0 1 auto;flex-direction:row;align-items:stretch;align-content:space-between}.console-filter[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 0 12px}.console-filter[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ccc;padding:6px;margin:0 10px 0 0;line-height:30px;height:32px;box-sizing:border-box}.console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ccc;box-sizing:border-box;padding:6px 8px;margin:0 10px 0 0;line-height:32px;height:32px}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;border:none;background-color:#444;color:#eee;box-sizing:border-box;padding:6px 12px;margin:0 10px 0 0;height:32px;font-size:12px;font-weight:600;cursor:pointer}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#030303}.console-buttons[_ngcontent-%COMP%]{flex:0 1 auto;padding-top:0}.toggle-button[_ngcontent-%COMP%]{margin:0 4px;border-radius:6px;background-color:#dadada;color:#222;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.toggle-button[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.toggle-button.active[_ngcontent-%COMP%]{background-color:#f0d000;color:#000}.toggle-button[_ngcontent-%COMP%]:hover.active{background-color:#f0e060}.red-button[_ngcontent-%COMP%]{margin:0 0 0 4px;border-radius:6px;background-color:#d01010;color:#fff;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.red-button[_ngcontent-%COMP%]:hover{background-color:#ff3030}.console[_ngcontent-%COMP%]{background-color:#101010;flex:1 1 auto;border-radius:8px;display:flex;flex-direction:column;align-content:stretch;align-items:stretch;overflow:auto;padding:10px 14px;font-family:"Ubuntu Mono",monospace}']}),v),T=a(44139),M=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[l.ez,m.u5,T.Bz.forChild([{path:"",component:x}])]]}),t}()}}])}();