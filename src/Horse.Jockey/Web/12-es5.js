function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=_superPropBase(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{FWq7:function(e,t,n){"use strict";n.r(t),n.d(t,"ConsoleModule",(function(){return h}));var o=n("ofXK"),r=n("pLZG"),c=n("HIds"),s=n("5mbK"),i=n("fXoL"),a=n("FuJ8"),l=n("3Pt+");function u(e,t){if(1&e){var n=i.Pb();i.Ob(0,"select",15),i.Wb("ngModelChange",(function(e){return i.fc(n),i.Yb().targetType=e})),i.Ob(1,"option",16),i.jc(2,"Target by Name"),i.Nb(),i.Ob(3,"option",17),i.jc(4,"Target by Topic"),i.Nb(),i.Nb()}if(2&e){var o=i.Yb();i.cc("ngModel",o.targetType)}}function g(e,t){if(1&e){var n=i.Pb();i.Ob(0,"select",15),i.Wb("ngModelChange",(function(e){return i.fc(n),i.Yb().targetType=e})),i.Ob(1,"option",18),i.jc(2,"Target by Id"),i.Nb(),i.Ob(3,"option",16),i.jc(4,"Target by Name"),i.Nb(),i.Ob(5,"option",19),i.jc(6,"Target by Type"),i.Nb(),i.Nb()}if(2&e){var o=i.Yb();i.cc("ngModel",o.targetType)}}var p,f,b=((p=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).socket=e,r.MessageLimit=1e3,r.source="queue",r.targetType="name",r.target="",r.search="",r.showTime=!0,r.showMessageId=!0,r.showContentType=!1,r.autoScroll=!0,r._messages=[],r._datePipe=new o.d("en-US"),r}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.element=document.getElementById("console"),this.on(this.socket.onmessage).pipe(Object(r.a)((function(e){return e.type==s.a.ConsoleMessage}))).subscribe((function(t){return e.addMessage(t.payload)}))}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this);var e={requestId:(new Date).getTime().toString(),source:null,targetType:null,target:null};this.socket.send(s.a.ConsoleRequest,e)}},{key:"toggleTime",value:function(){this.showTime=!this.showTime,this.redraw()}},{key:"toggleMessageId",value:function(){this.showMessageId=!this.showMessageId,this.redraw()}},{key:"toggleContentType",value:function(){this.showContentType=!this.showContentType,this.redraw()}},{key:"toggleAutoScroll",value:function(){this.autoScroll=!this.autoScroll}},{key:"searching",value:function(e){this.redraw()}},{key:"submit",value:function(){var e={requestId:(new Date).getTime().toString(),source:this.source,targetType:this.targetType,target:this.target};this.socket.send(s.a.ConsoleRequest,e)}},{key:"clear",value:function(){this._messages=[],this.redraw()}},{key:"redraw",value:function(){var e=this,t="";this._messages.forEach((function(n){e.isInFilter(n)&&(t+=e.createMessageHtml(n))})),this.element.innerHTML=t,this.element.scrollTop=this.element.scrollHeight}},{key:"addMessage",value:function(e){this._messages.length>this.MessageLimit+100&&this._messages.splice(0,200),this._messages.push(e),this.isInFilter(e)&&(this.element.append(this.createMessageElement(e)),this.autoScroll&&(this.element.scrollTop=this.element.scrollHeight))}},{key:"createMessageElement",value:function(e){var t=(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p>",n=document.createElement("div");return n.className="citem",n.innerHTML=t,n}},{key:"createMessageHtml",value:function(e){return'<div class="citem">'+(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p></div></div>"}},{key:"isInFilter",value:function(e){return this.search.length<1||e.messageId.includes(this.search)||e.message.includes(this.search)}}]),n}(c.a)).\u0275fac=function(e){return new(e||p)(i.Jb(a.a))},p.\u0275cmp=i.Db({type:p,selectors:[["app-console"]],features:[i.wb],decls:29,vars:13,consts:[[1,"console-frame"],[1,"console-panel"],[1,"console-filter"],["name","source",3,"ngModel","ngModelChange"],["value","queue","selected",""],["value","router"],["value","direct"],["name","targetType",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","target","placeholder","Type target",3,"ngModel","ngModelChange"],[3,"click"],[1,"console-buttons"],["type","text","name","search","placeholder","Search in messages",3,"ngModel","ngModelChange","input"],[1,"toggle-button",3,"click"],[1,"red-button",3,"click"],["id","console",1,"console"],["name","targetType",3,"ngModel","ngModelChange"],["value","name"],["value","topic"],["value","id"],["value","type"]],template:function(e,t){1&e&&(i.Ob(0,"div",0),i.Ob(1,"div",1),i.Ob(2,"div",2),i.Ob(3,"form"),i.Ob(4,"select",3),i.Wb("ngModelChange",(function(e){return t.source=e})),i.Ob(5,"option",4),i.jc(6,"Queue"),i.Nb(),i.Ob(7,"option",5),i.jc(8,"Router"),i.Nb(),i.Ob(9,"option",6),i.jc(10,"Direct"),i.Nb(),i.Nb(),i.ic(11,u,5,1,"select",7),i.ic(12,g,7,1,"select",7),i.Ob(13,"input",8),i.Wb("ngModelChange",(function(e){return t.target=e})),i.Nb(),i.Ob(14,"button",9),i.Wb("click",(function(){return t.submit()})),i.jc(15,"Apply Filter"),i.Nb(),i.Nb(),i.Nb(),i.Ob(16,"div",10),i.Ob(17,"input",11),i.Wb("ngModelChange",(function(e){return t.search=e}))("input",(function(e){return t.searching(e)})),i.Nb(),i.Ob(18,"span",12),i.Wb("click",(function(){return t.toggleTime()})),i.jc(19,"Time"),i.Nb(),i.Ob(20,"span",12),i.Wb("click",(function(){return t.toggleMessageId()})),i.jc(21,"Message Id"),i.Nb(),i.Ob(22,"span",12),i.Wb("click",(function(){return t.toggleContentType()})),i.jc(23,"Content Type"),i.Nb(),i.Ob(24,"span",12),i.Wb("click",(function(){return t.toggleAutoScroll()})),i.jc(25,"Auto Scroll"),i.Nb(),i.Ob(26,"span",13),i.Wb("click",(function(){return t.clear()})),i.jc(27,"Clear Console"),i.Nb(),i.Nb(),i.Nb(),i.Kb(28,"div",14),i.Nb()),2&e&&(i.zb(4),i.cc("ngModel",t.source),i.zb(7),i.cc("ngIf","queue"==t.source),i.zb(1),i.cc("ngIf","direct"==t.source),i.zb(1),i.cc("ngModel",t.target),i.zb(4),i.cc("ngModel",t.search),i.zb(1),i.Bb("active",t.showTime),i.zb(2),i.Bb("active",t.showMessageId),i.zb(2),i.Bb("active",t.showContentType),i.zb(2),i.Bb("active",t.autoScroll))},directives:[l.j,l.d,l.e,l.h,l.c,l.f,l.g,l.i,o.j,l.a],styles:[".console-frame[_ngcontent-%COMP%]{max-width:1400px;flex-direction:column;margin:auto;align-content:stretch;height:calc(100vh - 110px)}.console-frame[_ngcontent-%COMP%], .console-panel[_ngcontent-%COMP%]{display:flex;align-items:stretch}.console-panel[_ngcontent-%COMP%]{flex:0 1 auto;flex-direction:row;align-content:space-between}.console-filter[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 0 12px}.console-filter[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px;line-height:30px}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ccc;margin:0 10px 0 0;height:32px;box-sizing:border-box}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px 8px;line-height:32px}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;border:none;background-color:#444;color:#eee;box-sizing:border-box;padding:6px 12px;margin:0 10px 0 0;height:32px;font-size:12px;font-weight:600;cursor:pointer}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#030303}.console-buttons[_ngcontent-%COMP%]{flex:0 1 auto;padding-top:0}.toggle-button[_ngcontent-%COMP%]{margin:0 4px;border-radius:6px;background-color:#dadada;color:#222;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.toggle-button[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.toggle-button.active[_ngcontent-%COMP%]{background-color:#f0d000;color:#000}.toggle-button[_ngcontent-%COMP%]:hover.active{background-color:#f0e060}.red-button[_ngcontent-%COMP%]{margin:0 0 0 4px;border-radius:6px;background-color:#d01010;color:#fff;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.red-button[_ngcontent-%COMP%]:hover{background-color:#ff3030}.console[_ngcontent-%COMP%]{background-color:#101010;flex:1 1 auto;border-radius:8px;display:flex;flex-direction:column;align-content:stretch;align-items:stretch;overflow:auto;padding:10px 14px;font-family:Ubuntu Mono,monospace}"]}),p),d=n("tyNb"),h=((f=function e(){_classCallCheck(this,e)}).\u0275mod=i.Hb({type:f}),f.\u0275inj=i.Gb({factory:function(e){return new(e||f)},imports:[[o.b,l.b,d.e.forChild([{path:"",component:b}])]]}),f)}}]);