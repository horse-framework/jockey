function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=_superPropBase(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{FWq7:function(e,t,n){"use strict";n.r(t),n.d(t,"ConsoleModule",(function(){return m}));var o=n("ofXK"),r=n("l5mm"),c=n("pLZG"),s=n("HIds"),i=n("5mbK"),a=n("fXoL"),l=n("FuJ8"),u=n("3Pt+");function g(e,t){if(1&e){var n=a.Rb();a.Qb(0,"select",15),a.Yb("ngModelChange",(function(e){return a.jc(n),a.ac().targetType=e})),a.Qb(1,"option",16),a.qc(2,"Target by Name"),a.Pb(),a.Qb(3,"option",17),a.qc(4,"Target by Topic"),a.Pb(),a.Pb()}if(2&e){var o=a.ac();a.ec("ngModel",o.targetType)}}function p(e,t){if(1&e){var n=a.Rb();a.Qb(0,"select",15),a.Yb("ngModelChange",(function(e){return a.jc(n),a.ac().targetType=e})),a.Qb(1,"option",18),a.qc(2,"Target by Id"),a.Pb(),a.Qb(3,"option",16),a.qc(4,"Target by Name"),a.Pb(),a.Qb(5,"option",19),a.qc(6,"Target by Type"),a.Pb(),a.Pb()}if(2&e){var o=a.ac();a.ec("ngModel",o.targetType)}}var f,d,b=((f=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).socket=e,r.MessageLimit=1e3,r.source="queue",r.targetType="name",r.target="",r.search="",r.showTime=!0,r.showMessageId=!0,r.showContentType=!1,r.autoScroll=!0,r._messages=new Set,r._datePipe=new o.d("en-US"),r}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.element=document.getElementById("console"),this.on(this.socket.onmessage).pipe(Object(c.a)((function(e){return e.type==i.a.ConsoleMessage}))).subscribe((function(t){return e.addMessage(t.payload)})),Object(r.a)(100).subscribe((function(){e.autoScroll&&(e.element.scrollTop=e.element.scrollHeight)}))}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this);var e={requestId:(new Date).getTime().toString(),source:null,targetType:null,target:null};this.socket.send(i.a.ConsoleRequest,e)}},{key:"toggleTime",value:function(){this.showTime=!this.showTime,this.redraw()}},{key:"toggleMessageId",value:function(){this.showMessageId=!this.showMessageId,this.redraw()}},{key:"toggleContentType",value:function(){this.showContentType=!this.showContentType,this.redraw()}},{key:"toggleAutoScroll",value:function(){this.autoScroll=!this.autoScroll}},{key:"searching",value:function(e){this.redraw()}},{key:"submit",value:function(){var e={requestId:(new Date).getTime().toString(),source:this.source,targetType:this.targetType,target:this.target};this.socket.send(i.a.ConsoleRequest,e)}},{key:"clear",value:function(){this._messages.clear(),this.redraw()}},{key:"redraw",value:function(){var e=this,t="";this._messages.forEach((function(n){e.isInFilter(n)&&(t+=e.createMessageHtml(n))})),this.element.innerHTML=t,this.element.scrollTop=this.element.scrollHeight}},{key:"addMessage",value:function(e){if(this._messages.size>2e3)for(var t=0;t<500;t++){var n=this._messages.values().next();this._messages.delete(n.value)}this._messages.add(e),this.isInFilter(e)&&this.element.appendChild(this.createMessageElement(e))}},{key:"createMessageElement",value:function(e){var t=(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p>",n=document.createElement("div");return n.className="citem",n.innerHTML=t,n}},{key:"createMessageHtml",value:function(e){return'<div class="citem">'+(this.showTime?"<em>"+this._datePipe.transform(1e3*e.date,"HH:mm:ss")+"</em>":"")+"<strong>"+e.name+"</strong>"+(this.showContentType?"<span>"+e.contentType+"</span>":"")+"<div>"+(this.showMessageId?"<b>"+e.messageId+"</b>":"")+"<p>"+e.message+"</p></div></div>"}},{key:"isInFilter",value:function(e){return this.search.length<1||e.messageId.includes(this.search)||e.message.includes(this.search)}}]),n}(s.a)).\u0275fac=function(e){return new(e||f)(a.Kb(l.a))},f.\u0275cmp=a.Eb({type:f,selectors:[["app-console"]],features:[a.xb],decls:29,vars:13,consts:[[1,"console-frame"],[1,"console-panel"],[1,"console-filter"],["name","source",3,"ngModel","ngModelChange"],["value","queue","selected",""],["value","router"],["value","direct"],["name","targetType",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","target","placeholder","Type target",3,"ngModel","ngModelChange"],[3,"click"],[1,"console-buttons"],["type","text","name","search","placeholder","Search in messages",3,"ngModel","ngModelChange","input"],[1,"toggle-button",3,"click"],[1,"red-button",3,"click"],["id","console",1,"console"],["name","targetType",3,"ngModel","ngModelChange"],["value","name"],["value","topic"],["value","id"],["value","type"]],template:function(e,t){1&e&&(a.Qb(0,"div",0),a.Qb(1,"div",1),a.Qb(2,"div",2),a.Qb(3,"form"),a.Qb(4,"select",3),a.Yb("ngModelChange",(function(e){return t.source=e})),a.Qb(5,"option",4),a.qc(6,"Queue"),a.Pb(),a.Qb(7,"option",5),a.qc(8,"Router"),a.Pb(),a.Qb(9,"option",6),a.qc(10,"Direct"),a.Pb(),a.Pb(),a.oc(11,g,5,1,"select",7),a.oc(12,p,7,1,"select",7),a.Qb(13,"input",8),a.Yb("ngModelChange",(function(e){return t.target=e})),a.Pb(),a.Qb(14,"button",9),a.Yb("click",(function(){return t.submit()})),a.qc(15,"Apply Filter"),a.Pb(),a.Pb(),a.Pb(),a.Qb(16,"div",10),a.Qb(17,"input",11),a.Yb("ngModelChange",(function(e){return t.search=e}))("input",(function(e){return t.searching(e)})),a.Pb(),a.Qb(18,"span",12),a.Yb("click",(function(){return t.toggleTime()})),a.qc(19,"Time"),a.Pb(),a.Qb(20,"span",12),a.Yb("click",(function(){return t.toggleMessageId()})),a.qc(21,"Message Id"),a.Pb(),a.Qb(22,"span",12),a.Yb("click",(function(){return t.toggleContentType()})),a.qc(23,"Content Type"),a.Pb(),a.Qb(24,"span",12),a.Yb("click",(function(){return t.toggleAutoScroll()})),a.qc(25,"Auto Scroll"),a.Pb(),a.Qb(26,"span",13),a.Yb("click",(function(){return t.clear()})),a.qc(27,"Clear Console"),a.Pb(),a.Pb(),a.Pb(),a.Lb(28,"div",14),a.Pb()),2&e&&(a.Ab(4),a.ec("ngModel",t.source),a.Ab(7),a.ec("ngIf","queue"==t.source),a.Ab(1),a.ec("ngIf","direct"==t.source),a.Ab(1),a.ec("ngModel",t.target),a.Ab(4),a.ec("ngModel",t.search),a.Ab(1),a.Cb("active",t.showTime),a.Ab(2),a.Cb("active",t.showMessageId),a.Ab(2),a.Cb("active",t.showContentType),a.Ab(2),a.Cb("active",t.autoScroll))},directives:[u.j,u.d,u.e,u.h,u.c,u.f,u.g,u.i,o.k,u.a],styles:[".console-frame[_ngcontent-%COMP%]{max-width:1400px;flex-direction:column;margin:auto;align-content:stretch;height:calc(100vh - 110px)}.console-frame[_ngcontent-%COMP%], .console-panel[_ngcontent-%COMP%]{display:flex;align-items:stretch}.console-panel[_ngcontent-%COMP%]{flex:0 1 auto;flex-direction:row;align-content:space-between}.console-filter[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 0 12px}.console-filter[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px;line-height:30px}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ccc;margin:0 10px 0 0;height:32px;box-sizing:border-box}.console-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .console-filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:6px 8px;line-height:32px}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;border:none;background-color:#444;color:#eee;box-sizing:border-box;padding:6px 12px;margin:0 10px 0 0;height:32px;font-size:12px;font-weight:600;cursor:pointer}.console-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#030303}.console-buttons[_ngcontent-%COMP%]{flex:0 1 auto;padding-top:0}.toggle-button[_ngcontent-%COMP%]{margin:0 4px;border-radius:6px;background-color:#dadada;color:#222;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.toggle-button[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.toggle-button.active[_ngcontent-%COMP%]{background-color:#f0d000;color:#000}.toggle-button[_ngcontent-%COMP%]:hover.active{background-color:#f0e060}.red-button[_ngcontent-%COMP%]{margin:0 0 0 4px;border-radius:6px;background-color:#d01010;color:#fff;padding:8px 10px;line-height:20px;font-size:13px;font-weight:400;cursor:pointer}.red-button[_ngcontent-%COMP%]:hover{background-color:#ff3030}.console[_ngcontent-%COMP%]{background-color:#101010;flex:1 1 auto;border-radius:8px;display:flex;flex-direction:column;align-content:stretch;align-items:stretch;overflow:auto;padding:10px 14px;font-family:Ubuntu Mono,monospace}"]}),f),h=n("tyNb"),m=((d=function e(){_classCallCheck(this,e)}).\u0275mod=a.Ib({type:d}),d.\u0275inj=a.Hb({factory:function(e){return new(e||d)},imports:[[o.b,u.b,h.e.forChild([{path:"",component:b}])]]}),d)}}]);