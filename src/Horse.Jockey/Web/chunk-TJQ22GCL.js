import{a as ae}from"./chunk-77IAIRUM.js";import{a as oe}from"./chunk-BQERTHYR.js";import"./chunk-H2JBVQRL.js";import"./chunk-DTICWRO3.js";import{a as S}from"./chunk-U2DSLRRK.js";import{a as $,b as ee,c as te,d as ne,e as ie,f as w}from"./chunk-2C4VCG6N.js";import{a as G,b as J,c as K,f as Q,h as X,n as Y}from"./chunk-NJ67TIRQ.js";import{a as q}from"./chunk-IARL6YQG.js";import{Aa as x,Fa as C,Ga as e,Ha as t,Ia as j,Ib as U,Ma as P,N as u,Pa as f,Pb as Z,Qa as h,U as _,V as M,Xa as o,Ya as g,Za as k,ab as s,bb as c,cb as p,d as T,eb as V,g as W,ia as r,ib as A,kb as B,ra as O,ua as v,ub as z,va as y,vb as R,wb as H,xb as b,y as N,ya as F}from"./chunk-I3ZBIMQN.js";var I=class l{model;_onconfirmed=new W;get onconfirmed(){return this._onconfirmed}_confirmed=!1;constructor(){this.model={name:"",topic:"",autoDestroy:!0,autoDestroyIdleSeconds:15,clientLimit:0,messageSizeLimit:0,sendLastMessageAsInitial:!1}}ngOnInit(){}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=v({type:l,selectors:[["app-channel-create-modal"]],standalone:!1,decls:39,vars:7,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"form-item"],["placeholder","Channel Name","type","text",1,"jockey-text",3,"ngModelChange","ngModel"],["placeholder","Left blank if you don't need","type","text",1,"jockey-text",3,"ngModelChange","ngModel"],["placeholder","Zero for unlimited","type","number",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"kvt-row"],[1,"kvt-key-narrow"],[1,"kvt-value"],["type","checkbox",1,"jockey-text",3,"ngModelChange","ngModel"],["placeholder","Left blank for server default","type","number",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-blue",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"]],template:function(n,i){n&1&&(e(0,"h2",0),o(1,"Create New Channel"),t(),e(2,"mat-dialog-content",1)(3,"div")(4,"div",2)(5,"label"),o(6,"Channel Name"),t(),e(7,"input",3),p("ngModelChange",function(a){return c(i.model.name,a)||(i.model.name=a),a}),t()(),e(8,"div",2)(9,"label"),o(10,"Topic"),t(),e(11,"input",4),p("ngModelChange",function(a){return c(i.model.topic,a)||(i.model.topic=a),a}),t()(),e(12,"div",2)(13,"label"),o(14,"Client Limit"),t(),e(15,"input",5),p("ngModelChange",function(a){return c(i.model.clientLimit,a)||(i.model.clientLimit=a),a}),t()(),e(16,"div",2)(17,"label"),o(18,"Message Size Limit (in bytes)"),t(),e(19,"input",5),p("ngModelChange",function(a){return c(i.model.messageSizeLimit,a)||(i.model.messageSizeLimit=a),a}),t()(),e(20,"div",6)(21,"div",7),o(22,"Use Initial Message"),t(),e(23,"div",8)(24,"input",9),p("ngModelChange",function(a){return c(i.model.sendLastMessageAsInitial,a)||(i.model.sendLastMessageAsInitial=a),a}),t()()(),e(25,"div",6)(26,"div",7),o(27,"Auto Destroy"),t(),e(28,"div",8)(29,"input",9),p("ngModelChange",function(a){return c(i.model.autoDestroy,a)||(i.model.autoDestroy=a),a}),t()()(),e(30,"div",2)(31,"label"),o(32,"Auto Destroy Idle (in seconds)"),t(),e(33,"input",10),p("ngModelChange",function(a){return c(i.model.autoDestroyIdleSeconds,a)||(i.model.autoDestroyIdleSeconds=a),a}),t()()()(),e(34,"mat-dialog-actions",11)(35,"button",12),f("click",function(){return i.create()}),o(36,"Create Channel"),t(),e(37,"button",13),o(38,"Cancel"),t()()),n&2&&(r(7),s("ngModel",i.model.name),r(4),s("ngModel",i.model.topic),r(4),s("ngModel",i.model.clientLimit),r(4),s("ngModel",i.model.messageSizeLimit),r(5),s("ngModel",i.model.sendLastMessageAsInitial),r(5),s("ngModel",i.model.autoDestroy),r(4),s("ngModel",i.model.autoDestroyIdleSeconds))},dependencies:[ee,te,ie,ne,J,X,G,K,Q],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]})};function de(l,d){l&1&&(e(0,"em"),o(1,"No Initial Message"),t())}function se(l,d){if(l&1){let n=P();e(0,"span")(1,"a",13),f("click",function(){_(n);let m=h().$implicit,a=h(2);return M(a.viewInitialMessage(m))}),o(2,"View"),t()()}}function ce(l,d){if(l&1&&(e(0,"div",14),j(1,"div",15),e(2,"div",16)(3,"span")(4,"a",17),o(5),t()()(),e(6,"div",18)(7,"span"),o(8),t()(),e(9,"div",19)(10,"span"),o(11),t()(),e(12,"div",19)(13,"span"),o(14),t()(),e(15,"div",19)(16,"span"),o(17),t()(),e(18,"div",19)(19,"span"),o(20),t()(),e(21,"div",20)(22,"span"),o(23),A(24,"date"),t()(),e(25,"div",19),x(26,de,2,0,"em",21)(27,se,3,0,"span",21),t()()),l&2){let n=d.$implicit;r(4),C("routerLink",V("/channel/",n.name)),r(),g(n.name),r(3),g(n.topic),r(3),g(n.status),r(3),g(n.publish),r(3),g(n.receive),r(3),k("",n.subscriberCount," Online"),r(3),g(B(24,11,n.lastPublishDate*1e3,"yyyy-MM-dd HH:mm:ss")),r(3),C("ngIf",!n.hasInitialMessage),r(),C("ngIf",n.hasInitialMessage)}}function pe(l,d){if(l&1){let n=P();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),f("click",function(){_(n);let m=h();return M(m.create())}),t()(),e(5,"div",6),o(6," Name "),e(7,"em"),o(8),t()(),e(9,"div",7),o(10,"Topic"),t(),e(11,"div",8),o(12,"Status"),t(),e(13,"div",8),o(14,"Published"),t(),e(15,"div",8),o(16,"Received"),t(),e(17,"div",8),o(18,"Subscribers"),t(),e(19,"div",9),o(20,"Last Publish Date"),t(),e(21,"div",8),o(22,"Initial Message"),t()(),e(23,"div",10),x(24,ce,28,14,"div",11),t()(),e(25,"div",12)(26,"button",13),f("click",function(){_(n);let m=h();return M(m.create())}),o(27,"Create New Channel"),t()()()}if(l&2){let n=h();r(8),k("(",n.channels.length," Channels)"),r(16),C("ngForOf",n.channels)}}var E=class l extends q{constructor(n,i){super();this.dialog=n;this.channelService=i}channels=[];ngOnInit(){return T(this,null,function*(){this.channelService.list().subscribe(n=>this.channels=n.body),this.subscribeToListRefresh().subscribe(()=>this.channelService.list().subscribe(n=>this.channels=n.body))})}create(){this.dialog.open(I,{width:"400px"}).componentInstance.onconfirmed.pipe(N(1)).subscribe(m=>{m&&this.channelService.create(m).subscribe(a=>{this.ngOnInit()})})}viewInitialMessage(n){this.dialog.open(ae,{panelClass:"wide-modal"}).componentInstance.load(n.name)}static \u0275fac=function(i){return new(i||l)(O($),O(oe))};static \u0275cmp=v({type:l,selectors:[["app-channels"]],standalone:!1,features:[F],decls:1,vars:1,consts:[["class","channels",4,"ngIf"],[1,"channels"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Channel",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx14"],[1,"th","fx10"],[1,"th","fx12"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"trow"],[1,"td","fx40px"],[1,"td","fx20"],[3,"routerLink"],[1,"td","fx14"],[1,"td","fx10"],[1,"td","fx12"],[4,"ngIf"]],template:function(i,m){i&1&&x(0,pe,28,2,"div",0),i&2&&C("ngIf",m.channels)},dependencies:[z,R,U,H],styles:[".channels[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.channels[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}"]})};var D=class l{static \u0275fac=function(n){return new(n||l)};static \u0275mod=y({type:l});static \u0275inj=u({imports:[b,w,S]})};var le=class l{static \u0275fac=function(n){return new(n||l)};static \u0275mod=y({type:l});static \u0275inj=u({imports:[b,S,w,Y,D,Z.forChild([{path:"",component:E}])]})};export{le as ChannelsModule};
