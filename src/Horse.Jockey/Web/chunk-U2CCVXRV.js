import{a as ce}from"./chunk-C32MIXKR.js";import{a as Q}from"./chunk-AALDHFM7.js";import{a as le}from"./chunk-U2DSLRRK.js";import{a as re,b as me,c as ue,d as se,e as de,f as pe}from"./chunk-2C4VCG6N.js";import{b as Z,c as $,f as ee,h as te,i as ie,j as ne,k as oe,n as ae}from"./chunk-NJ67TIRQ.js";import{a as Y}from"./chunk-IARL6YQG.js";import{Aa as v,Fa as s,Ga as t,Ha as i,Ia as L,Ib as K,Ma as h,N as W,Pa as x,Pb as X,Qa as C,Ra as A,Sa as F,Ta as R,U as d,V as p,Xa as l,Ya as g,Za as M,ab as f,bb as _,cb as y,d as P,eb as j,g as V,ia as r,ib as D,jb as z,kb as H,ra as w,s as O,u as q,ua as b,ub as E,va as B,vb as J,wb as U,xb as G,y as S,ya as N}from"./chunk-I3ZBIMQN.js";var k=class{name=null;manager=null;commit=null;ack=null;type=null;autoDestroy=null;putBack=null;ackTimeout=null;msgTimeout=null;putBackDelay=null;delay=null;clientLimit=null;msgLimit=null;msgSizeLimit=null};var Me=["queueForm"];function xe(o,m){if(o&1&&(t(0,"option",12),l(1),i()),o&2){let e=m.$implicit;s("ngValue",e),r(),g(e)}}function we(o,m){if(o&1&&(t(0,"option",12),l(1),i()),o&2){let e=m.$implicit;s("ngValue",e.value),r(),g(e.text)}}function Se(o,m){if(o&1&&(t(0,"option",12),l(1),i()),o&2){let e=m.$implicit;s("ngValue",e.value),r(),g(e.text)}}function be(o,m){if(o&1&&(t(0,"option",12),l(1),i()),o&2){let e=m.$implicit;s("ngValue",e.value),r(),g(e.text)}}function he(o,m){if(o&1&&(t(0,"option",12),l(1),i()),o&2){let e=m.$implicit;s("ngValue",e.value),r(),g(e.text)}}function Ee(o,m){if(o&1&&(t(0,"option",12),l(1),i()),o&2){let e=m.$implicit;s("ngValue",e.value),r(),g(e.text)}}var T=class o{constructor(m){this.queueService=m}model=new k;commitWhenItems=[{value:null,text:"(Default)"},{value:"None",text:"None"},{value:"AfterReceived",text:"After server received the message"},{value:"AfterSaved",text:"After message is saved to disk"},{value:"AfterSent",text:"After message is sent to at least one consumer"},{value:"AfterAcknowledge",text:"After a consumer send ack to server"}];ackItems=[{value:null,text:"(Default)"},{value:"None",text:"Disable acknowledge system"},{value:"JustRequest",text:"Request acknowledge but keep sending messages to same consumer"},{value:"WaitForAcknowledge",text:"Do not send next message to same consumer before receive ack for previous"}];typeItems=[{value:null,text:"(Default)"},{value:"Push",text:"Push: All consumers receive same message from queue (automatically)"},{value:"RoundRobin",text:"Round Robin: Only one consumer receive same message (automatically)"},{value:"Pull",text:"Pull: Only one consumer receive same message but it should send pull request"}];autoDestroyItems=[{value:null,text:"(Default)"},{value:"Disabled",text:"Queue stays forever. It's removed only manually."},{value:"NoMessages",text:"Queue is destroyed if empty"},{value:"NoConsumers",text:"Queue is destroyed if there are no consumers (even not empty)"},{value:"Empty",text:"Queue is destroyed when it's empty and there are no consumers"}];putBackItems=[{value:null,text:"(Default)"},{value:"No",text:"Put back operations are disabled"},{value:"Priority",text:"Message is put back as first message (beginning of the queue)"},{value:"Regular",text:"Message is put back as last message (end of the queue)"}];managers=[];queueForm;_onconfirmed=new V;get onconfirmed(){return this._onconfirmed}_confirmed=!1;ngOnInit(){this.queueService.getManagers().subscribe(m=>this.managers=m.body),O(50).pipe(q(()=>this.queueForm!=null),S(1)).subscribe(()=>{this.queueForm.nativeElement.querySelectorAll("select").forEach(e=>{let n=e.getElementsByTagName("option")[0];n.selected=!0})})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}static \u0275fac=function(e){return new(e||o)(w(Q))};static \u0275cmp=b({type:o,selectors:[["app-queue-create-modal"]],viewQuery:function(e,n){if(e&1&&A(Me,5),e&2){let u;F(u=R())&&(n.queueForm=u.first)}},standalone:!1,decls:72,vars:20,consts:[["queueForm",""],["mat-dialog-title","",1,"title"],[1,"content"],[1,"queue-form","scroll"],[1,"form-item"],["placeholder","Queue Name","type","text",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"jockey-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["placeholder","Left blank for server default","type","number",1,"jockey-text",3,"ngModelChange","ngModel"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-blue",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"]],template:function(e,n){if(e&1){let u=h();t(0,"h2",1),l(1,"Create New Queue"),i(),t(2,"mat-dialog-content",2)(3,"div",3,0)(5,"div",4)(6,"label"),l(7,"Queue Name"),i(),t(8,"input",5),y("ngModelChange",function(a){return d(u),_(n.model.name,a)||(n.model.name=a),p(a)}),i()(),t(9,"div",4)(10,"label"),l(11,"Queue Manager"),i(),t(12,"select",6),y("ngModelChange",function(a){return d(u),_(n.model.manager,a)||(n.model.manager=a),p(a)}),v(13,xe,2,2,"option",7),i()(),t(14,"div",4)(15,"label"),l(16,"Queue Type"),i(),t(17,"select",6),y("ngModelChange",function(a){return d(u),_(n.model.type,a)||(n.model.type=a),p(a)}),v(18,we,2,2,"option",7),i()(),t(19,"div",4)(20,"label"),l(21,"Commit When"),i(),t(22,"select",6),y("ngModelChange",function(a){return d(u),_(n.model.commit,a)||(n.model.commit=a),p(a)}),v(23,Se,2,2,"option",7),i()(),t(24,"div",4)(25,"label"),l(26,"Acknowledge"),i(),t(27,"select",6),y("ngModelChange",function(a){return d(u),_(n.model.ack,a)||(n.model.ack=a),p(a)}),v(28,be,2,2,"option",7),i()(),t(29,"div",4)(30,"label"),l(31,"Put Back"),i(),t(32,"select",6),y("ngModelChange",function(a){return d(u),_(n.model.putBack,a)||(n.model.putBack=a),p(a)}),v(33,he,2,2,"option",7),i()(),t(34,"div",4)(35,"label"),l(36,"Auto Destroy"),i(),t(37,"select",6),y("ngModelChange",function(a){return d(u),_(n.model.autoDestroy,a)||(n.model.autoDestroy=a),p(a)}),v(38,Ee,2,2,"option",7),i()(),t(39,"div",4)(40,"label"),l(41,"Acknowledge Timeout (in milliseconds)"),i(),t(42,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.ackTimeout,a)||(n.model.ackTimeout=a),p(a)}),i()(),t(43,"div",4)(44,"label"),l(45,"Message Timeout (in seconds)"),i(),t(46,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.msgTimeout,a)||(n.model.msgTimeout=a),p(a)}),i()(),t(47,"div",4)(48,"label"),l(49,"Put Back Delay (in milliseconds)"),i(),t(50,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.putBackDelay,a)||(n.model.putBackDelay=a),p(a)}),i()(),t(51,"div",4)(52,"label"),l(53,"Delay Between Message Consumes (in milliseconds)"),i(),t(54,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.delay,a)||(n.model.delay=a),p(a)}),i()(),t(55,"div",4)(56,"label"),l(57,"Allowed Maximum Consumers (0 for unlimited)"),i(),t(58,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.clientLimit,a)||(n.model.clientLimit=a),p(a)}),i()(),t(59,"div",4)(60,"label"),l(61,"Allowed Maximum Messages (0 for unlimited)"),i(),t(62,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.msgLimit,a)||(n.model.msgLimit=a),p(a)}),i()(),t(63,"div",4)(64,"label"),l(65,"Allowed Maximum Size for single message in bytes (0 for unlimited)"),i(),t(66,"input",8),y("ngModelChange",function(a){return d(u),_(n.model.msgSizeLimit,a)||(n.model.msgSizeLimit=a),p(a)}),i()()()(),t(67,"mat-dialog-actions",9)(68,"button",10),x("click",function(){return d(u),p(n.create())}),l(69,"Create Queue"),i(),t(70,"button",11),l(71,"Cancel"),i()()}e&2&&(r(8),f("ngModel",n.model.name),r(4),f("ngModel",n.model.manager),r(),s("ngForOf",n.managers),r(4),f("ngModel",n.model.type),r(),s("ngForOf",n.typeItems),r(4),f("ngModel",n.model.commit),r(),s("ngForOf",n.commitWhenItems),r(4),f("ngModel",n.model.ack),r(),s("ngForOf",n.ackItems),r(4),f("ngModel",n.model.putBack),r(),s("ngForOf",n.putBackItems),r(4),f("ngModel",n.model.autoDestroy),r(),s("ngForOf",n.autoDestroyItems),r(4),f("ngModel",n.model.ackTimeout),r(4),f("ngModel",n.model.msgTimeout),r(4),f("ngModel",n.model.putBackDelay),r(4),f("ngModel",n.model.delay),r(4),f("ngModel",n.model.clientLimit),r(4),f("ngModel",n.model.msgLimit),r(4),f("ngModel",n.model.msgSizeLimit))},dependencies:[E,me,ue,de,se,ne,oe,Z,te,ie,$,ee],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0 16px 0 0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]})};function Qe(o,m){o&1&&(t(0,"em"),l(1,"No Ack Timeout"),i())}function ke(o,m){if(o&1&&(t(0,"em"),l(1),i()),o&2){let e=C().$implicit;r(),M("",e.info.ackTimeout," ms Timeout")}}function Te(o,m){o&1&&(t(0,"span"),l(1,"Unlimited"),i())}function Ie(o,m){o&1&&(t(0,"span"),l(1,"No Timeout"),i())}function De(o,m){if(o&1&&(t(0,"em"),l(1),D(2,"timespan"),i()),o&2){let e=C().$implicit;r(),M("",z(2,1,e.info.msgTimeout)," Timeout")}}function Pe(o,m){o&1&&(t(0,"span"),l(1,"No Putback delay"),i())}function Ve(o,m){if(o&1&&(t(0,"span"),l(1),i()),o&2){let e=C().$implicit;r(),M("",e.info.putBackDelay," ms Putback Delay")}}function Oe(o,m){o&1&&(t(0,"em"),l(1,"No Delay between msgs"),i())}function qe(o,m){if(o&1&&(t(0,"em"),l(1),i()),o&2){let e=C().$implicit;r(),M("",e.info.delayBetweenMsgs," ms Delay between msgs")}}function We(o,m){if(o&1&&(t(0,"div",16),L(1,"div",17),t(2,"div",18)(3,"span")(4,"a",19),l(5),i()(),t(6,"em"),l(7),i()(),t(8,"div",20)(9,"span"),l(10),i()(),t(11,"div",21)(12,"span")(13,"b"),l(14),i(),l(15," + "),t(16,"b"),l(17),i(),l(18," Messages "),i(),t(19,"em"),l(20),i()(),t(21,"div",22)(22,"span"),l(23),i(),v(24,Qe,2,0,"em",23)(25,ke,2,1,"em",23),i(),t(26,"div",24)(27,"span"),l(28),i(),t(29,"em"),l(30),D(31,"date"),i()(),t(32,"div",21),v(33,Te,2,0,"span",23)(34,Ie,2,0,"span",23)(35,De,3,3,"em",23),i(),t(36,"div",20),v(37,Pe,2,0,"span",23)(38,Ve,2,1,"span",23)(39,Oe,2,0,"em",23)(40,qe,2,1,"em",23),i()()),o&2){let e=m.$implicit;r(4),s("routerLink",j("/queue/",e.info.name)),r(),g(e.info.name),r(2),g(e.info.topic),r(3),g(e.info.manager),r(4),g(e.stats.storedMsgs+e.stats.storedPrioMsgs+e.stats.processingMsgs),r(3),g(e.stats.ackPendingMsgs),r(3),M("",e.stats.consumers," Consumers"),r(3),g(e.info.acknowledge),r(),s("ngIf",e.info.ackTimeout==0),r(),s("ngIf",e.info.ackTimeout>0),r(3),g(e.info.autoDestroy),r(2),M("Created at ",H(31,20,e.info.createdDate*1e3,"yyyy-MM-dd HH:mm")),r(3),s("ngIf",e.info.messageLimit==0),r(),s("ngIf",e.info.messageLimit>0),r(),s("ngIf",e.info.msgTimeout>0),r(2),s("ngIf",e.info.putBackDelay==0),r(),s("ngIf",e.info.putBackDelay>0),r(),s("ngIf",e.info.delayBetweenMsgs==0),r(),s("ngIf",e.info.delayBetweenMsgs>0)}}function Be(o,m){if(o&1){let e=h();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),x("click",function(){d(e);let u=C();return p(u.create())}),i()(),t(5,"div",6),l(6," Name "),t(7,"em"),l(8),i()(),t(9,"div",7),l(10," Manager "),t(11,"a",8),x("click",function(){d(e);let u=C();return p(u.viewManagers())}),l(12,"Defined Managers"),i()(),t(13,"div",9),l(14,"Messages"),i(),t(15,"div",10),l(16,"Acknowledge"),i(),t(17,"div",11),l(18,"Auto\xA0Destroy"),i(),t(19,"div",9),l(20,"Message\xA0Limit"),i(),t(21,"div",7),l(22,"PutBack / Delay"),i()(),t(23,"div",12),v(24,We,41,23,"div",13),i()(),t(25,"div",14)(26,"button",15),x("click",function(){d(e);let u=C();return p(u.create())}),l(27,"Create New Queue"),i()()()}if(o&2){let e=C();r(8),M("(",e.queues.length," Queues)"),r(16),s("ngForOf",e.queues)}}var I=class o extends Y{constructor(e,n){super();this.queueService=e;this.dialog=n}queues=[];ngOnInit(){return P(this,null,function*(){this.queueService.list().subscribe(e=>this.queues=e.body),this.subscribeToListRefresh().subscribe(()=>this.queueService.list().subscribe(e=>this.queues=e.body))})}create(){this.dialog.open(T,{width:"600px"}).componentInstance.onconfirmed.pipe(S(1)).subscribe(u=>{u&&this.queueService.create(u).subscribe(c=>{this.ngOnInit()})})}viewManagers(){this.queueService.getManagers().subscribe(e=>{let u="Defined manager names are: "+e.body.join(", ");alert(u)})}static \u0275fac=function(n){return new(n||o)(w(Q),w(re))};static \u0275cmp=b({type:o,selectors:[["app-queues"]],standalone:!1,features:[N],decls:1,vars:1,consts:[["class","queues",4,"ngIf"],[1,"queues"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Queue",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx16"],[1,"small","ml18",3,"click"],[1,"th","fx10"],[1,"th","fx12"],[1,"th","fx14"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"trow"],[1,"td","fx40px"],[1,"td","fx20"],[3,"routerLink"],[1,"td","fx16"],[1,"td","fx10"],[1,"td","fx12"],[4,"ngIf"],[1,"td","fx14"]],template:function(n,u){n&1&&v(0,Be,28,2,"div",0),n&2&&s("ngIf",u.queues)},dependencies:[E,J,K,U,ce],styles:[".queues[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.queues[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}"]})};var fe=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=B({type:o});static \u0275inj=W({imports:[G,le,pe,ae,X.forChild([{path:"",component:I}])]})};export{fe as QueuesModule};
