function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{TDBs:function(e,t,i){"use strict";i.r(t),i.d(t,"DashboardModule",(function(){return P}));var r=i("ofXK"),a=i("mrSG"),n=i("MO+k"),o=i.n(n),s=i("HIds"),d=i("l5mm"),b=i("T0KO"),c=i("fXoL"),u=i("s4Wa"),l=i("gReq"),v=i("s1Za"),p=i("b1cu"),f=i("MMFR");function h(e,t){if(1&e&&(c.Ob(0,"div",4),c.Ob(1,"div",10),c.Ob(2,"div",11),c.Ob(3,"div",12),c.jc(4,"Stored Queue Messages"),c.Nb(),c.Ob(5,"div",13),c.jc(6),c.Nb(),c.Nb(),c.Ob(7,"div",11),c.Ob(8,"div",12),c.jc(9,"Published Queue Messages"),c.Nb(),c.Ob(10,"div",13),c.jc(11),c.Nb(),c.Nb(),c.Ob(12,"div",11),c.Ob(13,"div",12),c.jc(14,"Consumed Queue Messages"),c.Nb(),c.Ob(15,"div",13),c.jc(16),c.Nb(),c.Nb(),c.Ob(17,"div",11),c.Ob(18,"div",12),c.jc(19,"Sent Direct Messages"),c.Nb(),c.Ob(20,"div",13),c.jc(21),c.Nb(),c.Nb(),c.Ob(22,"div",11),c.Ob(23,"div",12),c.jc(24,"Delivered Direct Messages"),c.Nb(),c.Ob(25,"div",13),c.jc(26),c.Nb(),c.Nb(),c.Ob(27,"div",11),c.Ob(28,"div",12),c.jc(29,"Direct Responses"),c.Nb(),c.Ob(30,"div",13),c.jc(31),c.Nb(),c.Nb(),c.Ob(32,"div",11),c.Ob(33,"div",12),c.jc(34,"Published Router Messages"),c.Nb(),c.Ob(35,"div",13),c.jc(36),c.Nb(),c.Nb(),c.Ob(37,"div",11),c.Ob(38,"div",12),c.jc(39,"Delivered Router Messages"),c.Nb(),c.Ob(40,"div",13),c.jc(41),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e){var i=c.Yb(2);c.zb(6),c.kc(i.dashboard.queueMessages.stored+i.dashboard.queueMessages.storedPrio),c.zb(5),c.kc(i.dashboard.queueMessages.received),c.zb(5),c.kc(i.dashboard.queueMessages.delivery),c.zb(5),c.kc(i.dashboard.otherMessages.directMessage),c.zb(5),c.kc(i.dashboard.otherMessages.directDelivery),c.zb(5),c.kc(i.dashboard.otherMessages.directResponse),c.zb(5),c.kc(i.dashboard.otherMessages.routerPublish),c.zb(5),c.kc(i.dashboard.otherMessages.routerOk)}}function O(e,t){if(1&e&&(c.Ob(0,"div",1),c.Ob(1,"div",2),c.Ob(2,"h3",3),c.jc(3,"Message Statistics"),c.Nb(),c.ic(4,h,42,8,"div",9),c.Nb(),c.Nb()),2&e){var i=c.Yb();c.zb(4),c.cc("ngIf",i.dashboard)}}function N(e,t){if(1&e&&(c.Ob(0,"span"),c.jc(1),c.Nb()),2&e){var i=t.$implicit;c.zb(1),c.kc(i)}}function g(e,t){if(1&e&&(c.Ob(0,"div",1),c.Ob(1,"div",2),c.Ob(2,"h3",3),c.jc(3,"Server Information"),c.Nb(),c.Ob(4,"div",4),c.Ob(5,"div",10),c.Ob(6,"div",11),c.Ob(7,"div",12),c.jc(8,"Service Lifetime"),c.Nb(),c.Ob(9,"div",13),c.jc(10),c.Nb(),c.Nb(),c.Ob(11,"div",11),c.Ob(12,"div",12),c.jc(13,"Hostname"),c.Nb(),c.Ob(14,"div",13),c.ic(15,N,2,1,"span",14),c.Nb(),c.Nb(),c.Ob(16,"div",11),c.Ob(17,"div",12),c.jc(18,"Online Clients"),c.Nb(),c.Ob(19,"div",13),c.jc(20),c.Nb(),c.Nb(),c.Ob(21,"div",11),c.Ob(22,"div",15),c.jc(23,"Connected incoming node count. Incoming nodes send the messages they received to this instance."),c.Nb(),c.Ob(24,"div",12),c.jc(25,"Incoming Nodes"),c.Nb(),c.Ob(26,"div",13),c.jc(27),c.Nb(),c.Nb(),c.Ob(28,"div",11),c.Ob(29,"div",15),c.jc(30,"Connected outgoing node count. When a message is received, it's sent to outgoing nodes."),c.Nb(),c.Ob(31,"div",12),c.jc(32,"Outgoing Nodes"),c.Nb(),c.Ob(33,"div",13),c.jc(34),c.Nb(),c.Nb(),c.Ob(35,"div",11),c.Ob(36,"div",12),c.jc(37,"Max Queue Limit"),c.Nb(),c.Ob(38,"div",13),c.jc(39),c.Zb(40,"unlimited"),c.Nb(),c.Nb(),c.Ob(41,"div",11),c.Ob(42,"div",12),c.jc(43,"Max Router Limit"),c.Nb(),c.Ob(44,"div",13),c.jc(45),c.Zb(46,"unlimited"),c.Nb(),c.Nb(),c.Ob(47,"div",11),c.Ob(48,"div",12),c.jc(49,"Auto Queue Creation"),c.Nb(),c.Ob(50,"div",13),c.jc(51),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e){var i=c.Yb();c.zb(10),c.kc(i.lifetime),c.zb(5),c.cc("ngForOf",i.dashboard.server.hosts),c.zb(5),c.kc(i.dashboard.server.onlineClients),c.zb(7),c.kc(i.dashboard.server.incomingNodes),c.zb(7),c.kc(i.dashboard.server.outgoingNodes),c.zb(5),c.kc(c.ac(40,8,i.dashboard.serverOptions.queueLimit)),c.zb(6),c.kc(c.ac(46,10,i.dashboard.serverOptions.routerLimit)),c.zb(6),c.kc(i.dashboard.serverOptions.autoQueueCreation)}}function m(e,t){if(1&e&&(c.Ob(0,"em"),c.jc(1),c.Nb()),2&e){var i=c.Yb(2);c.zb(1),c.lc("(",i.dashboard.queueOptions.ackTimeout," ms timeout)")}}function y(e,t){1&e&&(c.Ob(0,"div",13),c.jc(1,"No Timeout"),c.Nb())}function j(e,t){if(1&e&&(c.Ob(0,"div",13),c.jc(1),c.Nb()),2&e){var i=c.Yb(2);c.zb(1),c.lc(" ",i.dashboard.queueOptions.msgTimeout," milliseconds ")}}function R(e,t){1&e&&(c.Ob(0,"div",13),c.jc(1,"No Delay"),c.Nb())}function k(e,t){if(1&e&&(c.Ob(0,"div",13),c.jc(1),c.Nb()),2&e){var i=c.Yb(2);c.zb(1),c.lc(" ",i.dashboard.queueOptions.delayBetweenMsgs," milliseconds ")}}function C(e,t){1&e&&(c.Ob(0,"div",13),c.jc(1,"No Delay"),c.Nb())}function w(e,t){if(1&e&&(c.Ob(0,"div",13),c.jc(1),c.Nb()),2&e){var i=c.Yb(2);c.zb(1),c.lc(" ",i.dashboard.queueOptions.putbackDelay," milliseconds ")}}function z(e,t){if(1&e&&(c.Ob(0,"div",1),c.Ob(1,"div",2),c.Ob(2,"h3",3),c.jc(3,"Default Queue Options"),c.Nb(),c.Ob(4,"div",4),c.Ob(5,"div",10),c.Ob(6,"div",11),c.Ob(7,"div",12),c.jc(8,"Status"),c.Nb(),c.Ob(9,"div",13),c.jc(10),c.Nb(),c.Nb(),c.Ob(11,"div",11),c.Ob(12,"div",12),c.jc(13,"Acknowledge"),c.Nb(),c.Ob(14,"div",13),c.jc(15),c.ic(16,m,2,1,"em",16),c.Nb(),c.Nb(),c.Ob(17,"div",11),c.Ob(18,"div",12),c.jc(19,"Message Timeout"),c.Nb(),c.ic(20,y,2,0,"div",17),c.ic(21,j,2,1,"div",17),c.Nb(),c.Ob(22,"div",11),c.Ob(23,"div",12),c.jc(24,"Message Limit"),c.Nb(),c.Ob(25,"div",13),c.jc(26),c.Zb(27,"unlimited"),c.Ob(28,"em"),c.jc(29),c.Zb(30,"filesize"),c.Nb(),c.Nb(),c.Nb(),c.Ob(31,"div",11),c.Ob(32,"div",12),c.jc(33,"Subscribers Limit"),c.Nb(),c.Ob(34,"div",13),c.jc(35),c.Zb(36,"unlimited"),c.Nb(),c.Nb(),c.Ob(37,"div",11),c.Ob(38,"div",12),c.jc(39,"Delay Between Messages"),c.Nb(),c.ic(40,R,2,0,"div",17),c.ic(41,k,2,1,"div",17),c.Nb(),c.Ob(42,"div",11),c.Ob(43,"div",12),c.jc(44,"Put Back Delay"),c.Nb(),c.ic(45,C,2,0,"div",17),c.ic(46,w,2,1,"div",17),c.Nb(),c.Ob(47,"div",11),c.Ob(48,"div",12),c.jc(49,"Auto Destroy"),c.Nb(),c.Ob(50,"div",13),c.jc(51),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e){var i=c.Yb();c.zb(10),c.kc(i.dashboard.queueOptions.status),c.zb(5),c.lc(" ",i.dashboard.queueOptions.ack," "),c.zb(1),c.cc("ngIf",i.dashboard.queueOptions.ackTimeout>0),c.zb(4),c.cc("ngIf",0==i.dashboard.queueOptions.msgTimeout),c.zb(1),c.cc("ngIf",i.dashboard.queueOptions.msgTimeout>0),c.zb(5),c.lc(" ",c.ac(27,13,i.dashboard.queueOptions.msgLimit)," "),c.zb(3),c.lc("(Size Limit: ",c.ac(30,15,i.dashboard.queueOptions.msgSizeLimit),")"),c.zb(6),c.kc(c.ac(36,17,i.dashboard.queueOptions.clientLimit)),c.zb(5),c.cc("ngIf",0==i.dashboard.queueOptions.delayBetweenMsgs),c.zb(1),c.cc("ngIf",i.dashboard.queueOptions.delayBetweenMsgs>0),c.zb(4),c.cc("ngIf",0==i.dashboard.queueOptions.putbackDelay),c.zb(1),c.cc("ngIf",i.dashboard.queueOptions.putbackDelay>0),c.zb(5),c.kc(i.dashboard.queueOptions.autoDestroy)}}var M,D,_=((M=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,r,a){var n;return _classCallCheck(this,i),(n=t.call(this)).queueGraphService=e,n.messageGraphService=r,n.dashboardService=a,n.deliveryChart=null,n.msgChart=null,n.storeChart=null,n}return _createClass(i,[{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:this.on(Object(d.a)(5e3)).subscribe((function(){return Object(a.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardService.load().then((function(e){return t.dashboard=e})),e.next=3,this.loadCharts();case 3:case"end":return e.stop()}}),e,this)})))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardService.load().then((function(e){return i.dashboard=e})),e.next=3,this.loadCharts();case 3:t=new b.a,this.on(Object(d.a)(1e3)).subscribe((function(){if(i.dashboard){var e=(new Date).getTime()/1e3;i.lifetime=t.transform(e,i.dashboard.server.startedDate)}}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"loadCharts",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queueGraphService.load();case 2:return t=e.sent,e.next=5,this.messageGraphService.load();case 5:i=e.sent,this.deliveryChart=new o.a(document.getElementById("delivery-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getDeliveryChartData(t),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.storeChart=new o.a(document.getElementById("store-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getStoreChartData(t),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.msgChart=new o.a(document.getElementById("msg-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getMessageChartData(i),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}});case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getDeliveryChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Received",borderColor:"#444",data:e.data.map((function(e){return e.received})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Delivered",borderColor:"#1070af",data:e.data.map((function(e){return e.delivery})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Ack",borderColor:"#10b02a",data:e.data.map((function(e){return e.ack})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Neg. Ack",borderColor:"#a020c0",data:e.data.map((function(e){return e.nack})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Unack",borderColor:"#999",data:e.data.map((function(e){return e.unack})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Error",borderColor:"#ff0000",data:e.data.map((function(e){return e.error})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}},{key:"getStoreChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Msgs",borderColor:"#104090",data:e.data.map((function(e){return e.stored})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"High Prio Msgs",borderColor:"#f07000",data:e.data.map((function(e){return e.storedPrio})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Pending for Ack",borderColor:"#aa2080",data:e.data.map((function(e){return e.pending})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Timeout",borderColor:"#cc3333",data:e.data.map((function(e){return e.timeout})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}},{key:"getMessageChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Direct Sent",borderColor:"#1070c0",data:e.data.map((function(e){return e.directMessage})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Response",borderColor:"#907010",data:e.data.map((function(e){return e.directResponse})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Delivery",borderColor:"#10a050",data:e.data.map((function(e){return e.directDelivery})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct No Receiver",borderColor:"#8010e0",data:e.data.map((function(e){return e.directNoReceiver})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Publish",borderColor:"#606090",data:e.data.map((function(e){return e.routerPublish})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Received",borderColor:"#20caca",data:e.data.map((function(e){return e.routerOk})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router No Receiver",borderColor:"#e02255",data:e.data.map((function(e){return e.routerFailed})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}}]),i}(s.a)).\u0275fac=function(e){return new(e||M)(c.Jb(u.a),c.Jb(l.a),c.Jb(v.a))},M.\u0275cmp=c.Db({type:M,selectors:[["app-dashboard"]],features:[c.wb],decls:22,vars:4,consts:[[1,"dashboard",3,"hidden"],[1,"dashboard-portlet"],[1,"portlet"],[1,"portlet-title"],[1,"portlet-body"],["id","store-chart"],["class","dashboard-portlet",4,"ngIf"],["id","delivery-chart"],["id","msg-chart"],["class","portlet-body",4,"ngIf"],[1,"key-value-table"],[1,"kvt-row"],[1,"kvt-key"],[1,"kvt-value"],[4,"ngFor","ngForOf"],[1,"kvt-info"],[4,"ngIf"],["class","kvt-value",4,"ngIf"]],template:function(e,t){1&e&&(c.Ob(0,"div",0),c.Ob(1,"div",1),c.Ob(2,"div",2),c.Ob(3,"h3",3),c.jc(4,"Stored Messages"),c.Nb(),c.Ob(5,"div",4),c.Kb(6,"canvas",5),c.Nb(),c.Nb(),c.Nb(),c.ic(7,O,5,1,"div",6),c.Ob(8,"div",1),c.Ob(9,"div",2),c.Ob(10,"h3",3),c.jc(11,"Queue Messages and Deliveries"),c.Nb(),c.Ob(12,"div",4),c.Kb(13,"canvas",7),c.Nb(),c.Nb(),c.Nb(),c.ic(14,g,52,12,"div",6),c.Ob(15,"div",1),c.Ob(16,"div",2),c.Ob(17,"h3",3),c.jc(18,"Direct and Route Messages and Deliveries"),c.Nb(),c.Ob(19,"div",4),c.Kb(20,"canvas",8),c.Nb(),c.Nb(),c.Nb(),c.ic(21,z,52,19,"div",6),c.Nb()),2&e&&(c.cc("hidden",null==t.dashboard),c.zb(7),c.cc("ngIf",t.dashboard),c.zb(7),c.cc("ngIf",t.dashboard),c.zb(7),c.cc("ngIf",t.dashboard))},directives:[r.j,r.i],pipes:[p.a,f.a],styles:[".dashboard[_ngcontent-%COMP%]{min-width:380px;max-width:1270px;width:70%;margin:auto;display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start;flex-wrap:wrap;padding-bottom:50px}.dashboard-portlet[_ngcontent-%COMP%]{flex:0 1 50%}.dashboard-portlet.wide[_ngcontent-%COMP%]{flex:0 1 100%!important}.dashboard-portlet[_ngcontent-%COMP%]   .portlet-body[_ngcontent-%COMP%]{height:350px}"]}),M),x=i("tyNb"),T=i("F4lh"),P=((D=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:D}),D.\u0275inj=c.Gb({factory:function(e){return new(e||D)},imports:[[r.b,T.a,x.e.forChild([{path:"",component:_}])]]}),D)}}]);