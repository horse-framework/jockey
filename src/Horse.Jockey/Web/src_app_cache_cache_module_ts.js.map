{"version":3,"file":"src_app_cache_cache_module_ts.js","mappings":"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","sources":["./src/app/cache/cache-create-modal/cache-create-modal.component.ts","./src/app/cache/cache-create-modal/cache-create-modal.component.html","./src/app/cache/cache-view-modal/cache-view-modal.component.ts","./src/app/cache/cache-view-modal/cache-view-modal.component.html","./src/app/cache/cache.component.ts","./src/app/cache/cache.component.html","./src/app/cache/cache.module.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { CacheForm } from 'src/app/cache/models/cache-form';\n\n@Component({\n  selector: 'app-cache-create-modal',\n  templateUrl: './cache-create-modal.component.html',\n  styleUrls: ['./cache-create-modal.component.css']\n})\nexport class CacheCreateModalComponent implements OnInit, OnDestroy {\n\n  model: CacheForm;\n\n  private _onconfirmed: Subject<CacheForm> = new Subject<CacheForm>();\n  get onconfirmed(): Observable<CacheForm> { return this._onconfirmed; }\n  private _confirmed: boolean = false;\n\n\n  constructor() {\n    this.model = {\n      key: '',\n      duration: 60,\n      expirationWarning: 0,\n      tags: [],\n      tagsAll: '',\n      content: ''\n    }\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    if (!this._confirmed)\n      this._onconfirmed.next(null);\n  }\n\n  create(): void {\n\n    this.model.key = this.model.key.trim();\n    if (this.model.key.length < 1) {\n      return;\n    }\n\n    if (this.model.tagsAll.length > 0) {\n      this.model.tags = this.model.tagsAll\n        .split(',')\n        .map(x => x.trim())\n        .filter(x => x.length > 0);\n    }\n\n    this._confirmed = true;\n    this._onconfirmed.next(this.model);\n  }\n}\n","<h2 class=\"title\" mat-dialog-title>Create Cache Item</h2>\n<mat-dialog-content class=\"content\">\n    <div>\n        <div class=\"form-item\">\n            <label>Key</label>\n            <input placeholder=\"Cache Key\" class=\"jockey-text\" type=\"text\" [(ngModel)]=\"model.key\" />\n        </div>\n        <div class=\"form-item\">\n            <label>Duration</label>\n            <input placeholder=\"Duration in seconds\" class=\"jockey-text\" type=\"number\" [(ngModel)]=\"model.duration\" />\n        </div>\n        <div class=\"form-item\">\n            <label>Warning Duration</label>\n            <input placeholder=\"Zero for disabled. In seconds.\" class=\"jockey-text\" type=\"number\" [(ngModel)]=\"model.expirationWarning\" />\n        </div>\n        <div class=\"form-item\">\n            <label>Tags</label>\n            <input placeholder=\"Type multiple tags with comma seperator\" class=\"jockey-text\" type=\"text\" [(ngModel)]=\"model.tagsAll\" />\n        </div>\n        <div class=\"form-item\">\n            <label>Value</label>\n            <textarea placeholder=\"Cache Item Content\" class=\"jockey-text\" type=\"text\" [(ngModel)]=\"model.content\"></textarea>\n        </div>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions class=\"buttons\">\n    <button (click)=\"create()\" mat-button mat-dialog-close class=\"modal-btn btn-green\">Create</button>\n    <button mat-button mat-dialog-close class=\"modal-btn btn-grey\">Cancel</button>\n</mat-dialog-actions>","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CacheInfo } from 'src/app/cache/models/cache-info';\nimport { CacheService } from 'src/app/cache/services/cache.service';\n\n@Component({\n  selector: 'app-cache-view-modal',\n  templateUrl: './cache-view-modal.component.html',\n  styleUrls: ['./cache-view-modal.component.css']\n})\nexport class CacheViewModalComponent implements OnInit {\n\n  model: CacheInfo = null;\n\n  constructor(private cacheService: CacheService, private dialog: MatDialog) { }\n\n  ngOnInit(): void {\n  }\n\n  remove() {\n    this.cacheService\n      .remove(this.model.key)\n      .then(() => {\n        this.dialog.closeAll(); //todo: state mgmt required for list\n      });\n  }\n}\n","<h2 class=\"title\" mat-dialog-title>{{model?.key}}</h2>\n<mat-dialog-content class=\"content\">\n    <div *ngIf=\"model\" class=\"cache-value\">\n\n        <div class=\"key-value-table\">\n            <div class=\"kvt-row\">\n                <div class=\"kvt-key-narrow\">Expiration</div>\n                <div class=\"kvt-value\">{{(model.expiration*1000) | date: 'yyyy-MM-dd HH:mm:ss'}}</div>\n            </div>\n            <div class=\"kvt-row\">\n                <div class=\"kvt-key-narrow\">Warning Time</div>\n                <div class=\"kvt-value\">{{(model.warningDate*1000) | date: 'yyyy-MM-dd HH:mm:ss'}}</div>\n            </div>\n            <div class=\"kvt-row\">\n                <div class=\"kvt-key-narrow\">Warn Count</div>\n                <div class=\"kvt-value\">{{model.warnCount}}</div>\n            </div>\n            <div class=\"kvt-row\">\n                <div class=\"kvt-key-narrow\">Tags</div>\n                <div class=\"kvt-value\">{{model.tags.join(', ')}}</div>\n            </div>\n        </div>\n\n        <textarea readonly style=\"cursor: text;\">{{model.value}}</textarea>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions class=\"buttons\">\n    <button mat-button mat-dialog-close class=\"modal-btn btn-grey\">Close</button>\n    <button mat-button (click)=\"remove()\" class=\"modal-btn btn-red\">Remove</button>\n</mat-dialog-actions>","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { BaseComponent } from 'src/lib/base-component';\nimport { CacheInfo } from 'src/app/cache/models/cache-info';\nimport { CacheService } from 'src/app/cache/services/cache.service';\nimport { CacheViewModalComponent } from './cache-view-modal/cache-view-modal.component';\nimport { CacheCreateModalComponent } from './cache-create-modal/cache-create-modal.component';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-cache',\n  templateUrl: './cache.component.html',\n  styleUrls: ['./cache.component.css']\n})\nexport class CacheComponent extends BaseComponent implements OnInit {\n\n  caches: CacheInfo[]\n\n  constructor(private cacheService: CacheService, private dialog: MatDialog) {\n    super();\n  }\n\n  async ngOnInit() {\n    this.caches = await this.cacheService.list();\n  }\n\n  remove(key: string) {\n    this.cacheService.remove(key).then(async () => {\n      this.caches = await this.cacheService.list();\n    })\n  }\n\n  async view(key: string) {\n    var value = await this.cacheService.get(key);\n    if (value) {\n      let dialogRef = this.dialog.open(CacheViewModalComponent, { width: '600px' });\n      let component = <CacheViewModalComponent>dialogRef.componentInstance;\n      component.model = value;\n    }\n  }\n\n  create(): void {\n\n    let dialogRef = this.dialog.open(CacheCreateModalComponent, { width: '600px' });\n    let component = <CacheCreateModalComponent>dialogRef.componentInstance;\n\n    component.onconfirmed\n      .pipe(take(1))\n      .subscribe(value => {\n        if (value) {\n          this.cacheService.create(value.key, value.content, value.duration, value.expirationWarning, value.tags).then(success => {\n            if (success) {\n              this.ngOnInit();\n            }\n          })\n        }\n      });\n  }\n}\n","<div class=\"cache\" *ngIf=\"caches\">\n    <div class=\"table\">\n        <div class=\"thead\">\n            <div class=\"th fx40px\">\n                <a class=\"fa fa-solid fa-plus hreverse\" (click)=\"create()\" title=\"Create New Item\"></a>\n            </div>\n            <div class=\"th fx20\">Key</div>\n            <div class=\"th fx14\">Expiration</div>\n            <div class=\"th fx14\">Warning Date</div>\n            <div class=\"th fx12\">Warn Count</div>\n            <div class=\"th fx26\">Tags</div>\n            <div class=\"th fx12 tright\" style=\"display: block;\">Action</div>\n        </div>\n        <div class=\"tbody\">\n            <div class=\"trow\" *ngFor=\"let cache of caches\">\n                <div class=\"td fx40px\"></div>\n                <div class=\"td fx20\">\n                    <span>{{cache.key}}</span>\n                </div>\n                <div class=\"td fx14\">\n                    <span>{{(cache.expiration * 1000) | date: 'yyyy-MM-dd HH:mm:ss'}} UTC</span>\n                </div>\n                <div class=\"td fx14\">\n                    <span>{{(cache.warningDate * 1000) | date: 'yyyy-MM-dd HH:mm:ss'}} UTC</span>\n                </div>\n                <div class=\"td fx12\">\n                    <span>{{cache.warnCount}}</span>\n                </div>\n                <div class=\"td fx26\">\n                    <span>{{cache.tags.join(', ')}}</span>\n                </div>\n                <div class=\"td fx12 tright\">\n                    <button (click)=\"remove(cache.key)\" class=\"cache-button red\">Remove</button>\n                    <button (click)=\"view(cache.key)\" class=\"cache-button blue\">View</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CacheComponent } from './cache.component';\nimport { RouterModule } from '@angular/router';\nimport { PipesModule } from '../layout/pipes/pipes.module';\nimport { CacheViewModalComponent } from './cache-view-modal/cache-view-modal.component';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { CacheCreateModalComponent } from './cache-create-modal/cache-create-modal.component';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n    declarations: [CacheComponent, CacheViewModalComponent, CacheCreateModalComponent],\n    imports: [\n        CommonModule,\n        PipesModule,\n        MatDialogModule,\n        FormsModule,\n        RouterModule.forChild([{ path: '', component: CacheComponent }])\n    ],\n    schemas: [\n        CUSTOM_ELEMENTS_SCHEMA\n    ]\n})\nexport class CacheModule { }\n"],"names":[],"sourceRoot":"webpack:///"}