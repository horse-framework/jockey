function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,r=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{TDBs:function(e,t,i){"use strict";i.r(t),i.d(t,"DashboardModule",(function(){return T}));var r=i("ofXK"),a=i("mrSG"),n=i("MO+k"),o=i.n(n),s=i("HIds"),d=i("l5mm"),b=i("T0KO"),c=i("fXoL"),u=i("s4Wa"),l=i("gReq"),v=i("s1Za"),p=i("b1cu"),f=i("MMFR");function h(e,t){if(1&e&&(c.Qb(0,"div",4),c.Qb(1,"div",10),c.Qb(2,"div",11),c.Qb(3,"div",12),c.qc(4,"Stored Queue Messages"),c.Pb(),c.Qb(5,"div",13),c.qc(6),c.Pb(),c.Pb(),c.Qb(7,"div",11),c.Qb(8,"div",12),c.qc(9,"Published Queue Messages"),c.Pb(),c.Qb(10,"div",13),c.qc(11),c.Pb(),c.Pb(),c.Qb(12,"div",11),c.Qb(13,"div",12),c.qc(14,"Consumed Queue Messages"),c.Pb(),c.Qb(15,"div",13),c.qc(16),c.Pb(),c.Pb(),c.Qb(17,"div",11),c.Qb(18,"div",12),c.qc(19,"Sent Direct Messages"),c.Pb(),c.Qb(20,"div",13),c.qc(21),c.Pb(),c.Pb(),c.Qb(22,"div",11),c.Qb(23,"div",12),c.qc(24,"Delivered Direct Messages"),c.Pb(),c.Qb(25,"div",13),c.qc(26),c.Pb(),c.Pb(),c.Qb(27,"div",11),c.Qb(28,"div",12),c.qc(29,"Direct Responses"),c.Pb(),c.Qb(30,"div",13),c.qc(31),c.Pb(),c.Pb(),c.Qb(32,"div",11),c.Qb(33,"div",12),c.qc(34,"Published Router Messages"),c.Pb(),c.Qb(35,"div",13),c.qc(36),c.Pb(),c.Pb(),c.Qb(37,"div",11),c.Qb(38,"div",12),c.qc(39,"Delivered Router Messages"),c.Pb(),c.Qb(40,"div",13),c.qc(41),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e){var i=c.ac(2);c.Ab(6),c.rc(i.dashboard.queueMessages.stored+i.dashboard.queueMessages.storedPrio),c.Ab(5),c.rc(i.dashboard.queueMessages.received),c.Ab(5),c.rc(i.dashboard.queueMessages.delivery),c.Ab(5),c.rc(i.dashboard.otherMessages.directMessage),c.Ab(5),c.rc(i.dashboard.otherMessages.directDelivery),c.Ab(5),c.rc(i.dashboard.otherMessages.directResponse),c.Ab(5),c.rc(i.dashboard.otherMessages.routerPublish),c.Ab(5),c.rc(i.dashboard.otherMessages.routerOk)}}function P(e,t){if(1&e&&(c.Qb(0,"div",1),c.Qb(1,"div",2),c.Qb(2,"h3",3),c.qc(3,"Message Statistics"),c.Pb(),c.oc(4,h,42,8,"div",9),c.Pb(),c.Pb()),2&e){var i=c.ac();c.Ab(4),c.ec("ngIf",i.dashboard)}}function g(e,t){if(1&e&&(c.Qb(0,"span"),c.qc(1),c.Pb()),2&e){var i=t.$implicit;c.Ab(1),c.rc(i)}}function m(e,t){if(1&e&&(c.Qb(0,"div",1),c.Qb(1,"div",2),c.Qb(2,"h3",3),c.qc(3,"Server Information"),c.Pb(),c.Qb(4,"div",4),c.Qb(5,"div",10),c.Qb(6,"div",11),c.Qb(7,"div",12),c.qc(8,"Service Lifetime"),c.Pb(),c.Qb(9,"div",13),c.qc(10),c.Pb(),c.Pb(),c.Qb(11,"div",11),c.Qb(12,"div",12),c.qc(13,"Hostname"),c.Pb(),c.Qb(14,"div",13),c.oc(15,g,2,1,"span",14),c.Pb(),c.Pb(),c.Qb(16,"div",11),c.Qb(17,"div",12),c.qc(18,"Online Clients"),c.Pb(),c.Qb(19,"div",13),c.qc(20),c.Pb(),c.Pb(),c.Qb(21,"div",11),c.Qb(22,"div",15),c.qc(23,"Connected incoming node count. Incoming nodes send the messages they received to this instance."),c.Pb(),c.Qb(24,"div",12),c.qc(25,"Incoming Nodes"),c.Pb(),c.Qb(26,"div",13),c.qc(27),c.Pb(),c.Pb(),c.Qb(28,"div",11),c.Qb(29,"div",15),c.qc(30,"Connected outgoing node count. When a message is received, it's sent to outgoing nodes."),c.Pb(),c.Qb(31,"div",12),c.qc(32,"Outgoing Nodes"),c.Pb(),c.Qb(33,"div",13),c.qc(34),c.Pb(),c.Pb(),c.Qb(35,"div",11),c.Qb(36,"div",12),c.qc(37,"Max Queue Limit"),c.Pb(),c.Qb(38,"div",13),c.qc(39),c.bc(40,"unlimited"),c.Pb(),c.Pb(),c.Qb(41,"div",11),c.Qb(42,"div",12),c.qc(43,"Max Router Limit"),c.Pb(),c.Qb(44,"div",13),c.qc(45),c.bc(46,"unlimited"),c.Pb(),c.Pb(),c.Qb(47,"div",11),c.Qb(48,"div",12),c.qc(49,"Auto Queue Creation"),c.Pb(),c.Qb(50,"div",13),c.qc(51),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e){var i=c.ac();c.Ab(10),c.rc(i.lifetime),c.Ab(5),c.ec("ngForOf",i.dashboard.server.hosts),c.Ab(5),c.rc(i.dashboard.server.onlineClients),c.Ab(7),c.rc(i.dashboard.server.incomingNodes),c.Ab(7),c.rc(i.dashboard.server.outgoingNodes),c.Ab(5),c.rc(c.cc(40,8,i.dashboard.serverOptions.queueLimit)),c.Ab(6),c.rc(c.cc(46,10,i.dashboard.serverOptions.routerLimit)),c.Ab(6),c.rc(i.dashboard.serverOptions.autoQueueCreation)}}function Q(e,t){if(1&e&&(c.Qb(0,"em"),c.qc(1),c.Pb()),2&e){var i=c.ac(2);c.Ab(1),c.sc("(",i.dashboard.queueOptions.ackTimeout," ms timeout)")}}function q(e,t){1&e&&(c.Qb(0,"div",13),c.qc(1,"No Timeout"),c.Pb())}function y(e,t){if(1&e&&(c.Qb(0,"div",13),c.qc(1),c.Pb()),2&e){var i=c.ac(2);c.Ab(1),c.sc(" ",i.dashboard.queueOptions.msgTimeout," milliseconds ")}}function R(e,t){1&e&&(c.Qb(0,"div",13),c.qc(1,"No Delay"),c.Pb())}function O(e,t){if(1&e&&(c.Qb(0,"div",13),c.qc(1),c.Pb()),2&e){var i=c.ac(2);c.Ab(1),c.sc(" ",i.dashboard.queueOptions.delayBetweenMsgs," milliseconds ")}}function C(e,t){1&e&&(c.Qb(0,"div",13),c.qc(1,"No Delay"),c.Pb())}function A(e,t){if(1&e&&(c.Qb(0,"div",13),c.qc(1),c.Pb()),2&e){var i=c.ac(2);c.Ab(1),c.sc(" ",i.dashboard.queueOptions.putbackDelay," milliseconds ")}}function k(e,t){if(1&e&&(c.Qb(0,"div",1),c.Qb(1,"div",2),c.Qb(2,"h3",3),c.qc(3,"Default Queue Options"),c.Pb(),c.Qb(4,"div",4),c.Qb(5,"div",10),c.Qb(6,"div",11),c.Qb(7,"div",12),c.qc(8,"Status"),c.Pb(),c.Qb(9,"div",13),c.qc(10),c.Pb(),c.Pb(),c.Qb(11,"div",11),c.Qb(12,"div",12),c.qc(13,"Acknowledge"),c.Pb(),c.Qb(14,"div",13),c.qc(15),c.oc(16,Q,2,1,"em",16),c.Pb(),c.Pb(),c.Qb(17,"div",11),c.Qb(18,"div",12),c.qc(19,"Message Timeout"),c.Pb(),c.oc(20,q,2,0,"div",17),c.oc(21,y,2,1,"div",17),c.Pb(),c.Qb(22,"div",11),c.Qb(23,"div",12),c.qc(24,"Message Limit"),c.Pb(),c.Qb(25,"div",13),c.qc(26),c.bc(27,"unlimited"),c.Qb(28,"em"),c.qc(29),c.bc(30,"filesize"),c.Pb(),c.Pb(),c.Pb(),c.Qb(31,"div",11),c.Qb(32,"div",12),c.qc(33,"Subscribers Limit"),c.Pb(),c.Qb(34,"div",13),c.qc(35),c.bc(36,"unlimited"),c.Pb(),c.Pb(),c.Qb(37,"div",11),c.Qb(38,"div",12),c.qc(39,"Delay Between Messages"),c.Pb(),c.oc(40,R,2,0,"div",17),c.oc(41,O,2,1,"div",17),c.Pb(),c.Qb(42,"div",11),c.Qb(43,"div",12),c.qc(44,"Put Back Delay"),c.Pb(),c.oc(45,C,2,0,"div",17),c.oc(46,A,2,1,"div",17),c.Pb(),c.Qb(47,"div",11),c.Qb(48,"div",12),c.qc(49,"Auto Destroy"),c.Pb(),c.Qb(50,"div",13),c.qc(51),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e){var i=c.ac();c.Ab(10),c.rc(i.dashboard.queueOptions.status),c.Ab(5),c.sc(" ",i.dashboard.queueOptions.ack," "),c.Ab(1),c.ec("ngIf",i.dashboard.queueOptions.ackTimeout>0),c.Ab(4),c.ec("ngIf",0==i.dashboard.queueOptions.msgTimeout),c.Ab(1),c.ec("ngIf",i.dashboard.queueOptions.msgTimeout>0),c.Ab(5),c.sc(" ",c.cc(27,13,i.dashboard.queueOptions.msgLimit)," "),c.Ab(3),c.sc("(Size Limit: ",c.cc(30,15,i.dashboard.queueOptions.msgSizeLimit),")"),c.Ab(6),c.rc(c.cc(36,17,i.dashboard.queueOptions.clientLimit)),c.Ab(5),c.ec("ngIf",0==i.dashboard.queueOptions.delayBetweenMsgs),c.Ab(1),c.ec("ngIf",i.dashboard.queueOptions.delayBetweenMsgs>0),c.Ab(4),c.ec("ngIf",0==i.dashboard.queueOptions.putbackDelay),c.Ab(1),c.ec("ngIf",i.dashboard.queueOptions.putbackDelay>0),c.Ab(5),c.rc(i.dashboard.queueOptions.autoDestroy)}}var M,w,D=((M=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,r,a){var n;return _classCallCheck(this,i),(n=t.call(this)).queueGraphService=e,n.messageGraphService=r,n.dashboardService=a,n.deliveryChart=null,n.msgChart=null,n.storeChart=null,n}return _createClass(i,[{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:this.on(Object(d.a)(5e3)).subscribe((function(){return Object(a.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardService.load().then((function(e){return t.dashboard=e})),e.next=3,this.loadCharts();case 3:case"end":return e.stop()}}),e,this)})))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardService.load().then((function(e){return i.dashboard=e})),e.next=3,this.loadCharts();case 3:t=new b.a,this.on(Object(d.a)(1e3)).subscribe((function(){if(i.dashboard){var e=(new Date).getTime()/1e3;i.lifetime=t.transform(e,i.dashboard.server.startedDate)}}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"loadCharts",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queueGraphService.load();case 2:return t=e.sent,e.next=5,this.messageGraphService.load();case 5:i=e.sent,this.deliveryChart=new o.a(document.getElementById("delivery-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getDeliveryChartData(t),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.storeChart=new o.a(document.getElementById("store-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getStoreChartData(t),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}}),this.msgChart=new o.a(document.getElementById("msg-chart"),{type:"line",hover:{mode:"nearest",intersect:!0},data:this.getMessageChartData(i),options:{animation:{duration:0},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{precision:0}}]}}});case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getDeliveryChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Received",borderColor:"#444",data:e.data.map((function(e){return e.received})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Delivered",borderColor:"#1070af",data:e.data.map((function(e){return e.delivery})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Ack",borderColor:"#10b02a",data:e.data.map((function(e){return e.ack})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Neg. Ack",borderColor:"#a020c0",data:e.data.map((function(e){return e.nack})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Unack",borderColor:"#999",data:e.data.map((function(e){return e.unack})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Error",borderColor:"#ff0000",data:e.data.map((function(e){return e.error})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}},{key:"getStoreChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Msgs",borderColor:"#104090",data:e.data.map((function(e){return e.stored})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"High Prio Msgs",borderColor:"#f07000",data:e.data.map((function(e){return e.storedPrio})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Pending for Ack",borderColor:"#aa2080",data:e.data.map((function(e){return e.pending})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Timeout",borderColor:"#cc3333",data:e.data.map((function(e){return e.timeout})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}},{key:"getMessageChartData",value:function(e){return{labels:e.labels,datasets:[{label:"Direct Sent",borderColor:"#1070c0",data:e.data.map((function(e){return e.directMessage})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Response",borderColor:"#907010",data:e.data.map((function(e){return e.directResponse})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct Delivery",borderColor:"#10a050",data:e.data.map((function(e){return e.directDelivery})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Direct No Receiver",borderColor:"#8010e0",data:e.data.map((function(e){return e.directNoReceiver})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Publish",borderColor:"#606090",data:e.data.map((function(e){return e.routerPublish})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router Received",borderColor:"#20caca",data:e.data.map((function(e){return e.routerOk})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2},{label:"Router No Receiver",borderColor:"#e02255",data:e.data.map((function(e){return e.routerFailed})),fill:!1,pointRadius:1,pointHitRadius:8,lineTension:.2,borderWidth:2}]}}}]),i}(s.a)).\u0275fac=function(e){return new(e||M)(c.Kb(u.a),c.Kb(l.a),c.Kb(v.a))},M.\u0275cmp=c.Eb({type:M,selectors:[["app-dashboard"]],features:[c.xb],decls:22,vars:4,consts:[[1,"dashboard",3,"hidden"],[1,"dashboard-portlet"],[1,"portlet"],[1,"portlet-title"],[1,"portlet-body"],["id","store-chart"],["class","dashboard-portlet",4,"ngIf"],["id","delivery-chart"],["id","msg-chart"],["class","portlet-body",4,"ngIf"],[1,"key-value-table"],[1,"kvt-row"],[1,"kvt-key"],[1,"kvt-value"],[4,"ngFor","ngForOf"],[1,"kvt-info"],[4,"ngIf"],["class","kvt-value",4,"ngIf"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"h3",3),c.qc(4,"Stored Messages"),c.Pb(),c.Qb(5,"div",4),c.Lb(6,"canvas",5),c.Pb(),c.Pb(),c.Pb(),c.oc(7,P,5,1,"div",6),c.Qb(8,"div",1),c.Qb(9,"div",2),c.Qb(10,"h3",3),c.qc(11,"Queue Messages and Deliveries"),c.Pb(),c.Qb(12,"div",4),c.Lb(13,"canvas",7),c.Pb(),c.Pb(),c.Pb(),c.oc(14,m,52,12,"div",6),c.Qb(15,"div",1),c.Qb(16,"div",2),c.Qb(17,"h3",3),c.qc(18,"Direct and Route Messages and Deliveries"),c.Pb(),c.Qb(19,"div",4),c.Lb(20,"canvas",8),c.Pb(),c.Pb(),c.Pb(),c.oc(21,k,52,19,"div",6),c.Pb()),2&e&&(c.ec("hidden",null==t.dashboard),c.Ab(7),c.ec("ngIf",t.dashboard),c.Ab(7),c.ec("ngIf",t.dashboard),c.Ab(7),c.ec("ngIf",t.dashboard))},directives:[r.k,r.j],pipes:[p.a,f.a],styles:[".dashboard[_ngcontent-%COMP%]{min-width:380px;max-width:1270px;width:70%;margin:auto;display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start;flex-wrap:wrap;padding-bottom:50px}.dashboard-portlet[_ngcontent-%COMP%]{flex:0 1 50%}.dashboard-portlet.wide[_ngcontent-%COMP%]{flex:0 1 100%!important}.dashboard-portlet[_ngcontent-%COMP%]   .portlet-body[_ngcontent-%COMP%]{height:350px}"]}),M),_=i("tyNb"),x=i("F4lh"),T=((w=function e(){_classCallCheck(this,e)}).\u0275mod=c.Ib({type:w}),w.\u0275inj=c.Hb({factory:function(e){return new(e||w)},imports:[[r.b,x.a,_.e.forChild([{path:"",component:D}])]]}),w)}}]);