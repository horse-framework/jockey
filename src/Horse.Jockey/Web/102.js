"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[102],{2102:(z,T,p)=>{p.r(T),p.d(T,{ChannelsModule:()=>R});var C=p(9808),P=p(823),v=p(6663),M=p(4182),S=p(1887),U=p(655),J=p(2962),j=p(8929),e=p(6435);let O=(()=>{class c{constructor(){this._onconfirmed=new j.xQ,this._confirmed=!1,this.model={name:"",topic:"",autoDestroy:!0,autoDestroyIdleSeconds:15,clientLimit:0,messageSizeLimit:0,sendLastMessageAsInitial:!1}}get onconfirmed(){return this._onconfirmed}ngOnInit(){}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-channel-create-modal"]],decls:39,vars:7,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"form-item"],["placeholder","Channel Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Left blank if you don't need","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Zero for unlimited","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"kvt-row"],[1,"kvt-key-narrow"],[1,"kvt-value"],["type","checkbox",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Left blank for server default","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"]],template:function(l,d){1&l&&(e.TgZ(0,"h2",0),e._uU(1,"Create New Channel"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div")(4,"div",2)(5,"label"),e._uU(6,"Channel Name"),e.qZA(),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(m){return d.model.name=m}),e.qZA()(),e.TgZ(8,"div",2)(9,"label"),e._uU(10,"Topic"),e.qZA(),e.TgZ(11,"input",4),e.NdJ("ngModelChange",function(m){return d.model.topic=m}),e.qZA()(),e.TgZ(12,"div",2)(13,"label"),e._uU(14,"Client Limit"),e.qZA(),e.TgZ(15,"input",5),e.NdJ("ngModelChange",function(m){return d.model.clientLimit=m}),e.qZA()(),e.TgZ(16,"div",2)(17,"label"),e._uU(18,"Message Size Limit (in bytes)"),e.qZA(),e.TgZ(19,"input",5),e.NdJ("ngModelChange",function(m){return d.model.messageSizeLimit=m}),e.qZA()(),e.TgZ(20,"div",6)(21,"div",7),e._uU(22,"Use Initial Message"),e.qZA(),e.TgZ(23,"div",8)(24,"input",9),e.NdJ("ngModelChange",function(m){return d.model.sendLastMessageAsInitial=m}),e.qZA()()(),e.TgZ(25,"div",6)(26,"div",7),e._uU(27,"Auto Destroy"),e.qZA(),e.TgZ(28,"div",8)(29,"input",9),e.NdJ("ngModelChange",function(m){return d.model.autoDestroy=m}),e.qZA()()(),e.TgZ(30,"div",2)(31,"label"),e._uU(32,"Auto Destroy Idle (in seconds)"),e.qZA(),e.TgZ(33,"input",10),e.NdJ("ngModelChange",function(m){return d.model.autoDestroyIdleSeconds=m}),e.qZA()()()(),e.TgZ(34,"mat-dialog-actions",11)(35,"button",12),e.NdJ("click",function(){return d.create()}),e._uU(36,"Create Channel"),e.qZA(),e.TgZ(37,"button",13),e._uU(38,"Cancel"),e.qZA()()),2&l&&(e.xp6(7),e.Q6J("ngModel",d.model.name),e.xp6(4),e.Q6J("ngModel",d.model.topic),e.xp6(4),e.Q6J("ngModel",d.model.clientLimit),e.xp6(4),e.Q6J("ngModel",d.model.messageSizeLimit),e.xp6(5),e.Q6J("ngModel",d.model.sendLastMessageAsInitial),e.xp6(5),e.Q6J("ngModel",d.model.autoDestroy),e.xp6(4),e.Q6J("ngModel",d.model.autoDestroyIdleSeconds))},directives:[v.uh,v.xY,M.Fj,M.JJ,M.On,M.wV,M.Wl,v.H8,v.ZT],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]}),c})();var N=p(2986),A=p(970),q=p(6072);function D(c,g){1&c&&(e.TgZ(0,"em"),e._uU(1,"No Initial Message"),e.qZA())}function L(c,g){if(1&c){const l=e.EpF();e.TgZ(0,"span")(1,"a",13),e.NdJ("click",function(){e.CHM(l);const h=e.oxw().$implicit;return e.oxw(2).viewInitialMessage(h)}),e._uU(2,"View"),e.qZA()()}}function E(c,g){if(1&c&&(e.TgZ(0,"div",14),e._UZ(1,"div",15),e.TgZ(2,"div",16)(3,"span")(4,"a",17),e._uU(5),e.qZA()()(),e.TgZ(6,"div",18)(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"div",19)(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div",19)(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"div",19)(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"div",19)(19,"span"),e._uU(20),e.qZA()(),e.TgZ(21,"div",20)(22,"span"),e._uU(23),e.ALo(24,"date"),e.qZA()(),e.TgZ(25,"div",19),e.YNc(26,D,2,0,"em",21),e.YNc(27,L,3,0,"span",21),e.qZA()()),2&c){const l=g.$implicit;e.xp6(4),e.MGl("routerLink","/channel/",l.name,""),e.xp6(1),e.Oqu(l.name),e.xp6(3),e.Oqu(l.topic),e.xp6(3),e.Oqu(l.status),e.xp6(3),e.Oqu(l.publish),e.xp6(3),e.Oqu(l.receive),e.xp6(3),e.hij("",l.subscriberCount," Online"),e.xp6(3),e.Oqu(e.xi3(24,10,1e3*l.lastPublishDate,"yyyy-MM-dd HH:mm:ss")),e.xp6(3),e.Q6J("ngIf",!l.hasInitialMessage),e.xp6(1),e.Q6J("ngIf",l.hasInitialMessage)}}function x(c,g){if(1&c){const l=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),e.NdJ("click",function(){return e.CHM(l),e.oxw().create()}),e.qZA()(),e.TgZ(5,"div",6),e._uU(6," Name "),e.TgZ(7,"em"),e._uU(8),e.qZA()(),e.TgZ(9,"div",7),e._uU(10,"Topic"),e.qZA(),e.TgZ(11,"div",8),e._uU(12,"Status"),e.qZA(),e.TgZ(13,"div",8),e._uU(14,"Published"),e.qZA(),e.TgZ(15,"div",8),e._uU(16,"Received"),e.qZA(),e.TgZ(17,"div",8),e._uU(18,"Subscribers"),e.qZA(),e.TgZ(19,"div",9),e._uU(20,"Last Publish Date"),e.qZA(),e.TgZ(21,"div",8),e._uU(22,"Initial Message"),e.qZA()(),e.TgZ(23,"div",10),e.YNc(24,E,28,13,"div",11),e.qZA()(),e.TgZ(25,"div",12)(26,"button",13),e.NdJ("click",function(){return e.CHM(l),e.oxw().create()}),e._uU(27,"Create New Channel"),e.qZA()()()}if(2&c){const l=e.oxw();e.xp6(8),e.hij("(",l.channels.length," Channels)"),e.xp6(16),e.Q6J("ngForOf",l.channels)}}let F=(()=>{class c extends J.H{constructor(l,d){super(),this.dialog=l,this.channelService=d}ngOnInit(){return(0,U.mG)(this,void 0,void 0,function*(){this.channels=yield this.channelService.list()})}create(){this.dialog.open(O,{width:"400px"}).componentInstance.onconfirmed.pipe((0,N.q)(1)).subscribe(h=>{h&&this.channelService.create(h).then(m=>{this.ngOnInit()})})}viewInitialMessage(l){this.dialog.open(A.n,{width:"800px"}).componentInstance.load(l.name)}}return c.\u0275fac=function(l){return new(l||c)(e.Y36(v.uw),e.Y36(q.T))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-channels"]],features:[e.qOj],decls:1,vars:1,consts:[["class","channels",4,"ngIf"],[1,"channels"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Channel",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx14"],[1,"th","fx10"],[1,"th","fx12"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"trow"],[1,"td","fx40px"],[1,"td","fx20"],[3,"routerLink"],[1,"td","fx14"],[1,"td","fx10"],[1,"td","fx12"],[4,"ngIf"]],template:function(l,d){1&l&&e.YNc(0,x,28,2,"div",0),2&l&&e.Q6J("ngIf",d.channels)},directives:[C.O5,C.sg,P.yS],pipes:[C.uU],styles:[".channels[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.channels[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}"]}),c})(),Q=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[C.ez,v.Is,S.D]]}),c})(),R=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[C.ez,S.D,v.Is,M.u5,Q,P.Bz.forChild([{path:"",component:F}])]]}),c})()},655:(z,T,p)=>{function j(n,t,o,r){return new(o||(o=Promise))(function(a,s){function f(y){try{u(r.next(y))}catch(Z){s(Z)}}function b(y){try{u(r.throw(y))}catch(Z){s(Z)}}function u(y){y.done?a(y.value):function i(a){return a instanceof o?a:new o(function(s){s(a)})}(y.value).then(f,b)}u((r=r.apply(n,t||[])).next())})}p.d(T,{mG:()=>j})}}]);