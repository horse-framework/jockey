"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[632],{8632:(D,O,g)=>{g.r(O),g.d(O,{RoutersModule:()=>B});var h=g(9808),A=g(655),T=g(2986),j=g(2962),q=g(8929);class U{}var t=g(6435),y=g(6663),v=g(4182);function Z(u,d){if(1&u&&(t.TgZ(0,"option",11),t._uU(1),t.qZA()),2&u){const a=d.$implicit;t.Q6J("ngValue",a.value),t.xp6(1),t.Oqu(a.text)}}let S=(()=>{class u{constructor(){this.model=new U,this.routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different binding"},{value:"Distribute",text:"Distribute: Each message is sent to all bindings"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active binding"}],this._onconfirmed=new q.xQ,this._confirmed=!1}get onconfirmed(){return this._onconfirmed}ngOnInit(){}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-router-create-modal"]],decls:19,vars:3,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"router-form","scroll"],["queueForm",""],[1,"form-item"],["placeholder","Router Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"]],template:function(a,e){1&a&&(t.TgZ(0,"h2",0),t._uU(1,"Create New Router"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2,3)(5,"div",4)(6,"label"),t._uU(7,"Router Name"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(r){return e.model.name=r}),t.qZA()(),t.TgZ(9,"div",4)(10,"label"),t._uU(11,"Router Method"),t.qZA(),t.TgZ(12,"select",6),t.NdJ("ngModelChange",function(r){return e.model.method=r}),t.YNc(13,Z,2,2,"option",7),t.qZA()()()(),t.TgZ(14,"mat-dialog-actions",8)(15,"button",9),t.NdJ("click",function(){return e.create()}),t._uU(16,"Create Router"),t.qZA(),t.TgZ(17,"button",10),t._uU(18,"Cancel"),t.qZA()()),2&a&&(t.xp6(8),t.Q6J("ngModel",e.model.name),t.xp6(4),t.Q6J("ngModel",e.model.method),t.xp6(1),t.Q6J("ngForOf",e.routerMethods))},directives:[y.uh,y.xY,v.Fj,v.JJ,v.On,v.EJ,h.sg,v.YN,v.Kr,y.H8,y.ZT],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.router-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]}),u})();var C=g(1632),M=g(823);let E=(()=>{class u{transform(a){let e=a.type;if("Direct"==e){if(!a.target.startsWith("@"))return"Id";{let n=a.target.indexOf(":");if(n>0)return a.target.substr(1,n-1)}}if("Http"==e)switch(a.contentType){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"PATCH";case 4:return"DELETE"}return e.indexOf("Queue")>=0?"Queue":e}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275pipe=t.Yjl({name:"bindingType",type:u,pure:!0}),u})();function I(u,d){if(1&u&&(t.ynx(0),t._UZ(1,"i"),t.TgZ(2,"a",25),t._uU(3),t.qZA(),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.BQk()),2&u){const a=t.oxw(2).$implicit;t.xp6(1),t.ekj("green",a.enabled)("red",!a.enabled),t.xp6(1),t.MGl("routerLink","/router/",a.name,""),t.xp6(1),t.hij(" ",a.name," "),t.xp6(2),t.Oqu(a.method)}}function F(u,d){if(1&u&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&u){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a.contentType)}}function x(u,d){if(1&u&&(t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,I,6,7,"ng-container",20),t.qZA(),t.TgZ(3,"div",21)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"div",22)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"div",23)(10,"small"),t._uU(11),t.ALo(12,"bindingType"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"div",22),t.YNc(16,F,2,1,"span",20),t.qZA(),t.TgZ(17,"div",22)(18,"span"),t._uU(19),t.qZA()(),t.TgZ(20,"div",24)(21,"span"),t._uU(22),t.qZA()()()),2&u){const a=d.$implicit,e=d.index,n=t.oxw().$implicit;t.ekj("first-row",0==e)("last-row",e==n.bindings.length-1),t.xp6(2),t.Q6J("ngIf",0==e),t.xp6(3),t.Oqu(a.name),t.xp6(3),t.Oqu(a.type),t.xp6(3),t.Oqu(t.lcZ(12,12,a)),t.xp6(3),t.Oqu(a.displayTarget),t.xp6(2),t.Q6J("ngIf","Direct"==a.type),t.xp6(3),t.Oqu(a.interaction),t.xp6(3),t.Oqu(a.priority)}}function J(u,d){if(1&u&&(t.TgZ(0,"div",18)(1,"div",19),t._UZ(2,"i"),t.TgZ(3,"a",25),t._uU(4),t.qZA(),t.TgZ(5,"small"),t._uU(6),t.qZA()(),t.TgZ(7,"div",21),t._UZ(8,"span"),t.qZA(),t.TgZ(9,"div",22),t._UZ(10,"span"),t.qZA(),t._UZ(11,"div",23)(12,"div",22)(13,"div",22)(14,"div",24),t.qZA()),2&u){const a=t.oxw().$implicit;t.xp6(2),t.ekj("green",a.enabled)("red",!a.enabled),t.xp6(1),t.MGl("routerLink","/router/",a.name,""),t.xp6(1),t.hij(" ",a.name," "),t.xp6(2),t.Oqu(a.method)}}function N(u,d){if(1&u&&(t.ynx(0),t._UZ(1,"div",15),t.YNc(2,x,23,14,"div",16),t.YNc(3,J,15,7,"div",17),t.BQk()),2&u){const a=d.$implicit;t.xp6(2),t.Q6J("ngForOf",a.bindings),t.xp6(1),t.Q6J("ngIf",0==a.bindings.length)}}function Q(u,d){if(1&u){const a=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),t.NdJ("click",function(){return t.CHM(a),t.oxw().create()}),t.qZA()(),t.TgZ(5,"div",6),t._uU(6," Router "),t.TgZ(7,"em"),t._uU(8),t.qZA()(),t.TgZ(9,"div",7),t._uU(10,"Binding Name"),t.qZA(),t.TgZ(11,"div",8),t._uU(12,"Binding Type"),t.qZA(),t.TgZ(13,"div",9),t._uU(14,"Binding Target"),t.qZA(),t.TgZ(15,"div",8),t._uU(16,"Content Type"),t.qZA(),t.TgZ(17,"div",8),t._uU(18,"Interaction"),t.qZA(),t.TgZ(19,"div",10),t._uU(20,"Priority"),t.qZA()(),t.TgZ(21,"div",11),t.YNc(22,N,4,2,"ng-container",12),t.qZA()(),t.TgZ(23,"div",13)(24,"button",14),t.NdJ("click",function(){return t.CHM(a),t.oxw().create()}),t._uU(25,"Create New Router"),t.qZA()()()}if(2&u){const a=t.oxw();t.xp6(8),t.hij("(",a.routers.length," Routers)"),t.xp6(14),t.Q6J("ngForOf",a.routers)}}let Y=(()=>{class u extends j.H{constructor(a,e){super(),this.routerService=a,this.dialog=e}ngOnInit(){return(0,A.mG)(this,void 0,void 0,function*(){let a=yield this.routerService.list();a.forEach(e=>{e.bindings.forEach(n=>{n.displayTarget=n.target.startsWith("@")?n.target.substr(n.target.indexOf(":")+1):n.target})}),this.routers=a})}create(){this.dialog.open(S,{width:"600px"}).componentInstance.onconfirmed.pipe((0,T.q)(1)).subscribe(n=>{n&&this.routerService.create(n).then(r=>{this.ngOnInit()})})}}return u.\u0275fac=function(a){return new(a||u)(t.Y36(C.n),t.Y36(y.uw))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-routes"]],features:[t.qOj],decls:1,vars:1,consts:[["class","routers",4,"ngIf"],[1,"routers"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Router",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx14"],[1,"th","fx10"],[1,"th","fx28"],[1,"th","fx8"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"td","fx40px"],["class","trow",3,"first-row","last-row",4,"ngFor","ngForOf"],["class","trow",4,"ngIf"],[1,"trow"],[1,"td","td-fr","fx20"],[4,"ngIf"],[1,"td","fx14"],[1,"td","fx10"],[1,"td","td-fr","fx28"],[1,"td","fx8"],[2,"margin-right","18px","font-weight","500","line-height","23px","font-size","14px",3,"routerLink"]],template:function(a,e){1&a&&t.YNc(0,Q,26,2,"div",0),2&a&&t.Q6J("ngIf",e.routers)},directives:[h.O5,h.sg,M.yS],pipes:[E],styles:[".routers[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.routers[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.create-router[_ngcontent-%COMP%]{text-align:center;padding:40px}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}"]}),u})();var P=g(1887);let B=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[h.ez,P.D,y.Is,v.u5,M.Bz.forChild([{path:"",component:Y}])]]}),u})()},655:(D,O,g)=>{function y(e,n,r,o){return new(r||(r=Promise))(function(i,l){function f(m){try{s(o.next(m))}catch(b){l(b)}}function _(m){try{s(o.throw(m))}catch(b){l(b)}}function s(m){m.done?i(m.value):function c(i){return i instanceof r?i:new r(function(l){l(i)})}(m.value).then(f,_)}s((o=o.apply(e,n||[])).next())})}g.d(O,{mG:()=>y})}}]);