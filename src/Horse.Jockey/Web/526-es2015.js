"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[526],{30526:function(e,t,n){n.r(t),n.d(t,{QueuesModule:function(){return I}});var o=n(38583),i=n(64762),u=n(15257),l=n(52962),s=n(79765),a=n(20945),c=n(45435);class g{constructor(){this.manager=null,this.commit=null,this.ack=null,this.type=null,this.autoDestroy=null,this.putBack=null,this.ackTimeout=null,this.msgTimeout=null,this.putBackDelay=null,this.delay=null,this.clientLimit=null,this.msgLimit=null,this.msgSizeLimit=null}}var r=n(33018),d=n(71636),m=n(90665);const f=["queueForm"];function p(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.text)}}function Z(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.text)}}function x(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.text)}}function q(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.text)}}function h(e,t){if(1&e&&(r.TgZ(0,"option",13),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("ngValue",e.value),r.xp6(1),r.Oqu(e.text)}}let A=(()=>{class e{constructor(){this.model=new g,this.commitWhenItems=[{value:null,text:"(Default)"},{value:"None",text:"None"},{value:"AfterReceived",text:"After server received the message"},{value:"AfterSaved",text:"After message is saved to disk"},{value:"AfterSent",text:"After message is sent to at least one consumer"},{value:"AfterAcknowledge",text:"After a consumer send ack to server"}],this.ackItems=[{value:null,text:"(Default)"},{value:"None",text:"Disable acknowledge system"},{value:"JustRequest",text:"Request acknowledge but keep sending messages to same consumer"},{value:"WaitForAcknowledge",text:"Do not send next message to same consumer before receive ack for previous"}],this.typeItems=[{value:null,text:"(Default)"},{value:"Push",text:"Push: All consumers receive same message from queue (automatically)"},{value:"RoundRobin",text:"Round Robin: Only one consumer receive same message (automatically)"},{value:"Pull",text:"Pull: Only one consumer receive same message but it should send pull request"}],this.autoDestroyItems=[{value:null,text:"(Default)"},{value:"Disabled",text:"Queue stays forever. It's removed only manually."},{value:"NoMessages",text:"Queue is destroyed if empty"},{value:"NoConsumers",text:"Queue is destroyed if there are no consumers (even not empty)"},{value:"Empty",text:"Queue is destroyed when it's empty and there are no consumers"}],this.putBackItems=[{value:null,text:"(Default)"},{value:"No",text:"Put back operations are disabled"},{value:"Priority",text:"Message is put back as first message (beginning of the queue)"},{value:"Regular",text:"Message is put back as last message (end of the queue)"}],this._onconfirmed=new s.xQ,this._confirmed=!1}get onconfirmed(){return this._onconfirmed}ngOnInit(){(0,a.F)(50).pipe((0,c.h)(()=>null!=this.queueForm),(0,u.q)(1)).subscribe(()=>{this.queueForm.nativeElement.querySelectorAll("select").forEach(e=>{e.getElementsByTagName("option")[0].selected=!0})})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-queue-create-modal"]],viewQuery:function(e,t){if(1&e&&r.Gf(f,5),2&e){let e;r.iGM(e=r.CRH())&&(t.queueForm=e.first)}},decls:71,vars:19,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"queue-form","scroll"],["queueForm",""],[1,"form-item"],["placeholder","Queue Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Left blank for server default","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["placeholder","Left blank for server default","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-confirm",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-cancel"],[3,"ngValue"]],template:function(e,t){1&e&&(r.TgZ(0,"h2",0),r._uU(1,"Create New Queue"),r.qZA(),r.TgZ(2,"mat-dialog-content",1),r.TgZ(3,"div",2,3),r.TgZ(5,"div",4),r.TgZ(6,"label"),r._uU(7,"Queue Name"),r.qZA(),r.TgZ(8,"input",5),r.NdJ("ngModelChange",function(e){return t.model.name=e}),r.qZA(),r.qZA(),r.TgZ(9,"div",4),r.TgZ(10,"label"),r._uU(11,"Queue Manager"),r.qZA(),r.TgZ(12,"input",6),r.NdJ("ngModelChange",function(e){return t.model.manager=e}),r.qZA(),r.qZA(),r.TgZ(13,"div",4),r.TgZ(14,"label"),r._uU(15,"Queue Type"),r.qZA(),r.TgZ(16,"select",7),r.NdJ("ngModelChange",function(e){return t.model.type=e}),r.YNc(17,p,2,2,"option",8),r.qZA(),r.qZA(),r.TgZ(18,"div",4),r.TgZ(19,"label"),r._uU(20,"Commit When"),r.qZA(),r.TgZ(21,"select",7),r.NdJ("ngModelChange",function(e){return t.model.commit=e}),r.YNc(22,Z,2,2,"option",8),r.qZA(),r.qZA(),r.TgZ(23,"div",4),r.TgZ(24,"label"),r._uU(25,"Acknowledge"),r.qZA(),r.TgZ(26,"select",7),r.NdJ("ngModelChange",function(e){return t.model.ack=e}),r.YNc(27,x,2,2,"option",8),r.qZA(),r.qZA(),r.TgZ(28,"div",4),r.TgZ(29,"label"),r._uU(30,"Put Back"),r.qZA(),r.TgZ(31,"select",7),r.NdJ("ngModelChange",function(e){return t.model.putBack=e}),r.YNc(32,q,2,2,"option",8),r.qZA(),r.qZA(),r.TgZ(33,"div",4),r.TgZ(34,"label"),r._uU(35,"Auto Destroy"),r.qZA(),r.TgZ(36,"select",7),r.NdJ("ngModelChange",function(e){return t.model.autoDestroy=e}),r.YNc(37,h,2,2,"option",8),r.qZA(),r.qZA(),r.TgZ(38,"div",4),r.TgZ(39,"label"),r._uU(40,"Acknowledge Timeout (in milliseconds)"),r.qZA(),r.TgZ(41,"input",9),r.NdJ("ngModelChange",function(e){return t.model.ackTimeout=e}),r.qZA(),r.qZA(),r.TgZ(42,"div",4),r.TgZ(43,"label"),r._uU(44,"Message Timeout (in seconds)"),r.qZA(),r.TgZ(45,"input",9),r.NdJ("ngModelChange",function(e){return t.model.msgTimeout=e}),r.qZA(),r.qZA(),r.TgZ(46,"div",4),r.TgZ(47,"label"),r._uU(48,"Put Back Delay (in milliseconds)"),r.qZA(),r.TgZ(49,"input",9),r.NdJ("ngModelChange",function(e){return t.model.putBackDelay=e}),r.qZA(),r.qZA(),r.TgZ(50,"div",4),r.TgZ(51,"label"),r._uU(52,"Delay Between Message Consumes (in milliseconds)"),r.qZA(),r.TgZ(53,"input",9),r.NdJ("ngModelChange",function(e){return t.model.delay=e}),r.qZA(),r.qZA(),r.TgZ(54,"div",4),r.TgZ(55,"label"),r._uU(56,"Allowed Maximum Consumers (0 for unlimited)"),r.qZA(),r.TgZ(57,"input",9),r.NdJ("ngModelChange",function(e){return t.model.clientLimit=e}),r.qZA(),r.qZA(),r.TgZ(58,"div",4),r.TgZ(59,"label"),r._uU(60,"Allowed Maximum Messages (0 for unlimited)"),r.qZA(),r.TgZ(61,"input",9),r.NdJ("ngModelChange",function(e){return t.model.msgLimit=e}),r.qZA(),r.qZA(),r.TgZ(62,"div",4),r.TgZ(63,"label"),r._uU(64,"Allowed Maximum Size for single message in bytes (0 for unlimited)"),r.qZA(),r.TgZ(65,"input",9),r.NdJ("ngModelChange",function(e){return t.model.msgSizeLimit=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(66,"mat-dialog-actions",10),r.TgZ(67,"button",11),r.NdJ("click",function(){return t.create()}),r._uU(68,"Create Queue"),r.qZA(),r.TgZ(69,"button",12),r._uU(70,"Cancel"),r.qZA(),r.qZA()),2&e&&(r.xp6(8),r.Q6J("ngModel",t.model.name),r.xp6(4),r.Q6J("ngModel",t.model.manager),r.xp6(4),r.Q6J("ngModel",t.model.type),r.xp6(1),r.Q6J("ngForOf",t.typeItems),r.xp6(4),r.Q6J("ngModel",t.model.commit),r.xp6(1),r.Q6J("ngForOf",t.commitWhenItems),r.xp6(4),r.Q6J("ngModel",t.model.ack),r.xp6(1),r.Q6J("ngForOf",t.ackItems),r.xp6(4),r.Q6J("ngModel",t.model.putBack),r.xp6(1),r.Q6J("ngForOf",t.putBackItems),r.xp6(4),r.Q6J("ngModel",t.model.autoDestroy),r.xp6(1),r.Q6J("ngForOf",t.autoDestroyItems),r.xp6(4),r.Q6J("ngModel",t.model.ackTimeout),r.xp6(4),r.Q6J("ngModel",t.model.msgTimeout),r.xp6(4),r.Q6J("ngModel",t.model.putBackDelay),r.xp6(4),r.Q6J("ngModel",t.model.delay),r.xp6(4),r.Q6J("ngModel",t.model.clientLimit),r.xp6(4),r.Q6J("ngModel",t.model.msgLimit),r.xp6(4),r.Q6J("ngModel",t.model.msgSizeLimit))},directives:[d.uh,d.xY,m.Fj,m.JJ,m.On,m.EJ,o.sg,m.wV,d.H8,d.ZT,m.YN,m.Kr],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:flex-start;align-content:flex-start;padding:15px 0}.modal-btn[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid;border-radius:2px;background-color:transparent;font-weight:500;font-size:14px;color:#f0f0f0;margin-left:16px}.btn-cancel[_ngcontent-%COMP%]{border-color:#777}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:#999}.btn-confirm[_ngcontent-%COMP%]{border-color:#10a040}.btn-confirm[_ngcontent-%COMP%]:hover{border-color:#10d060}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0 16px 0 0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]}),e})();var T=n(2625),v=n(72667),M=n(97966);function b(e,t){1&e&&(r.TgZ(0,"em"),r._uU(1,"No Ack Timeout"),r.qZA())}function y(e,t){if(1&e&&(r.TgZ(0,"em"),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij("",e.info.ackTimeout," ms Timeout")}}function _(e,t){1&e&&(r.TgZ(0,"span"),r._uU(1,"Unlimited"),r.qZA())}function k(e,t){1&e&&(r.TgZ(0,"span"),r._uU(1,"No Timeout"),r.qZA())}function C(e,t){if(1&e&&(r.TgZ(0,"em"),r._uU(1),r.ALo(2,"timespan"),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij("",r.lcZ(2,1,e.info.msgTimeout)," Timeout")}}function O(e,t){1&e&&(r.TgZ(0,"span"),r._uU(1,"No Putback delay"),r.qZA())}function J(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij("",e.info.putBackDelay," ms Putback Delay")}}function w(e,t){1&e&&(r.TgZ(0,"em"),r._uU(1,"No Delay between msgs"),r.qZA())}function U(e,t){if(1&e&&(r.TgZ(0,"em"),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij("",e.info.delayBetweenMsgs," ms Delay between msgs")}}function N(e,t){if(1&e&&(r.TgZ(0,"div",13),r.TgZ(1,"div",14),r.TgZ(2,"span"),r.TgZ(3,"a",15),r._uU(4),r.qZA(),r.qZA(),r.TgZ(5,"em"),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"div",16),r.TgZ(8,"span"),r._uU(9),r.qZA(),r.qZA(),r.TgZ(10,"div",17),r.TgZ(11,"span"),r.TgZ(12,"b"),r._uU(13),r.qZA(),r._uU(14," Messages"),r.qZA(),r.TgZ(15,"em"),r._uU(16),r.qZA(),r.qZA(),r.TgZ(17,"div",18),r.TgZ(18,"span"),r._uU(19),r.qZA(),r.YNc(20,b,2,0,"em",19),r.YNc(21,y,2,1,"em",19),r.qZA(),r.TgZ(22,"div",20),r.TgZ(23,"span"),r._uU(24),r.qZA(),r.TgZ(25,"em"),r._uU(26),r.ALo(27,"date"),r.qZA(),r.qZA(),r.TgZ(28,"div",17),r.YNc(29,_,2,0,"span",19),r.YNc(30,k,2,0,"span",19),r.YNc(31,C,3,3,"em",19),r.qZA(),r.TgZ(32,"div",16),r.YNc(33,O,2,0,"span",19),r.YNc(34,J,2,1,"span",19),r.YNc(35,w,2,0,"em",19),r.YNc(36,U,2,1,"em",19),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(3),r.MGl("routerLink","/queue/",e.info.name,""),r.xp6(1),r.Oqu(e.info.name),r.xp6(2),r.Oqu(e.info.topic),r.xp6(3),r.Oqu(e.info.manager),r.xp6(4),r.Oqu(e.stats.storedMsgs+e.stats.storedPrioMsgs+e.stats.processingMsgs),r.xp6(3),r.hij("",e.stats.consumers," Consumers"),r.xp6(3),r.Oqu(e.info.acknowledge),r.xp6(1),r.Q6J("ngIf",0==e.info.ackTimeout),r.xp6(1),r.Q6J("ngIf",e.info.ackTimeout>0),r.xp6(3),r.Oqu(e.info.autoDestroy),r.xp6(2),r.hij("Created at ",r.xi3(27,18,1e3*e.info.createdDate,"yyyy-MM-dd HH:mm"),""),r.xp6(3),r.Q6J("ngIf",0==e.info.messageLimit),r.xp6(1),r.Q6J("ngIf",e.info.messageLimit>0),r.xp6(1),r.Q6J("ngIf",e.info.msgTimeout>0),r.xp6(2),r.Q6J("ngIf",0==e.info.putBackDelay),r.xp6(1),r.Q6J("ngIf",e.info.putBackDelay>0),r.xp6(1),r.Q6J("ngIf",0==e.info.delayBetweenMsgs),r.xp6(1),r.Q6J("ngIf",e.info.delayBetweenMsgs>0)}}function Q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",1),r.TgZ(1,"div",2),r.TgZ(2,"div",3),r.TgZ(3,"div",4),r._uU(4,"Name"),r.qZA(),r.TgZ(5,"div",5),r._uU(6,"Manager"),r.qZA(),r.TgZ(7,"div",6),r._uU(8,"Messages"),r.qZA(),r.TgZ(9,"div",7),r._uU(10,"Acknowledge"),r.qZA(),r.TgZ(11,"div",8),r._uU(12,"Auto\xa0Destroy"),r.qZA(),r.TgZ(13,"div",6),r._uU(14,"Message\xa0Limit"),r.qZA(),r.TgZ(15,"div",5),r._uU(16,"PutBack / Delay"),r.qZA(),r.qZA(),r.TgZ(17,"div",9),r.YNc(18,N,37,21,"div",10),r.qZA(),r.qZA(),r.TgZ(19,"div",11),r.TgZ(20,"button",12),r.NdJ("click",function(){return r.CHM(e),r.oxw().create()}),r._uU(21,"Create New Queue"),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(18),r.Q6J("ngForOf",e.queues)}}let P=(()=>{class e extends l.H{constructor(e,t){super(),this.queueService=e,this.dialog=t}ngOnInit(){return(0,i.mG)(this,void 0,void 0,function*(){this.queues=yield this.queueService.list()})}create(){this.dialog.open(A,{width:"600px"}).componentInstance.onconfirmed.pipe((0,u.q)(1)).subscribe(e=>{e&&this.queueService.create(e).then(e=>{this.ngOnInit()})})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(T.g),r.Y36(d.uw))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-queues"]],features:[r.qOj],decls:1,vars:1,consts:[["class","queues",4,"ngIf"],[1,"queues"],[1,"table"],[1,"thead"],[1,"th","fx20"],[1,"th","fx16"],[1,"th","fx10"],[1,"th","fx12"],[1,"th","fx14"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"create-queue"],[3,"click"],[1,"trow"],[1,"td","fx20"],[3,"routerLink"],[1,"td","fx16"],[1,"td","fx10"],[1,"td","fx12"],[4,"ngIf"],[1,"td","fx14"]],template:function(e,t){1&e&&r.YNc(0,Q,22,1,"div",0),2&e&&r.Q6J("ngIf",t.queues)},directives:[o.O5,o.sg,v.yS],pipes:[o.uU,M.c],styles:[".queues[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.queues[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.create-queue[_ngcontent-%COMP%]{text-align:center;padding:40px}.create-queue[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.create-queue[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}"]}),e})();var D=n(91887);let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[o.ez,D.D,d.Is,m.u5,v.Bz.forChild([{path:"",component:P}])]]}),e})()},64762:function(e,t,n){function o(e,t,n,o){return new(n||(n=Promise))(function(i,u){function l(e){try{a(o.next(e))}catch(t){u(t)}}function s(e){try{a(o.throw(e))}catch(t){u(t)}}function a(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(l,s)}a((o=o.apply(e,t||[])).next())})}n.d(t,{mG:function(){return o}})}}]);