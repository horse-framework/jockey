"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[817],{1817:(L,M,_)=>{_.r(M),_.d(M,{QueuesModule:()=>d});var y=_(9808),w=_(655),x=_(2986),O=_(2962),J=_(8929),U=_(1715),N=_(2198);class b{constructor(){this.manager=null,this.commit=null,this.ack=null,this.type=null,this.autoDestroy=null,this.putBack=null,this.ackTimeout=null,this.msgTimeout=null,this.putBackDelay=null,this.delay=null,this.clientLimit=null,this.msgLimit=null,this.msgSizeLimit=null}}var e=_(6435),T=_(3349),C=_(6663),h=_(4182);const q=["queueForm"];function P(l,c){if(1&l&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("ngValue",o),e.xp6(1),e.Oqu(o)}}function j(l,c){if(1&l&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("ngValue",o.value),e.xp6(1),e.Oqu(o.text)}}function k(l,c){if(1&l&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("ngValue",o.value),e.xp6(1),e.Oqu(o.text)}}function Z(l,c){if(1&l&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("ngValue",o.value),e.xp6(1),e.Oqu(o.text)}}function S(l,c){if(1&l&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("ngValue",o.value),e.xp6(1),e.Oqu(o.text)}}function D(l,c){if(1&l&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("ngValue",o.value),e.xp6(1),e.Oqu(o.text)}}let I=(()=>{class l{constructor(o){this.queueService=o,this.model=new b,this.commitWhenItems=[{value:null,text:"(Default)"},{value:"None",text:"None"},{value:"AfterReceived",text:"After server received the message"},{value:"AfterSaved",text:"After message is saved to disk"},{value:"AfterSent",text:"After message is sent to at least one consumer"},{value:"AfterAcknowledge",text:"After a consumer send ack to server"}],this.ackItems=[{value:null,text:"(Default)"},{value:"None",text:"Disable acknowledge system"},{value:"JustRequest",text:"Request acknowledge but keep sending messages to same consumer"},{value:"WaitForAcknowledge",text:"Do not send next message to same consumer before receive ack for previous"}],this.typeItems=[{value:null,text:"(Default)"},{value:"Push",text:"Push: All consumers receive same message from queue (automatically)"},{value:"RoundRobin",text:"Round Robin: Only one consumer receive same message (automatically)"},{value:"Pull",text:"Pull: Only one consumer receive same message but it should send pull request"}],this.autoDestroyItems=[{value:null,text:"(Default)"},{value:"Disabled",text:"Queue stays forever. It's removed only manually."},{value:"NoMessages",text:"Queue is destroyed if empty"},{value:"NoConsumers",text:"Queue is destroyed if there are no consumers (even not empty)"},{value:"Empty",text:"Queue is destroyed when it's empty and there are no consumers"}],this.putBackItems=[{value:null,text:"(Default)"},{value:"No",text:"Put back operations are disabled"},{value:"Priority",text:"Message is put back as first message (beginning of the queue)"},{value:"Regular",text:"Message is put back as last message (end of the queue)"}],this.managers=[],this._onconfirmed=new J.xQ,this._confirmed=!1}get onconfirmed(){return this._onconfirmed}ngOnInit(){this.queueService.getManagers().then(o=>this.managers=o),(0,U.F)(50).pipe((0,N.h)(()=>null!=this.queueForm),(0,x.q)(1)).subscribe(()=>{this.queueForm.nativeElement.querySelectorAll("select").forEach(s=>{s.getElementsByTagName("option")[0].selected=!0})})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(T.g))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-queue-create-modal"]],viewQuery:function(o,s){if(1&o&&e.Gf(q,5),2&o){let g;e.iGM(g=e.CRH())&&(s.queueForm=g.first)}},decls:72,vars:20,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"queue-form","scroll"],["queueForm",""],[1,"form-item"],["placeholder","Queue Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["placeholder","Left blank for server default","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"]],template:function(o,s){1&o&&(e.TgZ(0,"h2",0),e._uU(1,"Create New Queue"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div",2,3)(5,"div",4)(6,"label"),e._uU(7,"Queue Name"),e.qZA(),e.TgZ(8,"input",5),e.NdJ("ngModelChange",function(f){return s.model.name=f}),e.qZA()(),e.TgZ(9,"div",4)(10,"label"),e._uU(11,"Queue Manager"),e.qZA(),e.TgZ(12,"select",6),e.NdJ("ngModelChange",function(f){return s.model.manager=f}),e.YNc(13,P,2,2,"option",7),e.qZA()(),e.TgZ(14,"div",4)(15,"label"),e._uU(16,"Queue Type"),e.qZA(),e.TgZ(17,"select",6),e.NdJ("ngModelChange",function(f){return s.model.type=f}),e.YNc(18,j,2,2,"option",7),e.qZA()(),e.TgZ(19,"div",4)(20,"label"),e._uU(21,"Commit When"),e.qZA(),e.TgZ(22,"select",6),e.NdJ("ngModelChange",function(f){return s.model.commit=f}),e.YNc(23,k,2,2,"option",7),e.qZA()(),e.TgZ(24,"div",4)(25,"label"),e._uU(26,"Acknowledge"),e.qZA(),e.TgZ(27,"select",6),e.NdJ("ngModelChange",function(f){return s.model.ack=f}),e.YNc(28,Z,2,2,"option",7),e.qZA()(),e.TgZ(29,"div",4)(30,"label"),e._uU(31,"Put Back"),e.qZA(),e.TgZ(32,"select",6),e.NdJ("ngModelChange",function(f){return s.model.putBack=f}),e.YNc(33,S,2,2,"option",7),e.qZA()(),e.TgZ(34,"div",4)(35,"label"),e._uU(36,"Auto Destroy"),e.qZA(),e.TgZ(37,"select",6),e.NdJ("ngModelChange",function(f){return s.model.autoDestroy=f}),e.YNc(38,D,2,2,"option",7),e.qZA()(),e.TgZ(39,"div",4)(40,"label"),e._uU(41,"Acknowledge Timeout (in milliseconds)"),e.qZA(),e.TgZ(42,"input",8),e.NdJ("ngModelChange",function(f){return s.model.ackTimeout=f}),e.qZA()(),e.TgZ(43,"div",4)(44,"label"),e._uU(45,"Message Timeout (in seconds)"),e.qZA(),e.TgZ(46,"input",8),e.NdJ("ngModelChange",function(f){return s.model.msgTimeout=f}),e.qZA()(),e.TgZ(47,"div",4)(48,"label"),e._uU(49,"Put Back Delay (in milliseconds)"),e.qZA(),e.TgZ(50,"input",8),e.NdJ("ngModelChange",function(f){return s.model.putBackDelay=f}),e.qZA()(),e.TgZ(51,"div",4)(52,"label"),e._uU(53,"Delay Between Message Consumes (in milliseconds)"),e.qZA(),e.TgZ(54,"input",8),e.NdJ("ngModelChange",function(f){return s.model.delay=f}),e.qZA()(),e.TgZ(55,"div",4)(56,"label"),e._uU(57,"Allowed Maximum Consumers (0 for unlimited)"),e.qZA(),e.TgZ(58,"input",8),e.NdJ("ngModelChange",function(f){return s.model.clientLimit=f}),e.qZA()(),e.TgZ(59,"div",4)(60,"label"),e._uU(61,"Allowed Maximum Messages (0 for unlimited)"),e.qZA(),e.TgZ(62,"input",8),e.NdJ("ngModelChange",function(f){return s.model.msgLimit=f}),e.qZA()(),e.TgZ(63,"div",4)(64,"label"),e._uU(65,"Allowed Maximum Size for single message in bytes (0 for unlimited)"),e.qZA(),e.TgZ(66,"input",8),e.NdJ("ngModelChange",function(f){return s.model.msgSizeLimit=f}),e.qZA()()()(),e.TgZ(67,"mat-dialog-actions",9)(68,"button",10),e.NdJ("click",function(){return s.create()}),e._uU(69,"Create Queue"),e.qZA(),e.TgZ(70,"button",11),e._uU(71,"Cancel"),e.qZA()()),2&o&&(e.xp6(8),e.Q6J("ngModel",s.model.name),e.xp6(4),e.Q6J("ngModel",s.model.manager),e.xp6(1),e.Q6J("ngForOf",s.managers),e.xp6(4),e.Q6J("ngModel",s.model.type),e.xp6(1),e.Q6J("ngForOf",s.typeItems),e.xp6(4),e.Q6J("ngModel",s.model.commit),e.xp6(1),e.Q6J("ngForOf",s.commitWhenItems),e.xp6(4),e.Q6J("ngModel",s.model.ack),e.xp6(1),e.Q6J("ngForOf",s.ackItems),e.xp6(4),e.Q6J("ngModel",s.model.putBack),e.xp6(1),e.Q6J("ngForOf",s.putBackItems),e.xp6(4),e.Q6J("ngModel",s.model.autoDestroy),e.xp6(1),e.Q6J("ngForOf",s.autoDestroyItems),e.xp6(4),e.Q6J("ngModel",s.model.ackTimeout),e.xp6(4),e.Q6J("ngModel",s.model.msgTimeout),e.xp6(4),e.Q6J("ngModel",s.model.putBackDelay),e.xp6(4),e.Q6J("ngModel",s.model.delay),e.xp6(4),e.Q6J("ngModel",s.model.clientLimit),e.xp6(4),e.Q6J("ngModel",s.model.msgLimit),e.xp6(4),e.Q6J("ngModel",s.model.msgSizeLimit))},directives:[C.uh,C.xY,h.Fj,h.JJ,h.On,h.EJ,y.sg,h.YN,h.Kr,h.wV,C.H8,C.ZT],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0 16px 0 0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]}),l})();var Q=_(823),A=_(7966);function F(l,c){1&l&&(e.TgZ(0,"em"),e._uU(1,"No Ack Timeout"),e.qZA())}function B(l,c){if(1&l&&(e.TgZ(0,"em"),e._uU(1),e.qZA()),2&l){const o=e.oxw().$implicit;e.xp6(1),e.hij("",o.info.ackTimeout," ms Timeout")}}function Y(l,c){1&l&&(e.TgZ(0,"span"),e._uU(1,"Unlimited"),e.qZA())}function E(l,c){1&l&&(e.TgZ(0,"span"),e._uU(1,"No Timeout"),e.qZA())}function t(l,c){if(1&l&&(e.TgZ(0,"em"),e._uU(1),e.ALo(2,"timespan"),e.qZA()),2&l){const o=e.oxw().$implicit;e.xp6(1),e.hij("",e.lcZ(2,1,o.info.msgTimeout)," Timeout")}}function n(l,c){1&l&&(e.TgZ(0,"span"),e._uU(1,"No Putback delay"),e.qZA())}function i(l,c){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&l){const o=e.oxw().$implicit;e.xp6(1),e.hij("",o.info.putBackDelay," ms Putback Delay")}}function u(l,c){1&l&&(e.TgZ(0,"em"),e._uU(1,"No Delay between msgs"),e.qZA())}function r(l,c){if(1&l&&(e.TgZ(0,"em"),e._uU(1),e.qZA()),2&l){const o=e.oxw().$implicit;e.xp6(1),e.hij("",o.info.delayBetweenMsgs," ms Delay between msgs")}}function a(l,c){if(1&l&&(e.TgZ(0,"div",16),e._UZ(1,"div",17),e.TgZ(2,"div",18)(3,"span")(4,"a",19),e._uU(5),e.qZA()(),e.TgZ(6,"em"),e._uU(7),e.qZA()(),e.TgZ(8,"div",20)(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"div",21)(12,"span")(13,"b"),e._uU(14),e.qZA(),e._uU(15," Messages"),e.qZA(),e.TgZ(16,"em"),e._uU(17),e.qZA()(),e.TgZ(18,"div",22)(19,"span"),e._uU(20),e.qZA(),e.YNc(21,F,2,0,"em",23),e.YNc(22,B,2,1,"em",23),e.qZA(),e.TgZ(23,"div",24)(24,"span"),e._uU(25),e.qZA(),e.TgZ(26,"em"),e._uU(27),e.ALo(28,"date"),e.qZA()(),e.TgZ(29,"div",21),e.YNc(30,Y,2,0,"span",23),e.YNc(31,E,2,0,"span",23),e.YNc(32,t,3,3,"em",23),e.qZA(),e.TgZ(33,"div",20),e.YNc(34,n,2,0,"span",23),e.YNc(35,i,2,1,"span",23),e.YNc(36,u,2,0,"em",23),e.YNc(37,r,2,1,"em",23),e.qZA()()),2&l){const o=c.$implicit;e.xp6(4),e.MGl("routerLink","/queue/",o.info.name,""),e.xp6(1),e.Oqu(o.info.name),e.xp6(2),e.Oqu(o.info.topic),e.xp6(3),e.Oqu(o.info.manager),e.xp6(4),e.Oqu(o.stats.storedMsgs+o.stats.storedPrioMsgs+o.stats.processingMsgs),e.xp6(3),e.hij("",o.stats.consumers," Consumers"),e.xp6(3),e.Oqu(o.info.acknowledge),e.xp6(1),e.Q6J("ngIf",0==o.info.ackTimeout),e.xp6(1),e.Q6J("ngIf",o.info.ackTimeout>0),e.xp6(3),e.Oqu(o.info.autoDestroy),e.xp6(2),e.hij("Created at ",e.xi3(28,18,1e3*o.info.createdDate,"yyyy-MM-dd HH:mm"),""),e.xp6(3),e.Q6J("ngIf",0==o.info.messageLimit),e.xp6(1),e.Q6J("ngIf",o.info.messageLimit>0),e.xp6(1),e.Q6J("ngIf",o.info.msgTimeout>0),e.xp6(2),e.Q6J("ngIf",0==o.info.putBackDelay),e.xp6(1),e.Q6J("ngIf",o.info.putBackDelay>0),e.xp6(1),e.Q6J("ngIf",0==o.info.delayBetweenMsgs),e.xp6(1),e.Q6J("ngIf",o.info.delayBetweenMsgs>0)}}function m(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),e.NdJ("click",function(){return e.CHM(o),e.oxw().create()}),e.qZA()(),e.TgZ(5,"div",6),e._uU(6," Name "),e.TgZ(7,"em"),e._uU(8),e.qZA()(),e.TgZ(9,"div",7),e._uU(10," Manager "),e.TgZ(11,"a",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().viewManagers()}),e._uU(12,"Defined Managers"),e.qZA()(),e.TgZ(13,"div",9),e._uU(14,"Messages"),e.qZA(),e.TgZ(15,"div",10),e._uU(16,"Acknowledge"),e.qZA(),e.TgZ(17,"div",11),e._uU(18,"Auto\xa0Destroy"),e.qZA(),e.TgZ(19,"div",9),e._uU(20,"Message\xa0Limit"),e.qZA(),e.TgZ(21,"div",7),e._uU(22,"PutBack / Delay"),e.qZA()(),e.TgZ(23,"div",12),e.YNc(24,a,38,21,"div",13),e.qZA()(),e.TgZ(25,"div",14)(26,"button",15),e.NdJ("click",function(){return e.CHM(o),e.oxw().create()}),e._uU(27,"Create New Queue"),e.qZA()()()}if(2&l){const o=e.oxw();e.xp6(8),e.hij("(",o.queues.length," Queues)"),e.xp6(16),e.Q6J("ngForOf",o.queues)}}let p=(()=>{class l extends O.H{constructor(o,s){super(),this.queueService=o,this.dialog=s}ngOnInit(){return(0,w.mG)(this,void 0,void 0,function*(){this.queues=yield this.queueService.list()})}create(){this.dialog.open(I,{width:"600px"}).componentInstance.onconfirmed.pipe((0,x.q)(1)).subscribe(g=>{g&&this.queueService.create(g).then(f=>{this.ngOnInit()})})}viewManagers(){this.queueService.getManagers().then(o=>{let s="Defined manager names are: "+o.join(", ");alert(s)})}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(T.g),e.Y36(C.uw))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-queues"]],features:[e.qOj],decls:1,vars:1,consts:[["class","queues",4,"ngIf"],[1,"queues"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Queue",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx16"],[1,"small","ml18",3,"click"],[1,"th","fx10"],[1,"th","fx12"],[1,"th","fx14"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"trow"],[1,"td","fx40px"],[1,"td","fx20"],[3,"routerLink"],[1,"td","fx16"],[1,"td","fx10"],[1,"td","fx12"],[4,"ngIf"],[1,"td","fx14"]],template:function(o,s){1&o&&e.YNc(0,m,28,2,"div",0),2&o&&e.Q6J("ngIf",s.queues)},directives:[y.O5,y.sg,Q.yS],pipes:[y.uU,A.c],styles:[".queues[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.queues[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}"]}),l})();var v=_(1887);let d=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[y.ez,v.D,C.Is,h.u5,Q.Bz.forChild([{path:"",component:p}])]]}),l})()},655:(L,M,_)=>{function b(t,n,i,u){return new(i||(i=Promise))(function(a,m){function p(l){try{d(u.next(l))}catch(c){m(c)}}function v(l){try{d(u.throw(l))}catch(c){m(c)}}function d(l){l.done?a(l.value):function r(a){return a instanceof i?a:new i(function(m){m(a)})}(l.value).then(p,v)}d((u=u.apply(t,n||[])).next())})}_.d(M,{mG:()=>b})}}]);