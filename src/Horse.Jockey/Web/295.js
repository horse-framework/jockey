"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[295],{6295:(w,g,r)=>{r.r(g),r.d(g,{RoutersModule:()=>P});var d=r(6814),f=r(5861),m=r(1418),_=r(3791),x=r(8152);class h{}var t=r(8124),l=r(9817),c=r(285);function Z(n,s){if(1&n&&(t.TgZ(0,"option",11),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("ngValue",e.value),t.xp6(1),t.Oqu(e.text)}}let v=(()=>{class n{get onconfirmed(){return this._onconfirmed}constructor(){this.model=new h,this.routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different binding"},{value:"Distribute",text:"Distribute: Each message is sent to all bindings"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active binding"}],this._onconfirmed=new x.xQ,this._confirmed=!1}ngOnInit(){}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-router-create-modal"]],decls:19,vars:3,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"router-form","scroll"],["queueForm",""],[1,"form-item"],["placeholder","Router Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"]],template:function(o,i){1&o&&(t.TgZ(0,"h2",0),t._uU(1,"Create New Router"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2,3)(5,"div",4)(6,"label"),t._uU(7,"Router Name"),t.qZA(),t.TgZ(8,"input",5),t.NdJ("ngModelChange",function(u){return i.model.name=u}),t.qZA()(),t.TgZ(9,"div",4)(10,"label"),t._uU(11,"Router Method"),t.qZA(),t.TgZ(12,"select",6),t.NdJ("ngModelChange",function(u){return i.model.method=u}),t.YNc(13,Z,2,2,"option",7),t.qZA()()()(),t.TgZ(14,"mat-dialog-actions",8)(15,"button",9),t.NdJ("click",function(){return i.create()}),t._uU(16,"Create Router"),t.qZA(),t.TgZ(17,"button",10),t._uU(18,"Cancel"),t.qZA()()),2&o&&(t.xp6(8),t.Q6J("ngModel",i.model.name),t.xp6(4),t.Q6J("ngModel",i.model.method),t.xp6(1),t.Q6J("ngForOf",i.routerMethods))},dependencies:[d.sg,l.ZT,l.uh,l.H8,l.xY,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.On],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.router-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]})}return n})();var T=r(3771),p=r(6956);let C=(()=>{class n{transform(e){let o=e.type;if("Direct"==o){if(!e.target.startsWith("@"))return"Id";{let i=e.target.indexOf(":");if(i>0)return e.target.substr(1,i-1)}}if("Http"==o)switch(e.contentType){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"PATCH";case 4:return"DELETE"}return o.indexOf("Queue")>=0?"Queue":o}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.Yjl({name:"bindingType",type:n,pure:!0})}return n})();function O(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"i"),t.TgZ(2,"a",25),t._uU(3),t.qZA(),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.ekj("green",e.enabled)("red",!e.enabled),t.xp6(1),t.MGl("routerLink","/router/",e.name,""),t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.Oqu(e.method)}}function M(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.contentType)}}function y(n,s){if(1&n&&(t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,O,6,7,"ng-container",20),t.qZA(),t.TgZ(3,"div",21)(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"div",22)(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"div",23)(10,"small"),t._uU(11),t.ALo(12,"bindingType"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"div",22),t.YNc(16,M,2,1,"span",20),t.qZA(),t.TgZ(17,"div",22)(18,"span"),t._uU(19),t.qZA()(),t.TgZ(20,"div",24)(21,"span"),t._uU(22),t.qZA()()()),2&n){const e=s.$implicit,o=s.index,i=t.oxw().$implicit;t.ekj("first-row",0==o)("last-row",o==i.bindings.length-1),t.xp6(2),t.Q6J("ngIf",0==o),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Oqu(e.type),t.xp6(3),t.Oqu(t.lcZ(12,12,e)),t.xp6(3),t.Oqu(e.displayTarget),t.xp6(2),t.Q6J("ngIf","Direct"==e.type),t.xp6(3),t.Oqu(e.interaction),t.xp6(3),t.Oqu(e.priority)}}function b(n,s){if(1&n&&(t.TgZ(0,"div",18)(1,"div",19),t._UZ(2,"i"),t.TgZ(3,"a",25),t._uU(4),t.qZA(),t.TgZ(5,"small"),t._uU(6),t.qZA()(),t.TgZ(7,"div",21),t._UZ(8,"span"),t.qZA(),t.TgZ(9,"div",22),t._UZ(10,"span"),t.qZA(),t._UZ(11,"div",23)(12,"div",22)(13,"div",22)(14,"div",24),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.ekj("green",e.enabled)("red",!e.enabled),t.xp6(1),t.MGl("routerLink","/router/",e.name,""),t.xp6(1),t.hij(" ",e.name," "),t.xp6(2),t.Oqu(e.method)}}function A(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"div",15),t.YNc(2,y,23,14,"div",16)(3,b,15,7,"div",17),t.BQk()),2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngForOf",e.bindings),t.xp6(1),t.Q6J("ngIf",0==e.bindings.length)}}function q(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.create())}),t.qZA()(),t.TgZ(5,"div",6),t._uU(6," Router "),t.TgZ(7,"em"),t._uU(8),t.qZA()(),t.TgZ(9,"div",7),t._uU(10,"Binding Name"),t.qZA(),t.TgZ(11,"div",8),t._uU(12,"Binding Type"),t.qZA(),t.TgZ(13,"div",9),t._uU(14,"Binding Target"),t.qZA(),t.TgZ(15,"div",8),t._uU(16,"Content Type"),t.qZA(),t.TgZ(17,"div",8),t._uU(18,"Interaction"),t.qZA(),t.TgZ(19,"div",10),t._uU(20,"Priority"),t.qZA()(),t.TgZ(21,"div",11),t.YNc(22,A,4,2,"ng-container",12),t.qZA()(),t.TgZ(23,"div",13)(24,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.create())}),t._uU(25,"Create New Router"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(8),t.hij("(",e.routers.length," Routers)"),t.xp6(14),t.Q6J("ngForOf",e.routers)}}let R=(()=>{class n extends _.H{constructor(e,o){super(),this.routerService=e,this.dialog=o}ngOnInit(){var e=this;return(0,f.Z)(function*(){let o=yield e.routerService.list();o.forEach(i=>{i.bindings.forEach(a=>{a.displayTarget=a.target.startsWith("@")?a.target.substr(a.target.indexOf(":")+1):a.target})}),e.routers=o})()}create(){this.dialog.open(v,{width:"600px"}).componentInstance.onconfirmed.pipe((0,m.q)(1)).subscribe(i=>{i&&this.routerService.create(i).then(a=>{this.ngOnInit()})})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(T.n),t.Y36(l.uw))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-routes"]],features:[t.qOj],decls:1,vars:1,consts:[["class","routers",4,"ngIf"],[1,"routers"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Router",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx14"],[1,"th","fx10"],[1,"th","fx28"],[1,"th","fx8"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"td","fx40px"],["class","trow",3,"first-row","last-row",4,"ngFor","ngForOf"],["class","trow",4,"ngIf"],[1,"trow"],[1,"td","td-fr","fx20"],[4,"ngIf"],[1,"td","fx14"],[1,"td","fx10"],[1,"td","td-fr","fx28"],[1,"td","fx8"],[2,"margin-right","18px","font-weight","500","line-height","23px","font-size","14px",3,"routerLink"]],template:function(o,i){1&o&&t.YNc(0,q,26,2,"div",0),2&o&&t.Q6J("ngIf",i.routers)},dependencies:[d.sg,d.O5,p.rH,C],styles:[".routers[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.routers[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.create-router[_ngcontent-%COMP%]{text-align:center;padding:40px}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}"]})}return n})();var U=r(658);let P=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.ez,U.D,l.Is,c.u5,p.Bz.forChild([{path:"",component:R}])]})}return n})()}}]);