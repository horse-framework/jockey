"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[38],{4038:($,r,s)=>{s.r(r),s.d(r,{QueuesModule:()=>R});var g=s(6814),f=s(5861),c=s(1418),Z=s(3791),v=s(8152),h=s(4815),C=s(7734);class T{constructor(){this.manager=null,this.commit=null,this.ack=null,this.type=null,this.autoDestroy=null,this.putBack=null,this.ackTimeout=null,this.msgTimeout=null,this.putBackDelay=null,this.delay=null,this.clientLimit=null,this.msgLimit=null,this.msgSizeLimit=null}}var e=s(8124),p=s(5361),d=s(9817),m=s(285);const M=["queueForm"];function x(n,l){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t)}}function q(n,l){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function Q(n,l){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function A(n,l){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function y(n,l){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}function J(n,l){if(1&n&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("ngValue",t.value),e.xp6(1),e.Oqu(t.text)}}let U=(()=>{class n{get onconfirmed(){return this._onconfirmed}constructor(t){this.queueService=t,this.model=new T,this.commitWhenItems=[{value:null,text:"(Default)"},{value:"None",text:"None"},{value:"AfterReceived",text:"After server received the message"},{value:"AfterSaved",text:"After message is saved to disk"},{value:"AfterSent",text:"After message is sent to at least one consumer"},{value:"AfterAcknowledge",text:"After a consumer send ack to server"}],this.ackItems=[{value:null,text:"(Default)"},{value:"None",text:"Disable acknowledge system"},{value:"JustRequest",text:"Request acknowledge but keep sending messages to same consumer"},{value:"WaitForAcknowledge",text:"Do not send next message to same consumer before receive ack for previous"}],this.typeItems=[{value:null,text:"(Default)"},{value:"Push",text:"Push: All consumers receive same message from queue (automatically)"},{value:"RoundRobin",text:"Round Robin: Only one consumer receive same message (automatically)"},{value:"Pull",text:"Pull: Only one consumer receive same message but it should send pull request"}],this.autoDestroyItems=[{value:null,text:"(Default)"},{value:"Disabled",text:"Queue stays forever. It's removed only manually."},{value:"NoMessages",text:"Queue is destroyed if empty"},{value:"NoConsumers",text:"Queue is destroyed if there are no consumers (even not empty)"},{value:"Empty",text:"Queue is destroyed when it's empty and there are no consumers"}],this.putBackItems=[{value:null,text:"(Default)"},{value:"No",text:"Put back operations are disabled"},{value:"Priority",text:"Message is put back as first message (beginning of the queue)"},{value:"Regular",text:"Message is put back as last message (end of the queue)"}],this.managers=[],this._onconfirmed=new v.xQ,this._confirmed=!1}ngOnInit(){this.queueService.getManagers().then(t=>this.managers=t),(0,h.F)(50).pipe((0,C.h)(()=>null!=this.queueForm),(0,c.q)(1)).subscribe(()=>{this.queueForm.nativeElement.querySelectorAll("select").forEach(u=>{u.getElementsByTagName("option")[0].selected=!0})})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}static#e=this.\u0275fac=function(u){return new(u||n)(e.Y36(p.g))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-queue-create-modal"]],viewQuery:function(u,o){if(1&u&&e.Gf(M,5),2&u){let a;e.iGM(a=e.CRH())&&(o.queueForm=a.first)}},decls:72,vars:20,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"queue-form","scroll"],["queueForm",""],[1,"form-item"],["placeholder","Queue Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["placeholder","Left blank for server default","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"]],template:function(u,o){1&u&&(e.TgZ(0,"h2",0),e._uU(1,"Create New Queue"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div",2,3)(5,"div",4)(6,"label"),e._uU(7,"Queue Name"),e.qZA(),e.TgZ(8,"input",5),e.NdJ("ngModelChange",function(i){return o.model.name=i}),e.qZA()(),e.TgZ(9,"div",4)(10,"label"),e._uU(11,"Queue Manager"),e.qZA(),e.TgZ(12,"select",6),e.NdJ("ngModelChange",function(i){return o.model.manager=i}),e.YNc(13,x,2,2,"option",7),e.qZA()(),e.TgZ(14,"div",4)(15,"label"),e._uU(16,"Queue Type"),e.qZA(),e.TgZ(17,"select",6),e.NdJ("ngModelChange",function(i){return o.model.type=i}),e.YNc(18,q,2,2,"option",7),e.qZA()(),e.TgZ(19,"div",4)(20,"label"),e._uU(21,"Commit When"),e.qZA(),e.TgZ(22,"select",6),e.NdJ("ngModelChange",function(i){return o.model.commit=i}),e.YNc(23,Q,2,2,"option",7),e.qZA()(),e.TgZ(24,"div",4)(25,"label"),e._uU(26,"Acknowledge"),e.qZA(),e.TgZ(27,"select",6),e.NdJ("ngModelChange",function(i){return o.model.ack=i}),e.YNc(28,A,2,2,"option",7),e.qZA()(),e.TgZ(29,"div",4)(30,"label"),e._uU(31,"Put Back"),e.qZA(),e.TgZ(32,"select",6),e.NdJ("ngModelChange",function(i){return o.model.putBack=i}),e.YNc(33,y,2,2,"option",7),e.qZA()(),e.TgZ(34,"div",4)(35,"label"),e._uU(36,"Auto Destroy"),e.qZA(),e.TgZ(37,"select",6),e.NdJ("ngModelChange",function(i){return o.model.autoDestroy=i}),e.YNc(38,J,2,2,"option",7),e.qZA()(),e.TgZ(39,"div",4)(40,"label"),e._uU(41,"Acknowledge Timeout (in milliseconds)"),e.qZA(),e.TgZ(42,"input",8),e.NdJ("ngModelChange",function(i){return o.model.ackTimeout=i}),e.qZA()(),e.TgZ(43,"div",4)(44,"label"),e._uU(45,"Message Timeout (in seconds)"),e.qZA(),e.TgZ(46,"input",8),e.NdJ("ngModelChange",function(i){return o.model.msgTimeout=i}),e.qZA()(),e.TgZ(47,"div",4)(48,"label"),e._uU(49,"Put Back Delay (in milliseconds)"),e.qZA(),e.TgZ(50,"input",8),e.NdJ("ngModelChange",function(i){return o.model.putBackDelay=i}),e.qZA()(),e.TgZ(51,"div",4)(52,"label"),e._uU(53,"Delay Between Message Consumes (in milliseconds)"),e.qZA(),e.TgZ(54,"input",8),e.NdJ("ngModelChange",function(i){return o.model.delay=i}),e.qZA()(),e.TgZ(55,"div",4)(56,"label"),e._uU(57,"Allowed Maximum Consumers (0 for unlimited)"),e.qZA(),e.TgZ(58,"input",8),e.NdJ("ngModelChange",function(i){return o.model.clientLimit=i}),e.qZA()(),e.TgZ(59,"div",4)(60,"label"),e._uU(61,"Allowed Maximum Messages (0 for unlimited)"),e.qZA(),e.TgZ(62,"input",8),e.NdJ("ngModelChange",function(i){return o.model.msgLimit=i}),e.qZA()(),e.TgZ(63,"div",4)(64,"label"),e._uU(65,"Allowed Maximum Size for single message in bytes (0 for unlimited)"),e.qZA(),e.TgZ(66,"input",8),e.NdJ("ngModelChange",function(i){return o.model.msgSizeLimit=i}),e.qZA()()()(),e.TgZ(67,"mat-dialog-actions",9)(68,"button",10),e.NdJ("click",function(){return o.create()}),e._uU(69,"Create Queue"),e.qZA(),e.TgZ(70,"button",11),e._uU(71,"Cancel"),e.qZA()()),2&u&&(e.xp6(8),e.Q6J("ngModel",o.model.name),e.xp6(4),e.Q6J("ngModel",o.model.manager),e.xp6(1),e.Q6J("ngForOf",o.managers),e.xp6(4),e.Q6J("ngModel",o.model.type),e.xp6(1),e.Q6J("ngForOf",o.typeItems),e.xp6(4),e.Q6J("ngModel",o.model.commit),e.xp6(1),e.Q6J("ngForOf",o.commitWhenItems),e.xp6(4),e.Q6J("ngModel",o.model.ack),e.xp6(1),e.Q6J("ngForOf",o.ackItems),e.xp6(4),e.Q6J("ngModel",o.model.putBack),e.xp6(1),e.Q6J("ngForOf",o.putBackItems),e.xp6(4),e.Q6J("ngModel",o.model.autoDestroy),e.xp6(1),e.Q6J("ngForOf",o.autoDestroyItems),e.xp6(4),e.Q6J("ngModel",o.model.ackTimeout),e.xp6(4),e.Q6J("ngModel",o.model.msgTimeout),e.xp6(4),e.Q6J("ngModel",o.model.putBackDelay),e.xp6(4),e.Q6J("ngModel",o.model.delay),e.xp6(4),e.Q6J("ngModel",o.model.clientLimit),e.xp6(4),e.Q6J("ngModel",o.model.msgLimit),e.xp6(4),e.Q6J("ngModel",o.model.msgSizeLimit))},dependencies:[g.sg,d.ZT,d.uh,d.H8,d.xY,m.YN,m.Kr,m.Fj,m.wV,m.EJ,m.JJ,m.On],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0 16px 0 0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]})}return n})();var _=s(6956),k=s(3164);function b(n,l){1&n&&(e.TgZ(0,"em"),e._uU(1,"No Ack Timeout"),e.qZA())}function O(n,l){if(1&n&&(e.TgZ(0,"em"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.info.ackTimeout," ms Timeout")}}function N(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Unlimited"),e.qZA())}function w(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Timeout"),e.qZA())}function D(n,l){if(1&n&&(e.TgZ(0,"em"),e._uU(1),e.ALo(2,"timespan"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.lcZ(2,1,t.info.msgTimeout)," Timeout")}}function P(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Putback delay"),e.qZA())}function I(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.info.putBackDelay," ms Putback Delay")}}function F(n,l){1&n&&(e.TgZ(0,"em"),e._uU(1,"No Delay between msgs"),e.qZA())}function B(n,l){if(1&n&&(e.TgZ(0,"em"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.info.delayBetweenMsgs," ms Delay between msgs")}}function j(n,l){if(1&n&&(e.TgZ(0,"div",16),e._UZ(1,"div",17),e.TgZ(2,"div",18)(3,"span")(4,"a",19),e._uU(5),e.qZA()(),e.TgZ(6,"em"),e._uU(7),e.qZA()(),e.TgZ(8,"div",20)(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"div",21)(12,"span")(13,"b"),e._uU(14),e.qZA(),e._uU(15," Messages"),e.qZA(),e.TgZ(16,"em"),e._uU(17),e.qZA()(),e.TgZ(18,"div",22)(19,"span"),e._uU(20),e.qZA(),e.YNc(21,b,2,0,"em",23)(22,O,2,1,"em",23),e.qZA(),e.TgZ(23,"div",24)(24,"span"),e._uU(25),e.qZA(),e.TgZ(26,"em"),e._uU(27),e.ALo(28,"date"),e.qZA()(),e.TgZ(29,"div",21),e.YNc(30,N,2,0,"span",23)(31,w,2,0,"span",23)(32,D,3,3,"em",23),e.qZA(),e.TgZ(33,"div",20),e.YNc(34,P,2,0,"span",23)(35,I,2,1,"span",23)(36,F,2,0,"em",23)(37,B,2,1,"em",23),e.qZA()()),2&n){const t=l.$implicit;e.xp6(4),e.MGl("routerLink","/queue/",t.info.name,""),e.xp6(1),e.Oqu(t.info.name),e.xp6(2),e.Oqu(t.info.topic),e.xp6(3),e.Oqu(t.info.manager),e.xp6(4),e.Oqu(t.stats.storedMsgs+t.stats.storedPrioMsgs+t.stats.processingMsgs),e.xp6(3),e.hij("",t.stats.consumers," Consumers"),e.xp6(3),e.Oqu(t.info.acknowledge),e.xp6(1),e.Q6J("ngIf",0==t.info.ackTimeout),e.xp6(1),e.Q6J("ngIf",t.info.ackTimeout>0),e.xp6(3),e.Oqu(t.info.autoDestroy),e.xp6(2),e.hij("Created at ",e.xi3(28,18,1e3*t.info.createdDate,"yyyy-MM-dd HH:mm"),""),e.xp6(3),e.Q6J("ngIf",0==t.info.messageLimit),e.xp6(1),e.Q6J("ngIf",t.info.messageLimit>0),e.xp6(1),e.Q6J("ngIf",t.info.msgTimeout>0),e.xp6(2),e.Q6J("ngIf",0==t.info.putBackDelay),e.xp6(1),e.Q6J("ngIf",t.info.putBackDelay>0),e.xp6(1),e.Q6J("ngIf",0==t.info.delayBetweenMsgs),e.xp6(1),e.Q6J("ngIf",t.info.delayBetweenMsgs>0)}}function L(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"a",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.create())}),e.qZA()(),e.TgZ(5,"div",6),e._uU(6," Name "),e.TgZ(7,"em"),e._uU(8),e.qZA()(),e.TgZ(9,"div",7),e._uU(10," Manager "),e.TgZ(11,"a",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.viewManagers())}),e._uU(12,"Defined Managers"),e.qZA()(),e.TgZ(13,"div",9),e._uU(14,"Messages"),e.qZA(),e.TgZ(15,"div",10),e._uU(16,"Acknowledge"),e.qZA(),e.TgZ(17,"div",11),e._uU(18,"Auto\xa0Destroy"),e.qZA(),e.TgZ(19,"div",9),e._uU(20,"Message\xa0Limit"),e.qZA(),e.TgZ(21,"div",7),e._uU(22,"PutBack / Delay"),e.qZA()(),e.TgZ(23,"div",12),e.YNc(24,j,38,21,"div",13),e.qZA()(),e.TgZ(25,"div",14)(26,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.create())}),e._uU(27,"Create New Queue"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(8),e.hij("(",t.queues.length," Queues)"),e.xp6(16),e.Q6J("ngForOf",t.queues)}}let Y=(()=>{class n extends Z.H{constructor(t,u){super(),this.queueService=t,this.dialog=u}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.queues=yield t.queueService.list()})()}create(){this.dialog.open(U,{width:"600px"}).componentInstance.onconfirmed.pipe((0,c.q)(1)).subscribe(o=>{o&&this.queueService.create(o).then(a=>{this.ngOnInit()})})}viewManagers(){this.queueService.getManagers().then(t=>{let u="Defined manager names are: "+t.join(", ");alert(u)})}static#e=this.\u0275fac=function(u){return new(u||n)(e.Y36(p.g),e.Y36(d.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-queues"]],features:[e.qOj],decls:1,vars:1,consts:[["class","queues",4,"ngIf"],[1,"queues"],[1,"table"],[1,"thead"],[1,"th","fx40px"],["title","Create New Queue",1,"fa","fa-solid","fa-plus","hreverse",3,"click"],[1,"th","fx20"],[1,"th","fx16"],[1,"small","ml18",3,"click"],[1,"th","fx10"],[1,"th","fx12"],[1,"th","fx14"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"create-end"],[3,"click"],[1,"trow"],[1,"td","fx40px"],[1,"td","fx20"],[3,"routerLink"],[1,"td","fx16"],[1,"td","fx10"],[1,"td","fx12"],[4,"ngIf"],[1,"td","fx14"]],template:function(u,o){1&u&&e.YNc(0,L,28,2,"div",0),2&u&&e.Q6J("ngIf",o.queues)},dependencies:[g.sg,g.O5,_.rH,g.uU,k.c],styles:[".queues[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.queues[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}"]})}return n})();var S=s(658);let R=(()=>{class n{static#e=this.\u0275fac=function(u){return new(u||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[g.ez,S.D,d.Is,m.u5,_.Bz.forChild([{path:"",component:Y}])]})}return n})()}}]);