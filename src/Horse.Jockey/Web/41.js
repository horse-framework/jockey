"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[41],{5041:(R,m,r)=>{r.r(m),r.d(m,{HorseRouterModule:()=>F});var s=r(6814),f=r(5861),u=r(1418),h=r(3791),_=r(3107),x=r(8152);class v{constructor(){this.priority=0,this.contentType=null}}var e=r(8124),M=r(5361),a=r(285),c=r(9817);function C(t,l){if(1&t&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.Q6J("ngValue",n.value),e.xp6(1),e.Oqu(n.text)}}function T(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",3)(1,"label"),e._uU(2,"Full Binding Type Name (Namespace.TypeName, AssemblyName)"),e.qZA(),e.TgZ(3,"input",14),e.NdJ("ngModelChange",function(o){e.CHM(n);const d=e.oxw();return e.KtG(d.model.customBindingType=o)}),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.model.customBindingType)}}function Z(t,l){if(1&t&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.Q6J("ngValue",n.value),e.xp6(1),e.Oqu(n.text)}}function b(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",3)(1,"label"),e._uU(2,"Binding Method"),e.qZA(),e.TgZ(3,"select",15),e.NdJ("ngModelChange",function(o){e.CHM(n);const d=e.oxw();return e.KtG(d.model.method=o)}),e.YNc(4,Z,2,2,"option",6),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.model.method),e.xp6(1),e.Q6J("ngForOf",n.httpMethods)}}function A(t,l){if(1&t&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.Q6J("ngValue",n.value),e.xp6(1),e.Oqu(n.text)}}function y(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",3)(1,"label"),e._uU(2,"Binding Method"),e.qZA(),e.TgZ(3,"select",16),e.NdJ("ngModelChange",function(o){e.CHM(n);const d=e.oxw();return e.KtG(d.model.method=o)}),e.YNc(4,A,2,2,"option",6),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.model.method),e.xp6(1),e.Q6J("ngForOf",n.routerMethods)}}function O(t,l){if(1&t&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.Q6J("ngValue",n.name),e.xp6(1),e.AsE("",n.name," (",n.type,")")}}function B(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",3)(1,"label"),e._uU(2,"Binding Target Queue"),e.qZA(),e.TgZ(3,"select",5),e.NdJ("ngModelChange",function(o){e.CHM(n);const d=e.oxw();return e.KtG(d.model.target=o)}),e.YNc(4,O,2,3,"option",6),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.model.target),e.xp6(1),e.Q6J("ngForOf",n.queues)}}function q(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",3)(1,"label"),e._uU(2,"Binding Target"),e.qZA(),e.TgZ(3,"input",17),e.NdJ("ngModelChange",function(o){e.CHM(n);const d=e.oxw();return e.KtG(d.model.target=o)}),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.model.target)}}function P(t,l){if(1&t&&(e.TgZ(0,"option",13),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.Q6J("ngValue",n.value),e.xp6(1),e.Oqu(n.text)}}let J=(()=>{class t{get onconfirmed(){return this._onconfirmed}constructor(n){this.queueService=n,this.model=new v,this.bindingTypes=[{value:"QueueBinding",text:"Queue Binding"},{value:"AutoQueueBinding",text:"Auto Queue Binding"},{value:"DynamicQueueBinding",text:"Dynamic Queue Binding"},{value:"TopicBinding",text:"Topic Binding"},{value:"DirectBinding",text:"Direct Binding"},{value:"HttpBinding",text:"Http Binding"},{value:"custom",text:"(Custom Binding)"}],this.routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different targets"},{value:"Distribute",text:"Distribute: Each message is sent to all targets"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active targets"}],this.httpMethods=[{value:"Get",text:"GET"},{value:"Post",text:"POST"},{value:"Put",text:"PUT"},{value:"Patch",text:"PATCH"},{value:"Delete",text:"DELETE"}],this.interactions=[{value:"None",text:"No response interaction"},{value:"Response",text:"Router waits response from that binding"}],this._onconfirmed=new x.xQ,this._confirmed=!1}ngOnInit(){this.queueService.listSummary().then(n=>{this.queues=n})}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}add(){this._confirmed=!0,this._onconfirmed.next(this.model)}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(M.g))};static#n=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-binding-add-modal"]],decls:37,vars:12,consts:[["mat-dialog-title","",1,"title"],[1,"content"],["queueForm",""],[1,"form-item"],["placeholder","Binding Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-item",4,"ngIf"],["placeholder","Higher values for higher priority","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Left blank for router default","type","number",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-green",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-grey"],[3,"ngValue"],["placeholder","Binding Full Type Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],["placeholder","Select an HTTP Method",1,"jockey-select",3,"ngModel","ngModelChange"],["placeholder","Default value is Distribute",1,"jockey-select",3,"ngModel","ngModelChange"],["placeholder","Binding Target","type","text",1,"jockey-text",3,"ngModel","ngModelChange"]],template:function(i,o){1&i&&(e.TgZ(0,"h2",0),e._uU(1,"Add Binding"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"div",null,2)(5,"div",3)(6,"label"),e._uU(7,"Binding Name"),e.qZA(),e.TgZ(8,"input",4),e.NdJ("ngModelChange",function(g){return o.model.name=g}),e.qZA()(),e.TgZ(9,"div",3)(10,"label"),e._uU(11,"Binding Type"),e.qZA(),e.TgZ(12,"select",5),e.NdJ("ngModelChange",function(g){return o.model.type=g}),e.YNc(13,C,2,2,"option",6),e.qZA()(),e.YNc(14,T,4,1,"div",7)(15,b,5,2,"div",7)(16,y,5,2,"div",7)(17,B,5,2,"div",7)(18,q,4,1,"div",7),e.TgZ(19,"div",3)(20,"label"),e._uU(21,"Binding Interaction"),e.qZA(),e.TgZ(22,"select",5),e.NdJ("ngModelChange",function(g){return o.model.interaction=g}),e.YNc(23,P,2,2,"option",6),e.qZA()(),e.TgZ(24,"div",3)(25,"label"),e._uU(26,"Binding Priority"),e.qZA(),e.TgZ(27,"input",8),e.NdJ("ngModelChange",function(g){return o.model.priority=g}),e.qZA()(),e.TgZ(28,"div",3)(29,"label"),e._uU(30,"Content Type"),e.qZA(),e.TgZ(31,"input",9),e.NdJ("ngModelChange",function(g){return o.model.contentType=g}),e.qZA()()()(),e.TgZ(32,"mat-dialog-actions",10)(33,"button",11),e.NdJ("click",function(){return o.add()}),e._uU(34,"Add Binding"),e.qZA(),e.TgZ(35,"button",12),e._uU(36,"Cancel"),e.qZA()()),2&i&&(e.xp6(8),e.Q6J("ngModel",o.model.name),e.xp6(4),e.Q6J("ngModel",o.model.type),e.xp6(1),e.Q6J("ngForOf",o.bindingTypes),e.xp6(1),e.Q6J("ngIf","custom"==o.model.type),e.xp6(1),e.Q6J("ngIf","HttpBinding"==o.model.type),e.xp6(1),e.Q6J("ngIf","HttpBinding"!=o.model.type),e.xp6(1),e.Q6J("ngIf","QueueBinding"==o.model.type),e.xp6(1),e.Q6J("ngIf","QueueBinding"!=o.model.type),e.xp6(4),e.Q6J("ngModel",o.model.interaction),e.xp6(1),e.Q6J("ngForOf",o.interactions),e.xp6(4),e.Q6J("ngModel",o.model.priority),e.xp6(4),e.Q6J("ngModel",o.model.contentType))},dependencies:[s.sg,s.O5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.On,c.ZT,c.uh,c.H8,c.xY],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.queue-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;max-height:500px;overflow-y:auto;padding:0}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto;line-height:18px}"]})}return t})();var N=r(3771),p=r(6956);function U(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e._uU(4),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.qZA(),e.TgZ(7,"div",15),e._uU(8),e.qZA(),e.TgZ(9,"div",15),e._uU(10),e.qZA(),e.TgZ(11,"div",15),e._uU(12),e.qZA(),e.TgZ(13,"div",15)(14,"button",16),e.NdJ("click",function(){const d=e.CHM(n).$implicit,g=e.oxw(2);return e.KtG(g.removeBinding(d))}),e._uU(15,"Remove"),e.qZA()()()}if(2&t){const n=l.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.type),e.xp6(2),e.Oqu(n.target),e.xp6(2),e.Oqu(n.contentType),e.xp6(2),e.Oqu(n.interaction),e.xp6(2),e.Oqu(n.priority)}}function Q(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"h2"),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"small"),e._uU(6),e.qZA(),e.TgZ(7,"span",2),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.remove())}),e._uU(8,"Delete Router"),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",4)(11,"div",5)(12,"div",6),e._uU(13,"Binding Name"),e.qZA(),e.TgZ(14,"div",6),e._uU(15,"Binding Type"),e.qZA(),e.TgZ(16,"div",7),e._uU(17,"Binding Target"),e.qZA(),e.TgZ(18,"div",8),e._uU(19,"Content Type"),e.qZA(),e.TgZ(20,"div",8),e._uU(21,"Interaction"),e.qZA(),e.TgZ(22,"div",8),e._uU(23,"Priority"),e.qZA(),e.TgZ(24,"div",8),e._uU(25,"Action"),e.qZA()(),e.TgZ(26,"div",9),e.YNc(27,U,16,6,"div",10),e.qZA()()(),e.TgZ(28,"div",11)(29,"button",2),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.addBinding())}),e._uU(30,"Add Binding"),e.qZA()()()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.model.name),e.xp6(3),e.Oqu(n.model.method),e.xp6(21),e.Q6J("ngForOf",n.model.bindings)}}let w=(()=>{class t extends h.H{constructor(n,i,o,d){super(),this.routerService=n,this.router=i,this.dialog=o,this.activatedRoute=d}ngOnInit(){var n=this;return(0,f.Z)(function*(){n.routerName=n.activatedRoute.snapshot.params.name,n.model=yield n.routerService.get(n.routerName)})()}remove(){let i=this.dialog.open(_.z,{width:"600px"}).componentInstance;i.message='Router and binding options will be removed belong it but binding targets will not be removed (bonded queues etc). Are you sure to <b class="imp">delete</b> this router and all bindings?',i.onclosed.pipe((0,u.q)(1)).subscribe(o=>{o&&this.routerService.remove(this.routerName).then(d=>{this.router.navigateByUrl("/routers")})})}addBinding(){let i=this.dialog.open(J,{width:"600px"}).componentInstance;i.model.router=this.routerName,i.onconfirmed.pipe((0,u.q)(1)).subscribe(o=>{o&&this.routerService.addBinding(o).then(d=>{this.ngOnInit()})})}removeBinding(n){let o=this.dialog.open(_.z,{width:"600px"}).componentInstance;o.message='Are you sure to <b class="imp">remove</b> this binding from the router?',o.onclosed.pipe((0,u.q)(1)).subscribe(d=>{d&&this.routerService.removeBinding(this.routerName,n.name).then(g=>this.ngOnInit())})}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(N.n),e.Y36(p.F0),e.Y36(c.uw),e.Y36(p.gz))};static#n=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-router"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"router-info"],[3,"click"],[1,"bindings"],[1,"table"],[1,"thead"],[1,"th","fx16"],[1,"th","fx28"],[1,"th","fx10"],[1,"tbody"],["class","trow",4,"ngFor","ngForOf"],[1,"add-binding"],[1,"trow"],[1,"td","fx16"],[1,"td","fx28"],[1,"td","fx10"],[1,"remove-binding",3,"click"]],template:function(i,o){1&i&&e.YNc(0,Q,31,3,"div",0),2&i&&e.Q6J("ngIf",o.model)},dependencies:[s.sg,s.O5],styles:[".router-info[_ngcontent-%COMP%]{margin:auto;padding:0 60px 50px;text-align:left;color:#eee}.router-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#fff}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;align-content:flex-start}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:12px;background-color:#106030;padding:6px 10px;border-radius:2px;font-weight:500;font-size:13px;line-height:20px}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;margin-right:6px;background-color:#c00000;padding:6px 10px;border-radius:2px;font-weight:500;font-size:13px;line-height:20px}.router-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#ff1010}.bindings[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center;color:#eee}.bindings[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.add-binding[_ngcontent-%COMP%]{text-align:center;padding:40px}.add-binding[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.add-binding[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}.remove-binding[_ngcontent-%COMP%]{border:none;border-radius:2px;background-color:#c00000;color:#fafafa;font-size:13px;font-weight:500;padding:8px 12px;cursor:pointer;width:90px}.remove-binding[_ngcontent-%COMP%]:hover{background-color:#ff2020}"]})}return t})(),F=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#n=this.\u0275mod=e.oAB({type:t});static#t=this.\u0275inj=e.cJS({imports:[s.ez,a.u5,c.Is,p.Bz.forChild([{path:":name",component:w}])]})}return t})()}}]);