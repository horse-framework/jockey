"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[205],{75205:function(t,e,n){n.r(e),n.d(e,{RoutersModule:function(){return A}});var o=n(38583),r=n(64762),i=n(15257),c=n(52962),a=n(79765);class s{}var g=n(33018),d=n(71636),u=n(90665);function l(t,e){if(1&t&&(g.TgZ(0,"option",11),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.Q6J("ngValue",t.value),g.xp6(1),g.Oqu(t.text)}}let f=(()=>{class t{constructor(){this.model=new s,this.routerMethods=[{value:"RoundRobin",text:"Round Robin: Each message is redirected different binding"},{value:"Distribute",text:"Distribute: Each message is sent to all bindings"},{value:"OnlyFirst",text:"Only First: Each message is redirected to only first active binding"}],this._onconfirmed=new a.xQ,this._confirmed=!1}get onconfirmed(){return this._onconfirmed}ngOnInit(){}ngOnDestroy(){this._confirmed||this._onconfirmed.next(null)}create(){this._confirmed=!0,this._onconfirmed.next(this.model)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-router-create-modal"]],decls:19,vars:3,consts:[["mat-dialog-title","",1,"title"],[1,"content"],[1,"router-form","scroll"],["queueForm",""],[1,"form-item"],["placeholder","Router Name","type","text",1,"jockey-text",3,"ngModel","ngModelChange"],[1,"jockey-select",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"buttons"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-confirm",3,"click"],["mat-button","","mat-dialog-close","",1,"modal-btn","btn-cancel"],[3,"ngValue"]],template:function(t,e){1&t&&(g.TgZ(0,"h2",0),g._uU(1,"Create New Router"),g.qZA(),g.TgZ(2,"mat-dialog-content",1),g.TgZ(3,"div",2,3),g.TgZ(5,"div",4),g.TgZ(6,"label"),g._uU(7,"Router Name"),g.qZA(),g.TgZ(8,"input",5),g.NdJ("ngModelChange",function(t){return e.model.name=t}),g.qZA(),g.qZA(),g.TgZ(9,"div",4),g.TgZ(10,"label"),g._uU(11,"Router Method"),g.qZA(),g.TgZ(12,"select",6),g.NdJ("ngModelChange",function(t){return e.model.method=t}),g.YNc(13,l,2,2,"option",7),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"mat-dialog-actions",8),g.TgZ(15,"button",9),g.NdJ("click",function(){return e.create()}),g._uU(16,"Create Router"),g.qZA(),g.TgZ(17,"button",10),g._uU(18,"Cancel"),g.qZA(),g.qZA()),2&t&&(g.xp6(8),g.Q6J("ngModel",e.model.name),g.xp6(4),g.Q6J("ngModel",e.model.method),g.xp6(1),g.Q6J("ngForOf",e.routerMethods))},directives:[d.uh,d.xY,u.Fj,u.JJ,u.On,u.EJ,o.sg,d.H8,d.ZT,u.YN,u.Kr],styles:[".title[_ngcontent-%COMP%]{color:#eee}.content[_ngcontent-%COMP%]{padding:0 25px 10px;display:block}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d2d2d2;font-size:14px;line-height:30px}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;align-items:flex-start;align-content:flex-start;padding:15px 0}.modal-btn[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid;border-radius:2px;background-color:transparent;font-weight:500;font-size:14px;color:#f0f0f0;margin-left:16px}.btn-cancel[_ngcontent-%COMP%]{border-color:#777}.btn-cancel[_ngcontent-%COMP%]:hover{border-color:#999}.btn-confirm[_ngcontent-%COMP%]{border-color:#10a040}.btn-confirm[_ngcontent-%COMP%]:hover{border-color:#10d060}.target-text[_ngcontent-%COMP%]{border:1px solid #555;background-color:#000;color:#eee;font-size:14px;font-weight:500;padding:8px;width:320px}.target-text[_ngcontent-%COMP%]:focus, .target-text[_ngcontent-%COMP%]:active{border-color:#10a040}.router-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch}.form-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;align-content:stretch;align-items:stretch;justify-content:stretch;justify-items:stretch;padding:8px 0}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 auto;color:#bbb;font-size:13px;font-weight:500}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})();var p=n(71632),Z=n(72667);let x=(()=>{class t{transform(t){let e=t.type;if("Direct"==e){if(!t.target.startsWith("@"))return"Id";{let e=t.target.indexOf(":");if(e>0)return t.target.substr(1,e-1)}}if("Http"==e)switch(t.contentType){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"PATCH";case 4:return"DELETE"}return e.indexOf("Queue")>=0?"Queue":e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=g.Yjl({name:"bindingType",type:t,pure:!0}),t})();function m(t,e){if(1&t&&(g.ynx(0),g._UZ(1,"i"),g.TgZ(2,"a",22),g._uU(3),g.qZA(),g.TgZ(4,"small"),g._uU(5),g.qZA(),g.BQk()),2&t){const t=g.oxw(2).$implicit;g.xp6(1),g.ekj("green",t.enabled)("red",!t.enabled),g.xp6(1),g.MGl("routerLink","/router/",t.name,""),g.xp6(1),g.hij(" ",t.name," "),g.xp6(2),g.Oqu(t.method)}}function h(t,e){if(1&t&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(1),g.Oqu(t.contentType)}}function b(t,e){if(1&t&&(g.TgZ(0,"div",15),g.TgZ(1,"div",16),g.YNc(2,m,6,7,"ng-container",17),g.qZA(),g.TgZ(3,"div",18),g.TgZ(4,"span"),g._uU(5),g.qZA(),g.qZA(),g.TgZ(6,"div",19),g.TgZ(7,"span"),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"div",20),g.TgZ(10,"small"),g._uU(11),g.ALo(12,"bindingType"),g.qZA(),g.TgZ(13,"span"),g._uU(14),g.qZA(),g.qZA(),g.TgZ(15,"div",19),g.YNc(16,h,2,1,"span",17),g.qZA(),g.TgZ(17,"div",19),g.TgZ(18,"span"),g._uU(19),g.qZA(),g.qZA(),g.TgZ(20,"div",21),g.TgZ(21,"span"),g._uU(22),g.qZA(),g.qZA(),g.qZA()),2&t){const t=e.$implicit,n=e.index,o=g.oxw().$implicit;g.ekj("first-row",0==n)("last-row",n==o.bindings.length-1),g.xp6(2),g.Q6J("ngIf",0==n),g.xp6(3),g.Oqu(t.name),g.xp6(3),g.Oqu(t.type),g.xp6(3),g.Oqu(g.lcZ(12,12,t)),g.xp6(3),g.Oqu(t.displayTarget),g.xp6(2),g.Q6J("ngIf","Direct"==t.type),g.xp6(3),g.Oqu(t.interaction),g.xp6(3),g.Oqu(t.priority)}}function _(t,e){if(1&t&&(g.TgZ(0,"div",15),g.TgZ(1,"div",16),g._UZ(2,"i"),g.TgZ(3,"a",22),g._uU(4),g.qZA(),g.TgZ(5,"small"),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"div",18),g._UZ(8,"span"),g.qZA(),g.TgZ(9,"div",19),g._UZ(10,"span"),g.qZA(),g._UZ(11,"div",20),g._UZ(12,"div",19),g._UZ(13,"div",19),g._UZ(14,"div",21),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(2),g.ekj("green",t.enabled)("red",!t.enabled),g.xp6(1),g.MGl("routerLink","/router/",t.name,""),g.xp6(1),g.hij(" ",t.name," "),g.xp6(2),g.Oqu(t.method)}}function T(t,e){if(1&t&&(g.ynx(0),g.YNc(1,b,23,14,"div",13),g.YNc(2,_,15,7,"div",14),g.BQk()),2&t){const t=e.$implicit;g.xp6(1),g.Q6J("ngForOf",t.bindings),g.xp6(1),g.Q6J("ngIf",0==t.bindings.length)}}function q(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",1),g.TgZ(1,"div",2),g.TgZ(2,"div",3),g.TgZ(3,"div",4),g._uU(4,"Router"),g.qZA(),g.TgZ(5,"div",5),g._uU(6,"Binding Name"),g.qZA(),g.TgZ(7,"div",6),g._uU(8,"Binding Type"),g.qZA(),g.TgZ(9,"div",7),g._uU(10,"Binding Target"),g.qZA(),g.TgZ(11,"div",6),g._uU(12,"Content Type"),g.qZA(),g.TgZ(13,"div",6),g._uU(14,"Interaction"),g.qZA(),g.TgZ(15,"div",8),g._uU(16,"Priority"),g.qZA(),g.qZA(),g.TgZ(17,"div",9),g.YNc(18,T,3,2,"ng-container",10),g.qZA(),g.qZA(),g.TgZ(19,"div",11),g.TgZ(20,"button",12),g.NdJ("click",function(){return g.CHM(t),g.oxw().create()}),g._uU(21,"Create New Router"),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=g.oxw();g.xp6(18),g.Q6J("ngForOf",t.routers)}}let v=(()=>{class t extends c.H{constructor(t,e){super(),this.routerService=t,this.dialog=e}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){let t=yield this.routerService.list();t.forEach(t=>{t.bindings.forEach(t=>{t.displayTarget=t.target.startsWith("@")?t.target.substr(t.target.indexOf(":")+1):t.target})}),this.routers=t})}create(){this.dialog.open(f,{width:"600px"}).componentInstance.onconfirmed.pipe((0,i.q)(1)).subscribe(t=>{t&&this.routerService.create(t).then(t=>{this.ngOnInit()})})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(p.n),g.Y36(d.uw))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-routes"]],features:[g.qOj],decls:1,vars:1,consts:[["class","routers",4,"ngIf"],[1,"routers"],[1,"table"],[1,"thead"],[1,"th","fx20"],[1,"th","fx14"],[1,"th","fx10"],[1,"th","fx28"],[1,"th","fx8"],[1,"tbody"],[4,"ngFor","ngForOf"],[1,"create-router"],[3,"click"],["class","trow",3,"first-row","last-row",4,"ngFor","ngForOf"],["class","trow",4,"ngIf"],[1,"trow"],[1,"td","td-fr","fx20"],[4,"ngIf"],[1,"td","fx14"],[1,"td","fx10"],[1,"td","td-fr","fx28"],[1,"td","fx8"],[2,"margin-right","18px","font-weight","500","line-height","23px","font-size","14px",3,"routerLink"]],template:function(t,e){1&t&&g.YNc(0,q,22,1,"div",0),2&t&&g.Q6J("ngIf",e.routers)},directives:[o.O5,o.sg,Z.yS],pipes:[x],styles:[".routers[_ngcontent-%COMP%]{margin:auto;padding:0 60px;text-align:center}.routers[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;text-align:left}.create-router[_ngcontent-%COMP%]{text-align:center;padding:40px}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;border:2px solid;border-radius:2px;color:#fff;box-sizing:border-box;padding:12px 20px;font-weight:500;background-color:transparent;border-color:#109030}.create-router[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#10f070}"]}),t})();var O=n(91887);let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[o.ez,O.D,d.Is,u.u5,Z.Bz.forChild([{path:"",component:v}])]]}),t})()},64762:function(t,e,n){function o(t,e,n,o){return new(n||(n=Promise))(function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){t.done?r(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(c,a)}s((o=o.apply(t,e||[])).next())})}n.d(e,{mG:function(){return o}})}}]);